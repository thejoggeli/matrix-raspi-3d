define("discourse/plugins/discourse-adplugin/discourse/components/google-dfp-ad",["exports","discourse/lib/load-script"],function(e,t){"use strict";function s(e){return e.substring(0,3).trim()}function n(e){return e.substring(4,7).trim()}function a(e){var t=e.replace(/ /g,"");return t=t.replace(/['"]+/g,""),t=t.split(",")}function i(e){var t=e;return t=t.replace(/['"]+/g,""),t=t.split("\n")}function o(e,t,s){for(var n,i=0;i<e.length;i++){var o=a(t[i]);n=new f(e[i],o,s),n.bar()}}function r(e,t,a,r){if(a.dfp_publisher_id){var l,u,c;return m[e]?m[e]:("topic-list-top"===t&&a.dfp_topic_list_top_code&&a.dfp_topic_list_top_ad_sizes?r?(u=parseInt(s(a.dfp_mobile_topic_list_top_ad_sizes)),c=parseInt(n(a.dfp_mobile_topic_list_top_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_mobile_topic_list_top_code,[u,c],e).addService(window.googletag.pubads()),o(i(Discourse.SiteSettings.dfp_target_topic_list_top_key_code),i(a.dfp_target_topic_list_top_value_code),l)):(u=parseInt(s(a.dfp_topic_list_top_ad_sizes)),c=parseInt(n(a.dfp_topic_list_top_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_topic_list_top_code,[u,c],e).addService(window.googletag.pubads()),o(i(a.dfp_target_topic_list_top_key_code),i(a.dfp_target_topic_list_top_value_code),l)):"topic-above-post-stream"===t&&a.dfp_topic_above_post_stream_code&&a.dfp_topic_above_post_stream_ad_sizes?r?(u=parseInt(s(a.dfp_mobile_topic_above_post_stream_ad_sizes)),c=parseInt(n(a.dfp_mobile_topic_above_post_stream_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_mobile_topic_above_post_stream_code,[u,c],e).addService(window.googletag.pubads()),o(i(a.dfp_target_topic_above_post_stream_key_code),i(a.dfp_target_topic_above_post_stream_value_code),l)):(u=parseInt(s(a.dfp_topic_above_post_stream_ad_sizes)),c=parseInt(n(a.dfp_topic_above_post_stream_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_topic_above_post_stream_code,[u,c],e).addService(window.googletag.pubads()),o(i(a.dfp_target_topic_above_post_stream_key_code),i(a.dfp_target_topic_above_post_stream_value_code),l)):"topic-above-suggested"===t&&a.dfp_topic_above_suggested_code&&a.dfp_topic_above_suggested_ad_sizes?r?(u=parseInt(s(a.dfp_mobile_topic_above_suggested_ad_sizes)),c=parseInt(n(a.dfp_mobile_topic_above_suggested_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_mobile_topic_above_suggested_code,[u,c],e).addService(window.googletag.pubads()),o(i(a.dfp_target_topic_above_suggested_key_code),i(a.dfp_target_topic_above_suggested_value_code),l)):(u=parseInt(s(a.dfp_topic_above_suggested_ad_sizes)),c=parseInt(n(a.dfp_topic_above_suggested_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_topic_above_suggested_code,[u,c],e).addService(window.googletag.pubads()),o(i(a.dfp_target_topic_above_suggested_key_code),i(a.dfp_target_topic_above_suggested_value_code),l)):"post-bottom"===t&&a.dfp_post_bottom_code&&a.dfp_post_bottom_ad_sizes&&(r?(u=parseInt(s(a.dfp_mobile_post_bottom_ad_sizes)),c=parseInt(n(a.dfp_mobile_post_bottom_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_mobile_post_bottom_code,[u,c],e).addService(window.googletag.pubads()),o(i(a.dfp_target_post_bottom_key_code),i(a.dfp_target_post_bottom_value_code),l)):(u=parseInt(s(a.dfp_post_bottom_ad_sizes)),c=parseInt(n(a.dfp_post_bottom_ad_sizes)),l=window.googletag.defineSlot("/"+a.dfp_publisher_id+"/"+a.dfp_post_bottom_code,[u,c],e).addService(window.googletag.pubads()),o(i(a.dfp_target_post_bottom_key_code),i(a.dfp_target_post_bottom_value_code),l))),l?(m[e]={ad:l,width:u,height:c},m[e]):void 0)}}function l(e){m[e]&&window.googletag&&window.googletag.cmd.push(function(){window.googletag.destroySlots([m[e].ad]),delete m[e]})}function u(){if(d)return Ember.RSVP.resolve();if(p)return p;var e=("https:"===document.location.protocol?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";return p=(0,t.default)(e,{scriptTag:!0}).then(function(){d=!0,void 0===window.googletag&&console.log("googletag is undefined!"),window.googletag.cmd.push(function(){window.googletag.pubads().enableSingleRequest(),window.googletag.pubads().disableInitialLoad(),window.googletag.enableServices()})})}Object.defineProperty(e,"__esModule",{value:!0});var c=Discourse.User.current(),d=!1,p=null,m={},f=function(e,t,s){this.locationKey=e,this.locationValue=t,this.adslot=s};f.prototype.bar=function(){this.locationKey&&this.adslot.setTargeting(this.locationKey,this.locationValue)},e.default=Ember.Component.extend({width:728,height:90,classNameBindings:["adUnitClass"],classNames:["google-dfp-ad"],loadedGoogletag:!1,refreshOnChange:null,divId:function(){return this.get("postNumber")?"div-gpt-ad-"+this.get("placement")+"-"+this.get("postNumber"):"div-gpt-ad-"+this.get("placement")}.property("placement","postNumber"),adUnitClass:function(){return"dfp-ad-"+this.get("placement")}.property("placement"),adWrapperStyle:function(){return("width: "+this.get("width")+"px; height: "+this.get("height")+"px;").htmlSafe()}.property("width","height"),adTitleStyleMobile:function(){return("width: "+this.get("width")+"px;").htmlSafe()}.property("width"),showAd:function(){return Discourse.SiteSettings.dfp_publisher_id&&this.get("checkTrustLevels")}.property("checkTrustLevels"),checkTrustLevels:function(){return!(c&&c.get("trust_level")>Discourse.SiteSettings.dfp_through_trust_level)}.property("trust_level"),refreshAd:function(){var e=m[this.get("divId")];if(e&&e.ad){var t=this,s=e.ad;this.get("loadedGoogletag")&&this.get("refreshOnChange")&&window.googletag.cmd.push(function(){s.setTargeting("discourse-category",t.get("category")?t.get("category"):"0"),window.googletag.pubads().refresh([s])})}}.observes("refreshOnChange"),_initGoogleDFP:function(){if(this.get("showAd")){var e=this;u(this.siteSettings).then(function(){e.set("loadedGoogletag",!0),window.googletag.cmd.push(function(){var t=r(e.get("divId"),e.get("placement"),e.siteSettings,e.site.mobileView);t&&t.ad&&(t.ad.setTargeting("discourse-category",e.get("category")?e.get("category"):"0"),e.set("width",t.width),e.set("height",t.height),window.googletag.display(e.get("divId")),window.googletag.pubads().refresh([t.ad]))})})}}.on("didInsertElement"),cleanup:function(){l(this.get("divId"))}.on("willDestroyElement")})}),define("discourse/plugins/discourse-adplugin/discourse/components/codefund-ad",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";function s(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function n(){if(b)return Ember.RSVP.resolve();if(v)return v;var e="https://codefund.app/properties/"+y+"/funder.json";return v=new Promise(function(t,s){function n(){this.readyState===this.DONE&&(b=!0,200===this.status?t(this.response):s(new Error("getJSON: `"+e+"` failed with status: ["+this.status+"]")))}var a=new XMLHttpRequest;a.open("GET",e),a.onreadystatechange=n,a.responseType="json",a.setRequestHeader("Accept","application/json"),a.send()})}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o,r,l,u,c,d,p,m,f,h,g,b=!1,v=null,_=Discourse.User.current(),y=Discourse.SiteSettings.codefund_property_id;e.default=Ember.Component.extend((a=(0,t.observes)("listLoading"),i=(0,t.default)("checkTrustLevels"),o=(0,t.default)("placement"),r=(0,t.default)("placement"),l=(0,t.default)("placement"),u=(0,t.default)("placement"),c={classNameBindings:[":codefund-ad","classForSlot","isResponsive:codefund-responsive"],propertyId:y,adRequested:!1,adDetails:{},_triggerAds:function(){var e=this;y&&(this.set("adRequested",!0),n().then(function(t){b=!1,v=null,e.set("adDetails",t),e.set("adRequested",!1)}).catch(function(e){return console.log(e)}))},didInsertElement:function(){this._super(),this.get("showAd")&&(this.get("listLoading")||Ember.run.scheduleOnce("afterRender",this,this._triggerAds))},waitForLoad:function(){this.get("adRequested")||this.get("listLoading")||Ember.run.scheduleOnce("afterRender",this,this._triggerAds)},checkTrustLevels:function(){return!(_&&_.get("trust_level")>Discourse.SiteSettings.codefund_through_trust_level)}.property("trust_level"),showAd:function(e){return Discourse.SiteSettings.codefund_property_id&&e},displayPostBottom:function(e){return"post-bottom"===e},displayTopicAbovePostStream:function(){return"topic-above-post-stream"===this.get("placement")},displayTopicAboveSuggested:function(){return"topic-above-suggested"===this.get("placement")},displayTopicListTop:function(){return"topic-list-top"===this.get("placement")}},s(c,"waitForLoad",[a],(d=Object.getOwnPropertyDescriptor(c,"waitForLoad"),d=d?d.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return d}}),c),s(c,"showAd",[i],(p=Object.getOwnPropertyDescriptor(c,"showAd"),p=p?p.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return p}}),c),s(c,"displayPostBottom",[o],(m=Object.getOwnPropertyDescriptor(c,"displayPostBottom"),m=m?m.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return m}}),c),s(c,"displayTopicAbovePostStream",[r],(f=Object.getOwnPropertyDescriptor(c,"displayTopicAbovePostStream"),f=f?f.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return f}}),c),s(c,"displayTopicAboveSuggested",[l],(h=Object.getOwnPropertyDescriptor(c,"displayTopicAboveSuggested"),h=h?h.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return h}}),c),s(c,"displayTopicListTop",[u],(g=Object.getOwnPropertyDescriptor(c,"displayTopicListTop"),g=g?g.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return g}}),c),c))}),define("discourse/plugins/discourse-adplugin/discourse/components/amazon-product-links",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Discourse.User.current(),s={"topic-list-top":{},"topic-above-post-stream":{},"topic-above-suggested":{},"post-bottom":{}};!Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_topic_list_top_src_code&&(s["topic-list-top"].user_input=Discourse.SiteSettings.amazon_topic_list_top_src_code,s["topic-list-top"].amazon_width=parseInt(Discourse.SiteSettings.amazon_topic_list_top_ad_width_code),s["topic-list-top"].amazon_height=parseInt(Discourse.SiteSettings.amazon_topic_list_top_ad_height_code)),Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_mobile_topic_list_top_src_code&&(s["topic-list-top"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_topic_list_top_src_code,s["topic-list-top"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_topic_list_top_ad_width_code),s["topic-list-top"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_topic_list_top_ad_height_code)),!Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_topic_above_post_stream_src_code&&(s["topic-above-post-stream"].user_input=Discourse.SiteSettings.amazon_topic_above_post_stream_src_code,s["topic-above-post-stream"].amazon_width=parseInt(Discourse.SiteSettings.amazon_topic_above_post_stream_ad_width_code),s["topic-above-post-stream"].amazon_height=parseInt(Discourse.SiteSettings.amazon_topic_above_post_stream_ad_height_code)),Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_src_code&&(s["topic-above-post-stream"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_src_code,s["topic-above-post-stream"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_ad_width_code),s["topic-above-post-stream"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_post_stream_ad_height_code)),!Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_topic_above_suggested_src_code&&(s["topic-above-suggested"].user_input=Discourse.SiteSettings.amazon_topic_above_suggested_src_code,s["topic-above-suggested"].amazon_width=parseInt(Discourse.SiteSettings.amazon_topic_above_suggested_ad_width_code),s["topic-above-suggested"].amazon_height=parseInt(Discourse.SiteSettings.amazon_topic_above_suggested_ad_height_code)),Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_mobile_topic_above_suggested_src_code&&(s["topic-above-suggested"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_topic_above_suggested_src_code,s["topic-above-suggested"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_suggested_ad_width_code),s["topic-above-suggested"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_topic_above_suggested_ad_height_code)),!Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_post_bottom_src_code&&(s["post-bottom"].user_input=Discourse.SiteSettings.amazon_post_bottom_src_code,s["post-bottom"].amazon_width=parseInt(Discourse.SiteSettings.amazon_post_bottom_ad_width_code),s["post-bottom"].amazon_height=parseInt(Discourse.SiteSettings.amazon_post_bottom_ad_height_code)),Discourse.Mobile.mobileView&&Discourse.SiteSettings.amazon_mobile_post_bottom_src_code&&(s["post-bottom"].user_input_mobile=Discourse.SiteSettings.amazon_mobile_post_bottom_src_code,s["post-bottom"].mobile_amazon_width=parseInt(Discourse.SiteSettings.amazon_mobile_post_bottom_ad_width_code),s["post-bottom"].mobile_amazon_height=parseInt(Discourse.SiteSettings.amazon_mobile_post_bottom_ad_height_code)),e.default=Ember.Component.extend({classNames:["amazon-product-links"],init:function(){var e=this.get("placement");this.set("user_input",s[e].user_input),this.set("amazon_width",s[e].amazon_width),this.set("amazon_height",s[e].amazon_height),this.set("user_input_mobile",s[e].user_input_mobile),this.set("mobile_amazon_height",s[e].mobile_amazon_height),this.set("mobile_amazon_width",s[e].mobile_amazon_width),this._super()},adWrapperStyle:function(){return("width: "+this.get("amazon_width")+"px; height: "+this.get("amazon_height")+"px;").htmlSafe()}.property("amazon_width","amazon_height"),adWrapperStyleMobile:function(){return("width: "+this.get("mobile_amazon_width")+"px; height: "+this.get("mobile_amazon_height")+"px;").htmlSafe()}.property("mobile_amazon_width","mobile_amazon_height"),adTitleStyleMobile:function(){return("width: "+this.get("mobile_amazon_width")+"px;").htmlSafe()}.property("mobile_amazon_width"),userInput:function(){return(""+this.get("user_input")).htmlSafe()}.property("user_input"),userInputMobile:function(){return(""+this.get("user_input_mobile")).htmlSafe()}.property("user_input_mobile"),checkTrustLevels:function(){return!(t&&t.get("trust_level")>Discourse.SiteSettings.amazon_through_trust_level)}.property("trust_level")})}),define("discourse/plugins/discourse-adplugin/discourse/components/google-adsense",["exports","discourse/lib/load-script"],function(e,t){"use strict";function s(e){return"responsive"===e?"auto":parseInt(e.substring(0,3).trim())+"px"}function n(e){return"responsive"===e?"auto":parseInt(e.substring(4,7).trim())+"px"}function a(){if(i)return Ember.RSVP.resolve();if(o)return o;var e=("https:"===document.location.protocol?"https:":"http:")+"//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";return o=(0,t.default)(e,{scriptTag:!0}).then(function(){i=!0})}Object.defineProperty(e,"__esModule",{value:!0});var i=!1,o=null,r=Discourse.User.current(),l=Discourse.SiteSettings.adsense_publisher_code,u=Discourse.Site.currentProp("mobileView"),c={"topic-list-top":{},"topic-above-post-stream":{},"topic-above-suggested":{},"post-bottom":{}};Discourse.SiteSettings.adsense_publisher_code&&(!u&&Discourse.SiteSettings.adsense_topic_list_top_code&&(c["topic-list-top"].ad_code=Discourse.SiteSettings.adsense_topic_list_top_code,c["topic-list-top"].ad_width=s(Discourse.SiteSettings.adsense_topic_list_top_ad_sizes),c["topic-list-top"].ad_height=n(Discourse.SiteSettings.adsense_topic_list_top_ad_sizes)),u&&Discourse.SiteSettings.adsense_mobile_topic_list_top_code&&(c["topic-list-top"].ad_code=Discourse.SiteSettings.adsense_mobile_topic_list_top_code,c["topic-list-top"].ad_width=s(Discourse.SiteSettings.adsense_mobile_topic_list_top_ad_size),c["topic-list-top"].ad_height=n(Discourse.SiteSettings.adsense_mobile_topic_list_top_ad_size)),!u&&Discourse.SiteSettings.adsense_topic_above_post_stream_code&&(c["topic-above-post-stream"].ad_code=Discourse.SiteSettings.adsense_topic_above_post_stream_code,c["topic-above-post-stream"].ad_width=s(Discourse.SiteSettings.adsense_topic_above_post_stream_ad_sizes),c["topic-above-post-stream"].ad_height=n(Discourse.SiteSettings.adsense_topic_above_post_stream_ad_sizes)),u&&Discourse.SiteSettings.adsense_mobile_topic_above_post_stream_code&&(c["topic-above-post-stream"].ad_code=Discourse.SiteSettings.adsense_mobile_topic_above_post_stream_code,c["topic-above-post-stream"].ad_width=s(Discourse.SiteSettings.adsense_mobile_topic_above_post_stream_ad_size),c["topic-above-post-stream"].ad_height=n(Discourse.SiteSettings.adsense_mobile_topic_above_post_stream_ad_size)),!u&&Discourse.SiteSettings.adsense_topic_above_suggested_code&&(c["topic-above-suggested"].ad_code=Discourse.SiteSettings.adsense_topic_above_suggested_code,c["topic-above-suggested"].ad_width=s(Discourse.SiteSettings.adsense_topic_above_suggested_ad_sizes),c["topic-above-suggested"].ad_height=n(Discourse.SiteSettings.adsense_topic_above_suggested_ad_sizes)),u&&Discourse.SiteSettings.adsense_mobile_topic_above_suggested_code&&(c["topic-above-suggested"].ad_code=Discourse.SiteSettings.adsense_mobile_topic_above_suggested_code,c["topic-above-suggested"].ad_width=s(Discourse.SiteSettings.adsense_mobile_topic_above_suggested_ad_size),c["topic-above-suggested"].ad_height=n(Discourse.SiteSettings.adsense_mobile_topic_above_suggested_ad_size)),!u&&Discourse.SiteSettings.adsense_post_bottom_code&&(c["post-bottom"].ad_code=Discourse.SiteSettings.adsense_post_bottom_code,c["post-bottom"].ad_width=s(Discourse.SiteSettings.adsense_post_bottom_ad_sizes),c["post-bottom"].ad_height=n(Discourse.SiteSettings.adsense_post_bottom_ad_sizes)),u&&Discourse.SiteSettings.adsense_mobile_post_bottom_code&&(c["post-bottom"].ad_code=Discourse.SiteSettings.adsense_mobile_post_bottom_code,c["post-bottom"].ad_width=s(Discourse.SiteSettings.adsense_mobile_post_bottom_ad_size),c["post-bottom"].ad_height=n(Discourse.SiteSettings.adsense_mobile_post_bottom_ad_size))),e.default=Ember.Component.extend({classNameBindings:[":google-adsense","classForSlot","isResponsive:adsense-responsive"],loadedGoogletag:!1,publisher_id:l,ad_width:null,ad_height:null,adRequested:!1,init:function(){this.set("ad_width",c[this.placement].ad_width),this.set("ad_height",c[this.placement].ad_height),this.set("ad_code",c[this.placement].ad_code),this._super()},_triggerAds:function(){this.set("adRequested",!0),a().then(function(){var e=window.adsbygoogle||[];try{e.push({})}catch(e){}})},didInsertElement:function(){this._super(),this.get("showAd")&&(this.get("listLoading")||Ember.run.scheduleOnce("afterRender",this,this._triggerAds))},waitForLoad:function(){this.get("adRequested")||this.get("listLoading")||Ember.run.scheduleOnce("afterRender",this,this._triggerAds)}.observes("listLoading"),isResponsive:function(){return"auto"===this.get("ad_width")}.property("ad_width"),classForSlot:function(){return("adsense-"+this.get("placement")).htmlSafe()}.property("placement"),autoAdFormat:function(){return!!this.get("isResponsive")&&"auto".htmlSafe()}.property("isResponsive"),adWrapperStyle:function(){return(this.get("isResponsive")?"":"width: "+this.get("ad_width")+"; height: "+this.get("ad_height")+";").htmlSafe()}.property("ad_width","ad_height"),adInsStyle:function(){return("display: "+(this.get("isResponsive")?"block":"inline-block")+"; "+this.get("adWrapperStyle")).htmlSafe()}.property("adWrapperStyle","isResponsive"),checkTrustLevels:function(){return!(r&&r.get("trust_level")>Discourse.SiteSettings.adsense_through_trust_level)}.property("trust_level"),showAd:function(){return Discourse.SiteSettings.adsense_publisher_code&&this.get("checkTrustLevels")}.property("checkTrustLevels")})}),Ember.TEMPLATES["javascripts/components/adplugin-container"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["site","mobileView"]]],null,{"statements":[[4,"if",[[23,["model","postSpecificCountAdsense"]]],null,{"statements":[[4,"if",[[23,["siteSettings","adsense_mobile_post_bottom_code"]]],null,{"statements":[[0,"      "],[1,[27,"google-adsense",null,[["placement","postNumber"],["post-bottom",[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["model","postSpecificCountDFP"]]],null,{"statements":[[4,"if",[[23,["siteSettings","dfp_mobile_post_bottom_code"]]],null,{"statements":[[0,"      "],[1,[27,"google-dfp-ad",null,[["placement","category","postNumber"],["post-bottom",[23,["model","topic","category","slug"]],[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["model","postSpecificCountAmazon"]]],null,{"statements":[[4,"if",[[23,["siteSettings","amazon_mobile_post_bottom_src_code"]]],null,{"statements":[[0,"      "],[1,[27,"amazon-product-links",null,[["placement","postNumber"],["post-bottom",[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["model","postSpecificCountCodeFund"]]],null,{"statements":[[4,"if",[[23,["siteSettings","codefund_below_post_enabled"]]],null,{"statements":[[0,"      "],[1,[27,"codefund-ad",null,[["placement","postNumber"],["post-bottom",[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["model","postSpecificCountAdsense"]]],null,{"statements":[[4,"if",[[23,["siteSettings","adsense_post_bottom_code"]]],null,{"statements":[[0,"      "],[1,[27,"google-adsense",null,[["placement","postNumber"],["post-bottom",[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["model","postSpecificCountDFP"]]],null,{"statements":[[4,"if",[[23,["siteSettings","dfp_post_bottom_code"]]],null,{"statements":[[0,"      "],[1,[27,"google-dfp-ad",null,[["placement","category","postNumber"],["post-bottom",[23,["model","topic","category","slug"]],[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["model","postSpecificCountAmazon"]]],null,{"statements":[[4,"if",[[23,["siteSettings","amazon_post_bottom_src_code"]]],null,{"statements":[[0,"      "],[1,[27,"amazon-product-links",null,[["placement","postNumber"],["post-bottom",[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[4,"if",[[23,["model","postSpecificCountCodeFund"]]],null,{"statements":[[4,"if",[[23,["siteSettings","codefund_below_post_enabled"]]],null,{"statements":[[0,"      "],[1,[27,"codefund-ad",null,[["placement","postNumber"],["post-bottom",[23,["model","post_number"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/components/adplugin-container"}}),Ember.TEMPLATES["javascripts/components/codefund-ad"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["showAd"]]],null,{"statements":[[4,"if",[[23,["site","mobileView"]]],null,{"statements":[[4,"if",[[23,["displayPostBottom"]]],null,{"statements":[[0,"      "],[15,"components/codefund/post-bottom",[]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["displayTopicAbovePostStream"]]],null,{"statements":[[0,"      "],[15,"components/codefund/topic-above-post-stream",[]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["displayTopicAboveSuggested"]]],null,{"statements":[[0,"      "],[15,"components/codefund/topic-above-suggested",[]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["displayTopicListTop"]]],null,{"statements":[[0,"      "],[15,"components/codefund/topic-list-top",[]],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["displayPostBottom"]]],null,{"statements":[[0,"      "],[15,"components/codefund/post-bottom",[]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["displayTopicAbovePostStream"]]],null,{"statements":[[0,"      "],[15,"components/codefund/topic-above-post-stream",[]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["displayTopicAboveSuggested"]]],null,{"statements":[[0,"      "],[15,"components/codefund/topic-above-suggested",[]],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["displayTopicListTop"]]],null,{"statements":[[0,"      "],[15,"components/codefund/topic-list-top",[]],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null]],"hasEval":true}',meta:{moduleName:"javascripts/components/codefund-ad"}}),Ember.TEMPLATES["javascripts/components/google-adsense"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["showAd"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","google-adsense-label"],[9],[7,"h2"],[9],[1,[27,"i18n",["adplugin.advertisement_label"],null],false],[10],[10],[0,"\\n  "],[7,"div"],[11,"class","google-adsense-content"],[12,"style",[21,"adWrapperStyle"]],[9],[0,"\\n    "],[7,"ins"],[11,"class","adsbygoogle"],[12,"style",[21,"adInsStyle"]],[12,"data-ad-client",[28,["ca-pub-",[21,"publisher_id"]]]],[12,"data-ad-slot",[21,"ad_code"]],[12,"data-ad-format",[21,"autoAdFormat"]],[9],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/google-adsense"}}),Ember.TEMPLATES["javascripts/components/amazon-product-links"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["checkTrustLevels"]]],null,{"statements":[[4,"if",[[23,["site","mobileView"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","amazon-product-links-label"],[12,"style",[21,"adTitleStyleMobile"]],[9],[7,"h2"],[9],[1,[27,"i18n",["adplugin.advertisement_label"],null],false],[10],[10],[0,"\\n\\t\\t"],[7,"iframe"],[12,"style",[21,"adWrapperStyleMobile"]],[11,"marginwidth","0"],[11,"marginheight","0"],[11,"scrolling","no"],[11,"frameborder","0"],[12,"src",[21,"userInputMobile"]],[9],[0,"\\n\\t\\t"],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","amazon-product-links-label"],[9],[7,"h2"],[9],[1,[27,"i18n",["adplugin.advertisement_label"],null],false],[10],[10],[0,"\\n\\t\\t"],[7,"div"],[11,"class","container"],[11,"align","center"],[9],[0,"\\n\\t\\t\\t"],[7,"iframe"],[12,"style",[21,"adWrapperStyle"]],[11,"marginwidth","0"],[11,"marginheight","0"],[11,"scrolling","no"],[11,"frameborder","0"],[12,"src",[21,"userInput"]],[9],[0,"\\n\\t\\t\\t"],[10],[0,"\\n\\t\\t"],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/amazon-product-links"}}),Ember.TEMPLATES["javascripts/components/google-dfp-ad"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["showAd"]]],null,{"statements":[[4,"if",[[23,["site","mobileView"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","google-dfp-ad-label"],[12,"style",[21,"adTitleStyleMobile"]],[9],[7,"h2"],[9],[1,[27,"i18n",["adplugin.advertisement_label"],null],false],[10],[10],[0,"\\n    "],[7,"div"],[12,"id",[21,"divId"]],[12,"style",[21,"adWrapperStyle"]],[11,"class","dfp-ad-unit"],[11,"align","center"],[9],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[7,"div"],[11,"class","google-dfp-ad-label"],[9],[7,"h2"],[9],[1,[27,"i18n",["adplugin.advertisement_label"],null],false],[10],[10],[0,"\\n    "],[7,"div"],[12,"id",[21,"divId"]],[12,"style",[21,"adWrapperStyle"]],[11,"class","dfp-ad-unit"],[11,"align","center"],[9],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/google-dfp-ad"}}),Ember.TEMPLATES["javascripts/components/codefund/topic-above-post-stream"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"span"],[11,"class","codefund-wrapper codefund-topic-above-post-stream"],[9],[0,"\\n  "],[7,"a"],[12,"href",[28,[[23,["adDetails","campaignUrl"]]]]],[11,"class","codefund-text"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n"],[4,"if",[[23,["siteSettings","codefund_display_advertiser_labels"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","codefund-label"],[9],[1,[23,["siteSettings","codefund_advertiser_label"]],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"strong"],[9],[1,[23,["adDetails","headline"]],false],[10],[0," "],[1,[23,["adDetails","body"]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"a"],[12,"href",[23,["adDetails","codefundUrl"]]],[11,"class","codefund-powered-by"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n    ads via codefund.io\\n  "],[10],[0,"\\n  "],[7,"img"],[12,"src",[28,[[23,["adDetails","impressionUrl"]]]]],[11,"class","codefund-pixel"],[9],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/codefund/topic-above-post-stream"}}),Ember.TEMPLATES["javascripts/components/codefund/post-bottom"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"span"],[11,"class","codefund-wrapper codefund-post-bottom"],[9],[0,"\\n  "],[7,"a"],[12,"href",[28,[[23,["adDetails","campaignUrl"]]]]],[11,"class","codefund-text"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n"],[4,"if",[[23,["siteSettings","codefund_display_advertiser_labels"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","codefund-label"],[9],[1,[23,["siteSettings","codefund_advertiser_short_label"]],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"strong"],[9],[1,[23,["adDetails","headline"]],false],[10],[0," "],[1,[23,["adDetails","body"]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"img"],[12,"src",[28,[[23,["adDetails","impressionUrl"]]]]],[11,"class","codefund-pixel"],[9],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/codefund/post-bottom"}}),Ember.TEMPLATES["javascripts/components/codefund/topic-list-top"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"span"],[11,"class","codefund-wrapper codefund-topic-list-top"],[9],[0,"\\n  "],[7,"a"],[12,"href",[28,[[23,["adDetails","campaignUrl"]]]]],[11,"class","codefund-text"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n"],[4,"if",[[23,["siteSettings","codefund_display_advertiser_labels"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","codefund-label"],[9],[1,[23,["siteSettings","codefund_advertiser_label"]],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"strong"],[9],[1,[23,["adDetails","headline"]],false],[10],[0," "],[1,[23,["adDetails","body"]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"a"],[12,"href",[23,["adDetails","codefundUrl"]]],[11,"class","codefund-powered-by"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n    ads via codefund.io\\n  "],[10],[0,"\\n  "],[7,"img"],[12,"src",[28,[[23,["adDetails","impressionUrl"]]]]],[11,"class","codefund-pixel"],[9],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/codefund/topic-list-top"}}),Ember.TEMPLATES["javascripts/components/codefund/topic-above-suggested"]=Ember.HTMLBars.template({id:null,
block:'{"symbols":[],"statements":[[7,"span"],[11,"class","codefund-wrapper codefund-topic-above-suggested"],[9],[0,"\\n  "],[7,"a"],[12,"href",[28,[[23,["adDetails","campaignUrl"]]]]],[11,"class","codefund-text"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n"],[4,"if",[[23,["siteSettings","codefund_display_advertiser_labels"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","codefund-label"],[9],[1,[23,["siteSettings","codefund_advertiser_label"]],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"strong"],[9],[1,[23,["adDetails","headline"]],false],[10],[0," "],[1,[23,["adDetails","body"]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"a"],[12,"href",[23,["adDetails","codefundUrl"]]],[11,"class","codefund-powered-by"],[11,"target","_blank"],[11,"rel","noopener"],[9],[0,"\\n    ads via codefund.io\\n  "],[10],[0,"\\n  "],[7,"img"],[12,"src",[28,[[23,["adDetails","impressionUrl"]]]]],[11,"class","codefund-pixel"],[9],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/codefund/topic-above-suggested"}}),Ember.TEMPLATES["javascripts/connectors/post-bottom/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"adplugin-container",null,[["model"],[[22,0,[]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/post-bottom/discourse-adplugin"}}),Ember.TEMPLATES["javascripts/connectors/topic-above-post-stream/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["site","mobileView"]]],null,{"statements":[[4,"if",[[23,["siteSettings","adsense_mobile_topic_above_post_stream_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-adsense",null,[["placement"],["topic-above-post-stream"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","dfp_mobile_topic_above_post_stream_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-dfp-ad",null,[["placement","refreshOnChange","category"],["topic-above-post-stream",[23,["model","id"]],[23,["model","category","slug"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","amazon_mobile_topic_above_post_stream_src_code"]]],null,{"statements":[[0,"    "],[1,[27,"amazon-product-links",null,[["placement"],["topic-above-post-stream"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","codefund_above_post_stream_enabled"]]],null,{"statements":[[0,"    "],[1,[27,"codefund-ad",null,[["placement"],["topic-above-post-stream"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["siteSettings","adsense_topic_above_post_stream_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-adsense",null,[["placement"],["topic-above-post-stream"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","dfp_topic_above_post_stream_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-dfp-ad",null,[["placement","refreshOnChange","category"],["topic-above-post-stream",[23,["model","id"]],[23,["model","category","slug"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","amazon_topic_above_post_stream_src_code"]]],null,{"statements":[[0,"    "],[1,[27,"amazon-product-links",null,[["placement"],["topic-above-post-stream"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","codefund_above_post_stream_enabled"]]],null,{"statements":[[0,"    "],[1,[27,"codefund-ad",null,[["placement"],["topic-above-post-stream"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/topic-above-post-stream/discourse-adplugin"}}),Ember.TEMPLATES["javascripts/connectors/topic-above-suggested/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["site","mobileView"]]],null,{"statements":[[4,"if",[[23,["siteSettings","adsense_mobile_topic_above_suggested_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-adsense",null,[["placement"],["topic-above-suggested"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","dfp_mobile_topic_above_suggested_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-dfp-ad",null,[["placement","refreshOnChange","category"],["topic-above-suggested",[23,["model","id"]],[23,["model","category","slug"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","amazon_mobile_topic_above_suggested_src_code"]]],null,{"statements":[[0,"    "],[1,[27,"amazon-product-links",null,[["placement"],["topic-above-suggested"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","codefund_above_suggested_enabled"]]],null,{"statements":[[0,"    "],[1,[27,"codefund-ad",null,[["placement"],["topic-above-suggested"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["siteSettings","adsense_topic_above_suggested_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-adsense",null,[["placement"],["topic-above-suggested"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","dfp_topic_above_suggested_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-dfp-ad",null,[["placement","refreshOnChange","category"],["topic-above-suggested",[23,["model","id"]],[23,["model","category","slug"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","amazon_topic_above_suggested_src_code"]]],null,{"statements":[[0,"    "],[1,[27,"amazon-product-links",null,[["placement"],["topic-above-suggested"]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","codefund_above_suggested_enabled"]]],null,{"statements":[[0,"    "],[1,[27,"codefund-ad",null,[["placement"],["topic-above-suggested"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/topic-above-suggested/discourse-adplugin"}}),Ember.TEMPLATES["javascripts/connectors/discovery-list-container-top/discourse-adplugin"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["site","mobileView"]]],null,{"statements":[[4,"if",[[23,["siteSettings","adsense_mobile_topic_list_top_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-adsense",null,[["placement","listLoading"],["topic-list-top",[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","dfp_mobile_topic_list_top_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-dfp-ad",null,[["placement","refreshOnChange","category","listLoading"],["topic-list-top",[23,["listLoading"]],[23,["category","slug"]],[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","amazon_mobile_topic_list_top_src_code"]]],null,{"statements":[[0,"    "],[1,[27,"amazon-product-links",null,[["placement","listLoading"],["topic-list-top",[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","codefund_top_of_topic_list_enabled"]]],null,{"statements":[[0,"    "],[1,[27,"codefund-ad",null,[["placement","listLoading","refreshOnChange"],["topic-list-top",[23,["listLoading"]],[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["siteSettings","adsense_topic_list_top_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-adsense",null,[["placement","listLoading"],["topic-list-top",[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","dfp_topic_list_top_code"]]],null,{"statements":[[0,"    "],[1,[27,"google-dfp-ad",null,[["placement","refreshOnChange","category","listLoading"],["topic-list-top",[23,["listLoading"]],[23,["category","slug"]],[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","amazon_topic_list_top_src_code"]]],null,{"statements":[[0,"    "],[1,[27,"amazon-product-links",null,[["placement","listLoading"],["topic-list-top",[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["siteSettings","codefund_top_of_topic_list_enabled"]]],null,{"statements":[[0,"    "],[1,[27,"codefund-ad",null,[["placement","listLoading","refreshOnChange"],["topic-list-top",[23,["listLoading"]],[23,["listLoading"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/discovery-list-container-top/discourse-adplugin"}}),define("discourse/plugins/discourse-adplugin/initializers/initialize-ad-plugin",["exports","discourse/models/post","discourse/lib/plugin-api"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"initialize-ad-plugin",initialize:function(e){var n=e.lookup("site-settings:main");t.default.reopen({postSpecificCountDFP:function(){return this.isNthPost(parseInt(n.dfp_nth_post_code))}.property("post_number"),postSpecificCountAdsense:function(){return this.isNthPost(parseInt(n.adsense_nth_post_code))}.property("post_number"),postSpecificCountAmazon:function(){return this.isNthPost(parseInt(n.amazon_nth_post_code))}.property("post_number"),postSpecificCountCodeFund:function(){return this.isNthPost(parseInt(n.codefund_nth_post))}.property("post_number"),isNthPost:function(e){return!!(e&&e>0)&&this.get("post_number")%e==0}}),(0,s.withPluginApi)("0.1",function(e){e.decorateWidget("post:after",function(e){return e.canConnectComponent?e.connect({component:"adplugin-container",context:"model"}):e.connect({templateName:"connectors/post-bottom/discourse-adplugin",context:"model"})})})}}}),define("discourse/plugins/discourse-akismet/admin/models/akismet-queue",["exports","discourse/lib/ajax"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={confirmSpam:function(e){return(0,t.ajax)("/admin/plugins/akismet/confirm_spam",{type:"POST",data:{post_id:e.get("id")}})},allow:function(e){return(0,t.ajax)("/admin/plugins/akismet/allow",{type:"POST",data:{post_id:e.get("id")}})},dismiss:function(e){return(0,t.ajax)("/admin/plugins/akismet/dismiss",{type:"POST",data:{post_id:e.get("id")}})},deleteUser:function(e){return(0,t.ajax)("/admin/plugins/akismet/delete_user",{type:"DELETE",data:{user_id:e.get("user_id"),post_id:e.get("id")}})},findAll:function(){return(0,t.ajax)("/admin/plugins/akismet/index.json").then(function(e){return e.posts=e.posts.map(function(e){return Discourse.Post.create(e)}),e})}}}),define("discourse/plugins/discourse-akismet/discourse/initializers/add-akismet-count",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"add-akismet-count",before:"register-discourse-location",after:"inject-objects",initialize:function(e){var s=e.lookup("current-user:main");if(s&&s.get("staff")){(0,t.withPluginApi)("0.4",function(e){e.addFlagProperty("currentUser.akismet_review_count"),e.decorateWidget("hamburger-menu:admin-links",function(e){return e.attach("link",{route:"adminPlugins.akismet",label:"akismet.title",badgeCount:"akismet_review_count",badgeClass:"flagged-posts"})})});e.lookup("message-bus:main").subscribe("/akismet_counts",function(e){e&&s.set("akismet_review_count",e.akismet_review_count||0)})}}}}),define("discourse/plugins/discourse-akismet/discourse/routes/admin-plugins-akismet",["exports","discourse/plugins/discourse-akismet/admin/models/akismet-queue"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({_enabled:!1,_stats:null,model:function(){var e=this;return t.default.findAll().then(function(t){return e._enabled=t.enabled,e._stats=t.stats,t.posts})},setupController:function(e,t){e.setProperties({model:t,enabled:this._enabled,stats:this._stats})}})}),define("discourse/plugins/discourse-akismet/discourse/akismet-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("akismet")}}}),Ember.TEMPLATES["javascripts/admin/plugins-akismet"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["post"],"statements":[[4,"if",[[23,["enabled"]]],null,{"statements":[[4,"if",[[23,["stats"]]],null,{"statements":[[0,"    "],[7,"table"],[11,"class","tbl spam-stats"],[9],[0,"\\n      "],[7,"tr"],[9],[0,"\\n        "],[7,"th"],[9],[1,[27,"i18n",["akismet.stats.scanned"],null],false],[10],[0,"\\n        "],[7,"th"],[9],[1,[27,"i18n",["akismet.stats.needs_review"],null],false],[10],[0,"\\n        "],[7,"th"],[9],[1,[27,"i18n",["akismet.stats.confirmed_spam"],null],false],[10],[0,"\\n        "],[7,"th"],[9],[1,[27,"i18n",["akismet.stats.confirmed_ham"],null],false],[10],[0,"\\n      "],[10],[0,"\\n      "],[7,"tr"],[9],[0,"\\n        "],[7,"td"],[9],[1,[23,["stats","scanned"]],false],[10],[0,"\\n        "],[7,"td"],[9],[1,[23,["stats","needs_review"]],false],[10],[0,"\\n        "],[7,"td"],[9],[1,[23,["stats","confirmed_spam"]],false],[10],[0,"\\n        "],[7,"td"],[9],[1,[23,["stats","confirmed_ham"]],false],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["currentUser","admin"]]],null,{"statements":[[0,"    "],[1,[27,"d-button",null,[["label","icon","class","action"],["admin.plugins.change_settings","gear","settings-button",[27,"route-action",["showSettings"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[1,[27,"d-button",null,[["action","icon","class","label","disabled"],[[27,"action",[[22,0,[]],"refresh"],null],"refresh","btn-primary","akismet.refresh",[23,["performingAction"]]]]],false],[0,"\\n\\n"],[4,"if",[[23,["model","length"]]],null,{"statements":[[0,"    "],[7,"h3"],[11,"class","review-queue"],[9],[1,[27,"i18n",["akismet.posts_to_review"],null],false],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","row"],[9],[0,"\\n      "],[7,"table"],[11,"class","akismet-queue"],[9],[0,"\\n        "],[7,"tbody"],[9],[0,"\\n"],[4,"each",[[23,["sortedPosts"]]],null,{"statements":[[0,"          "],[7,"tr"],[9],[0,"\\n            "],[7,"td"],[11,"class","cooked"],[9],[0,"\\n\\n              "],[7,"div"],[11,"class","post-info"],[9],[0,"\\n                "],[4,"link-to",["adminUser",[22,1,["user_id"]],[22,1,["username"]]],null,{"statements":[[1,[27,"avatar",[[22,1,[]]],[["imageSize"],["small"]]],false],[0," "],[1,[22,1,["username"]],false]],"parameters":[]},null],[0,"\\n                "],[7,"a"],[12,"href",[22,1,["url"]]],[11,"target","_blank"],[11,"class","post-link"],[9],[0,"#"],[1,[22,1,["id"]],false],[10],[0,"\\n              "],[10],[0,"\\n              "],[1,[22,1,["excerpt"]],true],[0,"\\n              "],[7,"div"],[11,"class","queue-actions"],[9],[0,"\\n                "],[1,[27,"d-button",null,[["action","actionParam","icon","class","label","disabled"],[[27,"action",[[22,0,[]],"confirmSpamPost"],null],[22,1,[]],"check","btn-primary","akismet.confirm_spam",[23,["performingAction"]]]]],false],[0,"\\n\\n                "],[1,[27,"d-button",null,[["action","actionParam","icon","label","disabled"],[[27,"action",[[22,0,[]],"allowPost"],null],[22,1,[]],"thumbs-o-up","akismet.not_spam",[23,["performingAction"]]]]],false],[0,"\\n\\n                "],[1,[27,"d-button",null,[["action","actionParam","icon","label","disabled"],[[27,"action",[[22,0,[]],"dismiss"],null],[22,1,[]],"times","akismet.dismiss",[23,["performingAction"]]]]],false],[0,"\\n\\n\\n"],[4,"if",[[22,1,["user_id"]]],null,{"statements":[[0,"                  "],[1,[27,"d-button",null,[["action","actionParam","icon","class","label","disabled"],[[27,"action",[[22,0,[]],"deleteUser"],null],[22,1,[]],"trash-o","btn-danger","akismet.confirm_delete",[23,["performingAction"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[4,"if",[[23,["currentUser","admin"]]],null,{"statements":[[0,"    "],[1,[27,"d-button",null,[["label","icon","class","action"],["akismet.change_settings","gear","settings-button",[27,"route-action",["showSettings"],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"  "],[1,[27,"i18n",["akismet.not_enabled"],null],true],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/admin/plugins-akismet"}}),Ember.TEMPLATES["javascripts/connectors/site-map-links/akismet-review"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["currentUser","staff"]]],null,{"statements":[[0,"  "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["adminPlugins.akismet"],null,{"statements":[[0,"      "],[1,[27,"i18n",["akismet.title"],null],false],[0,"\\n"],[4,"if",[[23,["currentUser","akismet_review_count"]]],null,{"statements":[[0,"        "],[7,"span"],[11,"class","badge-notification flagged-posts"],[9],[1,[23,["currentUser","akismet_review_count"]],false],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/site-map-links/akismet-review"}}),define("discourse/plugins/discourse-akismet/discourse/controllers/admin-plugins-akismet",["exports","discourse/plugins/discourse-akismet/admin/models/akismet-queue"],function(e,t){"use strict";function s(){bootbox.alert(I18n.t("generic_error"))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({sortedPosts:Ember.computed.sort("model","postSorting"),postSorting:["id:asc"],enabled:!1,performingAction:!1,actions:{refresh:function(){var e=this;this.set("performingAction",!0),t.default.findAll().then(function(t){e.set("stats",t.stats),e.set("model",t.posts)}).catch(s).finally(function(){e.set("performingAction",!1)})},confirmSpamPost:function(e){var n=this;this.set("performingAction",!0),t.default.confirmSpam(e).then(function(){n.get("model").removeObject(e),n.incrementProperty("stats.confirmed_spam"),n.decrementProperty("stats.needs_review")}).catch(s).finally(function(){n.set("performingAction",!1)})},allowPost:function(e){var n=this;this.set("performingAction",!0),t.default.allow(e).then(function(){n.incrementProperty("stats.confirmed_ham"),n.decrementProperty("stats.needs_review"),n.get("model").removeObject(e)}).catch(s).finally(function(){n.set("performingAction",!1)})},deleteUser:function(e){var n=this;bootbox.confirm(I18n.t("akismet.delete_prompt",{username:e.get("username")}),function(a){!0===a&&(n.set("performingAction",!0),t.default.deleteUser(e).then(function(){n.get("model").removeObject(e),n.incrementProperty("stats.confirmed_spam"),n.decrementProperty("stats.needs_review")}).catch(s).finally(function(){n.set("performingAction",!1)}))})},dismiss:function(e){var n=this;this.set("performingAction",!0),t.default.dismiss(e).then(function(){n.get("model").removeObject(e)}).catch(s).finally(function(){n.set("performingAction",!1)})}}})}),define("discourse/plugins/discourse-assign/discourse/components/claim-topic",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"",claiming:!1,unassigning:!1,actions:{unassign:function(){var e=this;return this.set("unassigning",!0),(0,t.ajax)("/assign/unassign",{type:"PUT",data:{topic_id:this.get("topic.id")}}).then(function(){e.set("topic.assigned_to_user",null)}).catch(s.popupAjaxError).finally(function(){e.set("unassigning",!1)})},claim:function(){var e=this;this.set("claiming",!0);var n=this.get("topic");(0,t.ajax)("/assign/claim/"+n.id,{method:"PUT"}).then(function(){e.set("topic.assigned_to_user",e.currentUser)}).catch(function(t){if(t.jqXHR&&t.jqXHR.responseJSON){var n=t.jqXHR.responseJSON;n&&n.extras&&e.set("topic.assigned_to_user",n.extras.assigned_to)}return(0,s.popupAjaxError)(t)}).finally(function(){e.isDestroying||e.isDestroyed||e.set("claiming",!1)})}}})}),define("discourse/plugins/discourse-assign/discourse/components/assigned-to",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["assigned-to-user"]})}),define("discourse/plugins/discourse-assign/discourse/components/flagged-topic-listener",["exports"],function(e){"use strict";function t(e,t){e&&e.id===t.topic_id&&Ember.set(e,"assigned_to_user",t.assigned_to)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({didInsertElement:function(){var e=this;this._super(),this.messageBus.subscribe("/staff/topic-assignment",function(s){var n=e.get("flaggedTopics");n?n.forEach(function(e){return t(e.topic,s)}):t(e.get("topic"),s)})},willDestroyElement:function(){this._super(),this.messageBus.unsubscribe("/staff/topic-assignment")}})}),Ember.TEMPLATES["javascripts/user-activity-assigned"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","assign-controls"],[9],[0,"\\n"],[4,"if",[[23,["model","topic_list","assigned_messages_count"]]],null,{"statements":[[4,"link-to",["userPrivateMessages.assigned",[23,["user","model"]]],[["class"],["btn btn-default assign-messages-assigned"]],{"statements":[[0,"      "],[1,[27,"d-icon",["envelope"],[["class"],["glyph"]]],false],[0,"\\n      "],[1,[27,"i18n",["user.messages.assigned_title"],[["count"],[[23,["model","topic_list","assigned_messages_count"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["canUnassignAll"]]],null,{"statements":[[0,"    "],[1,[27,"d-button",null,[["action","class","icon","label"],[[27,"action",[[22,0,[]],"unassignAll"],null],"btn-default","times","discourse_assign.unassign_all.title"]]],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n\\n"],[1,[21,"outlet"],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/user-activity-assigned"}}),Ember.TEMPLATES["javascripts/components/claim-topic"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["topic","assigned_to_user"]]],null,{"statements":[[4,"assigned-to",null,[["user"],[[23,["topic","assigned_to_user"]]]],{"statements":[[0,"    "],[1,[27,"d-button",null,[["icon","class","action","disabled","title"],["times","btn-small unassign",[27,"action",[[22,0,[]],"unassign"],null],[23,["unassigning"]],"discourse_assign.unassign.help"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},{"statements":[[0,"  "],[1,[27,"d-button",null,[["class","icon","action","disabled","label","title"],["btn-small assign","user-plus",[27,"action",[[22,0,[]],"claim"],null],[23,["claiming"]],"discourse_assign.claim.title","discourse_assign.claim.help"]]],false],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/components/claim-topic"}}),Ember.TEMPLATES["javascripts/components/assigned-to"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["&default"],"statements":[[1,[27,"avatar",[[23,["user"]]],[["imageSize"],["small"]]],false],[0,"\\n"],[7,"span"],[11,"class","assigned-username"],[9],[0,"\\n  "],[1,[23,["user","username"]],false],[0,"\\n"],[10],[0,"\\n"],[14,1],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/assigned-to"}}),Ember.TEMPLATES["javascripts/modal/assign-user"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["user"],"statements":[[4,"d-modal-body",null,[["title","class"],["discourse_assign.assign_modal.title","assign"]],{"statements":[[1,[27,"i18n",["discourse_assign.assign_modal.description"],null],false],[0,"\\n"],[1,[27,"user-selector",null,[["single","allowAny","group","excludeCurrentUser","includeMentionableGroups","hasGroups","usernames","placeholderKey","autocomplete"],[true,false,"staff",false,false,false,[23,["model","username"]],[23,["placeholderKey"]],"off"]]],false],[0,"\\n"],[7,"div"],[11,"class","assign-suggestions"],[9],[0,"\\n"],[4,"each",[[23,["assignSuggestions"]]],null,{"statements":[[0,"    "],[7,"a"],[3,"action",[[22,0,[]],"assignUser",[22,1,[]]]],[9],[0,"\\n    "],[1,[27,"avatar",[[22,1,[]]],[["imageSize"],["small"]]],false],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[1]},null],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n"],[1,[27,"d-button",null,[["label","icon","action","class","disabled"],["discourse_assign.assign_modal.assign",[23,["inviteIcon"]],"assign","btn-primary",[23,["disabled"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/assign-user"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/topic-footer-main-buttons-before-create/assign-button",["exports","discourse/lib/show-modal","discourse/lib/ajax"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return t.currentUser&&t.currentUser.get("staff")&&(!t.get("site.mobileView")||e.topic.get("isPrivateMessage"))},actions:{unassign:function(){return this.set("topic.assigned_to_user",null),(0,s.ajax)("/assign/unassign",{type:"PUT",data:{topic_id:this.get("topic.id")}})},assign:function(){(0,t.default)("assign-user",{model:{topic:this.topic,username:this.topic.get("assigned_to_user.username")}})}}}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/topic-footer-main-buttons-before-create/assign-button"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["topic","assigned_to_user","username"]]],null,{"statements":[[1,[27,"d-button",null,[["class","icon","action","label","title"],["btn-default assign","user-times","unassign","discourse_assign.unassign.title","discourse_assign.unassign.help"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[1,[27,"d-button",null,[["class","icon","action","label","title"],["btn-default assign","user-plus","assign","discourse_assign.assign.title","discourse_assign.assign.help"]]],false],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/topic-footer-main-buttons-before-create/assign-button"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topics-before/add-listener"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"flagged-topic-listener",null,[["flaggedTopics"],[[23,["flaggedTopics"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topics-before/add-listener"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topic-row/add-claim-controls"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"td"],[9],[0,"\\n  "],[1,[27,"claim-topic",null,[["topic"],[[23,["topic"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topic-row/add-claim-controls"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/flagged-post-controls/claim-flagged-post",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e){return e.actableFilter&&!e.topic}}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-post-controls/claim-flagged-post"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"claim-topic",null,[["topic"],[[23,["flaggedPost","topic"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-post-controls/claim-flagged-post"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topic-details-header/assigned-to"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","assign-controls"],[9],[0,"\\n  "],[1,[27,"flagged-topic-listener",null,[["topic"],[[23,["topic"]]]]],false],[0,"\\n  "],[1,[27,"claim-topic",null,[["topic"],[[23,["topic"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topic-details-header/assigned-to"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["currentUser","staff"]]],null,{"statements":[[4,"link-to",["userActivity.assigned"],null,{"statements":[[0,"    "],[1,[27,"d-icon",["user-plus"],null],false],[0," "],[1,[27,"i18n",["discourse_assign.assigned"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/user-activity-bottom/assigned-list"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-topic-header-row/add-assigned-header"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"th"],[11,"class","topic-assigned-to"],[9],[1,[27,"i18n",["discourse_assign.assigned"],null],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-topic-header-row/add-assigned-header"}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"link-to",["userPrivateMessages.assigned",[23,["model"]]],null,{"statements":[[0,"  "],[1,[27,"d-icon",["user-plus"],[["class"],["glyph"]]],false],[0,"\\n  "],[1,[27,"i18n",["discourse_assign.assigned"],null],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/user-messages-nav/assigned-messages"}}),define("discourse/plugins/discourse-assign/discourse-assign/connectors/user-messages-nav/assigned-messages",["exports"],function(e){"use strict";function t(e,t){return t.currentUser&&t.currentUser.get("staff")&&(!t.get("site.mobileView")||e.model.get("isPrivateMessage"))}Object.defineProperty(e,"__esModule",{value:!0}),e.shouldShowAssigned=t,e.default={shouldRender:function(e,s){return t(e,s)}}}),Ember.TEMPLATES["javascripts/discourse-assign/connectors/flagged-post-below-controls/show-not-assigned"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"unless",[[23,["canAct"]]],null,{"statements":[[4,"if",[[23,["actableFilter"]]],null,{"statements":[[4,"if",[[23,["flaggedPost","topic","assigned_to_user"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","cant-act-flagged-post"],[9],[0,"\\n        "],[7,"div"],[11,"class","cant-act-message"],[9],[0,"\\n          "],[1,[27,"i18n",["discourse_assign.cant_act"],null],false],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","assigned-to"],[9],[0,"\\n          "],[1,[27,"assigned-to",null,[["user"],[[23,["flaggedPost","topic","assigned_to_user"]]]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[7,"div"],[11,"class","cant-act-flagged-post"],[9],[0,"\\n        "],[7,"div"],[11,"class","cant-act-message"],[9],[0,"\\n          "],[1,[27,"i18n",["discourse_assign.cant_act_unclaimed"],null],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]}]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-assign/connectors/flagged-post-below-controls/show-not-assigned"}}),define("discourse/plugins/discourse-assign/discourse-assign/initializers/extend-for-assigns",["exports","discourse/lib/plugin-api","ember-addons/ember-computed-decorators","discourse/lib/ajax","discourse/lib/show-modal","discourse-common/lib/icon-library","virtual-dom"],function(e,t,s,n,a,i,o){"use strict";function r(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function l(e){
e.modifySelectKit("topic-footer-mobile-dropdown").modifyContent(function(e,t){if(e.get("currentUser.staff")){var s=e.get("topic.assigned_to_user"),n={id:c,icon:s?"user-times":"user-plus",name:I18n.t("discourse_assign."+(s?"unassign":"assign")+".title")};t.push(n)}return t}).onSelect(function(e,t){if(e.get("currentUser.staff")&&t===c){var s=e.get("topic");s.get("assigned_to_user.username")?(0,n.ajax)("/assign/unassign",{type:"PUT",data:{topic_id:s.get("id")}}).then(function(e){e.success&&"OK"===e.success&&s.set("assigned_to_user",null)}).finally(function(){return e._compute()}):(0,a.default)("assign-user",{model:{topic:s,username:s.get("assigned_to_user.username"),onClose:function(t){s.set("assigned_to_user",t),e._compute()}}})}})}function u(e){var t,n,a,l;e.modifyClass("component:flagged-post",(t=(0,s.default)("flaggedPost.topic.assigned_to_user_id"),n={canAct:function(e){if(this.siteSettings.assign_locks_flags){var t=this.currentUser.id!==e;if(e&&t)return!1;if(this.siteSettings.flags_require_assign&&t)return!1}return this.get("actableFilter")},didInsertElement:function(){var e=this;this._super(),this.messageBus.subscribe("/staff/topic-assignment",function(t){var s=e.get("flaggedPost");t.topic_id===s.get("topic.id")&&(s.set("topic.assigned_to_user_id","assigned"===t.type?t.assigned_to.id:null),s.set("topic.assigned_to_user",t.assigned_to))})},willDestroyElement:function(){this._super(),this.messageBus.unsubscribe("/staff/topic-assignment")}},r(n,"canAct",[t],Object.getOwnPropertyDescriptor(n,"canAct"),n),n),{ignoreMissing:!0}),e.modifyClass("model:topic",(a=(0,s.default)("assigned_to_user"),l={assignedToUserPath:function(e){return this.siteSettings.assigns_user_url_path.replace("{username}",Ember.get(e,"username"))}},r(l,"assignedToUserPath",[a],Object.getOwnPropertyDescriptor(l,"assignedToUserPath"),l),l)),e.addPostSmallActionIcon("assigned","user-plus"),e.addPostSmallActionIcon("unassigned","user-times"),e.addPostTransformCallback(function(e){"assigned"!==e.actionCode&&"unassigned"!==e.actionCode||(e.isSmallAction=!0,e.canEdit=!1)}),e.addDiscoveryQueryParam("assigned",{replace:!0,refreshModel:!0}),e.addTagsHtmlCallback(function(e){var t=e.get("assigned_to_user.username");if(t){return"<a class='assigned-to discourse-tag simple' href='"+e.get("assignedToUserPath")+"'>"+(0,i.iconHTML)("user-plus")+t+"</a>"}}),e.addUserMenuGlyph(function(e){if(e.currentUser&&e.currentUser.get("staff"))return{label:"discourse_assign.assigned",className:"assigned",icon:"user-plus",href:e.currentUser.get("path")+"/activity/assigned"}}),e.createWidget("assigned-to",{html:function(e){var t=e.assignedToUser,s=e.href;return(0,o.h)("p.assigned-to",[(0,i.iconNode)("user-plus"),(0,o.h)("span.assign-text",I18n.t("discourse_assign.assigned_to")),(0,o.h)("a",{attributes:{class:"assigned-to-username",href:s}},t.username)])}}),e.modifyClass("controller:topic",{subscribe:function(){var e=this;this._super(),this.messageBus.subscribe("/staff/topic-assignment",function(t){var s=e.get("model"),n=s.get("id");t.topic_id===n&&(s.set("assigned_to_user_id","assigned"===t.type?t.assigned_to.id:null),s.set("assigned_to_user",t.assigned_to)),e.appEvents.trigger("header:update-topic",s)})},unsubscribe:function(){this._super(),this.get("content.id")&&this.messageBus.unsubscribe("/staff/topic-assignment")}}),e.decorateWidget("post-contents:after-cooked",function(e){if(1===e.attrs.post_number){var t=e.getModel();if(t){var s=t.get("topic.assigned_to_user");if(s)return e.widget.attach("assigned-to",{assignedToUser:s,href:t.get("topic.assignedToUserPath")})}}}),e.replaceIcon("notification.discourse_assign.assign_notification","user-plus")}Object.defineProperty(e,"__esModule",{value:!0});var c="assign";e.default={name:"extend-for-assign",initialize:function(e){e.lookup("site-settings:main").assign_enabled&&((0,t.withPluginApi)("0.8.11",function(e){return u(e)}),(0,t.withPluginApi)("0.8.13",function(e){return l(e)}))}}}),define("discourse/plugins/discourse-assign/discourse-assign/assigns-activity-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user.userActivity",map:function(){this.route("assigned")}}}),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-private-messages-assigned",["exports","discourse/routes/build-private-messages-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("assigned","private-messages-assigned","assigned")}),define("discourse/plugins/discourse-assign/discourse-assign/routes/user-activity-assigned",["exports","discourse/routes/user-topic-list"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({userActionType:16,noContentHelpKey:"discourse_assigns.no_assigns",model:function(){return this.store.findFiltered("topicList",{filter:"latest",params:{assigned:this.modelFor("user").get("username_lower"),exclude_category_ids:[-1]}})},renderTemplate:function(){this.render("user-activity-assigned"),this.render("user-topics-list",{into:"user-activity-assigned"})},setupController:function(e,t){this._super(e,t),e.set("model",t)},actions:{unassignedAll:function(){this.refresh()}}})}),define("discourse/plugins/discourse-assign/discourse-assign/controllers/assign-user",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({assignSuggestions:function(){var e=this;(0,t.ajax)("/assign/suggestions").then(function(t){e.set("assignSuggestions",t)})}.property(),onClose:function(){this.get("model.onClose")&&this.get("model.username")&&this.get("model.onClose")(this.get("model.username"))},actions:{assignUser:function(e){this.set("model.username",e.username),this.send("assign")},assign:function(){var e="/assign/assign";return Ember.isEmpty(this.get("model.username"))&&(e="/assign/unassign",this.set("model.assigned_to_user",null)),this.send("closeModal"),(0,t.ajax)(e,{type:"PUT",data:{username:this.get("model.username"),topic_id:this.get("model.topic.id")}}).then(function(){}).catch(s.popupAjaxError)}}})}),define("discourse/plugins/discourse-assign/discourse-assign/controllers/user-activity-assigned",["exports","discourse/lib/ajax","ember-addons/ember-computed-decorators"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a;e.default=Ember.Controller.extend((n=(0,s.default)("model.topics"),a={user:Ember.inject.controller(),canUnassignAll:function(e){return e&&e.length&&this.currentUser.get("staff")},actions:{unassignAll:function(){var e=this,s=this.get("user.model");bootbox.confirm(I18n.t("discourse_assign.unassign_all.confirm",{username:s.get("username")}),function(n){n&&(0,t.ajax)("/assign/unassign-all",{type:"PUT",data:{user_id:s.get("id")}}).then(function(){return e.send("unassignedAll")})})}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(a,"canUnassignAll",[n],Object.getOwnPropertyDescriptor(a,"canUnassignAll"),a),a))}),define("discourse/plugins/discourse-assign/discourse-assign/assigned-messages-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user.userPrivateMessages",map:function(){this.route("assigned")}}}),define("discourse/plugins/discourse-cakeday/discourse/adapters/birthday",["exports","discourse/plugins/discourse-cakeday/discourse/adapters/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("discourse/plugins/discourse-cakeday/discourse/adapters/cakeday",["exports","discourse/adapters/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({basePath:function(){return"/cakeday/"}})}),define("discourse/plugins/discourse-cakeday/discourse/adapters/anniversary",["exports","discourse/plugins/discourse-cakeday/discourse/adapters/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("discourse/plugins/discourse-cakeday/discourse/components/emoji-images",["exports","ember-addons/ember-computed-decorators","discourse/lib/text"],function(e,t,s){"use strict";function n(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o;e.default=Ember.Component.extend((a=(0,t.default)("list"),i=(0,t.default)("title"),o={classNames:["emoji-images"],emojiHTML:function(e){return e.split("|").map(function(e){return(0,s.emojiUnescape)(":"+e+":",{skipTitle:!0})})},titleText:function(e){return I18n.t(e)}},n(o,"emojiHTML",[a],Object.getOwnPropertyDescriptor(o,"emojiHTML"),o),n(o,"titleText",[i],Object.getOwnPropertyDescriptor(o,"titleText"),o),o))}),define("discourse/plugins/discourse-cakeday/discourse/discourse-cakeday-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.route("cakeday",{path:"/cakeday",resetNamespace:!0},function(){this.route("birthdays",{path:"/birthdays"},function(){this.route("today",{path:"/today"}),this.route("tomorrow",{path:"/tomorrow"}),this.route("upcoming",{path:"/upcoming"}),this.route("all",{path:"/all"})}),this.route("anniversaries",{path:"/anniversaries"},function(){this.route("today",{path:"/today"}),this.route("tomorrow",{path:"/tomorrow"}),this.route("upcoming",{path:"/upcoming"}),this.route("all",{path:"/all"})})})}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-card-post-names/user-card-cakeday",["exports","discourse/plugins/discourse-cakeday/discourse/lib/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,s){s.set("isCakeday",(0,t.cakeday)(e.user.get("created_at"))),s.set("isUserBirthday",(0,t.cakedayBirthday)(e.user.get("date_of_birth"))),s.set("cakedayTitle",(0,t.cakedayTitle)(e.user,this.currentUser)),s.set("cakedayBirthdayTitle",(0,t.cakedayBirthdayTitle)(e.user,this.currentUser))}}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-custom-preferences/user-date-of-birth-input",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,t){t.set("months",moment.months().map(function(e,t){return{name:e,value:t+1}})),t.set("days",_.range(1,32));var s=e.model.get("date_of_birth");t.set("userBirthdayMonth",moment(s,"YYYY-MM-DD").month()+1),t.set("userBirthdayDay",moment(s,"YYYY-MM-DD").date());var n=function(){var s=t.get("userBirthdayMonth"),n=t.get("userBirthdayDay"),a=e.model,i="";""!==s&&""!==n&&(i="1904-"+t.get("userBirthdayMonth")+"-"+t.get("userBirthdayDay")),a.set("date_of_birth",i)};t.addObserver("userBirthdayMonth",n),t.addObserver("userBirthdayDay",n)}}}),define("discourse/plugins/discourse-cakeday/discourse/connectors/user-post-names/user-cakeday",["exports","discourse/plugins/discourse-cakeday/discourse/lib/cakeday"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,s){s.set("isCakeday",(0,t.cakeday)(e.model.get("created_at"))),s.set("isUserBirthday",(0,t.cakedayBirthday)(e.model.get("date_of_birth")))}}}),define("discourse/plugins/discourse-cakeday/discourse/initializers/cakeday",["exports","ember-addons/ember-computed-decorators","discourse/controllers/preferences","discourse/controllers/user-card","discourse/controllers/user","discourse/lib/plugin-api","discourse/plugins/discourse-cakeday/discourse/lib/cakeday","discourse-common/lib/helpers"],function(e,t,s,n,a,i,o,r){"use strict";function l(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function u(e,t){var s=t.enable_emoji,n=t.cakeday_enabled,a=t.cakeday_birthday_enabled;n&&(e.includePostAttributes("user_created_at"),e.includePostAttributes("user_date_of_birth"),e.addPosterIcon(function(n,a){var i=a.user_created_at;if(!Ember.isEmpty(i)&&(0,o.isSameDay)(i,{anniversary:!0})){var r={};s?r.emoji=t.cakeday_emoji:r.icon="birthday-cake";var l=e.getCurrentUser();return l&&a.user_id===l.get("id")?r.title=I18n.t("user.anniversary.user_title"):r.title=I18n.t("user.anniversary.title"),r.emojiTitle=!1,r}})),a&&e.addPosterIcon(function(n,a){var i=a.user_date_of_birth;if(!Ember.isEmpty(i)&&(0,o.isSameDay)(i)){var r={};s?r.emoji=t.cakeday_birthday_emoji:r.icon="birthday-cake";var l=e.getCurrentUser();return l&&a.user_id===l.get("id")?r.title=I18n.t("user.date_of_birth.user_title"):r.title=I18n.t("user.date_of_birth.title"),r.emojiTitle=!1,r}}),(n||a)&&((0,r.registerUnbound)("cakeday-date",function(e,t){var s=moment(e);return t.isBirthday?s.format("MM/DD"):s.format("YYYY/MM/DD")}),e.decorateWidget("hamburger-menu:generalLinks",function(){var e=void 0;return n?e="cakeday.anniversaries.today":a&&(e="cakeday.birthdays.today"),{route:e,label:"cakeday.title",className:"cakeday-link"}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"cakeday",initialize:function(e){var r,c,d,p,m,f,h,g,b,v;if(e.lookup("current-user:main")){var y=e.lookup("site-settings:main");e.lookup("store:main").addPluralization("anniversary","anniversaries"),s.default.reopen((r=(0,t.observes)("userBirthdayMonth","userBirthdayDay"),c=(0,t.default)("model.date_of_birth"),d=(0,t.default)("model.date_of_birth"),p={days:_.range(1,32),months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},_setUserDateOfBirth:function(){var e=this.get("userBirthdayMonth"),t=this.get("userBirthdayDay"),s=this.get("model"),n="";""!==e&&""!==t&&(n="1904-"+this.get("userBirthdayMonth")+"-"+this.get("userBirthdayDay")),s.set("date_of_birth",n)},userBirthdayMonth:function(e){return moment(e,"YYYY-MM-DD").month()+1},userBirthdayDay:function(e){return moment(e,"YYYY-MM-DD").date()}},l(p,"months",[t.default],Object.getOwnPropertyDescriptor(p,"months"),p),l(p,"_setUserDateOfBirth",[r],Object.getOwnPropertyDescriptor(p,"_setUserDateOfBirth"),p),l(p,"userBirthdayMonth",[c],Object.getOwnPropertyDescriptor(p,"userBirthdayMonth"),p),l(p,"userBirthdayDay",[d],Object.getOwnPropertyDescriptor(p,"userBirthdayDay"),p),p)),n.default.reopen((m=(0,t.default)("model.created_at"),f=(0,t.default)("model.date_of_birth"),h={isCakeday:function(e){return(0,o.cakeday)(e)},isUserBirthday:function(e){return(0,o.cakedayBirthday)(e)}},l(h,"isCakeday",[m],Object.getOwnPropertyDescriptor(h,"isCakeday"),h),l(h,"isUserBirthday",[f],Object.getOwnPropertyDescriptor(h,"isUserBirthday"),h),h)),a.default.reopen((g=(0,t.default)("model.created_at"),b=(0,t.default)("model.date_of_birth"),v={isCakeday:function(e){return(0,o.cakeday)(e)},isUserBirthday:function(e){return(0,o.cakedayBirthday)(e)}},l(v,"isCakeday",[g],Object.getOwnPropertyDescriptor(v,"isCakeday"),v),l(v,"isUserBirthday",[b],Object.getOwnPropertyDescriptor(v,"isUserBirthday"),v),v)),(0,i.withPluginApi)("0.1",function(e){return u(e,y)})}}}}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-all",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary").extend({queryParams:{month:{refreshModel:!0}},refreshQueryWithoutTransition:!0})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.siteSettings.cakeday_birthday_enabled||this.transitionTo("unknown",window.location.pathname.replace(/^\//,""))},titleToken:function(){return I18n.t("birthdays.title")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.replaceWith("cakeday.anniversaries.today")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-tomorrow",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","tomorrow")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-upcoming",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","upcoming")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-upcoming",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","upcoming")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-today",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","today")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.siteSettings.cakeday_enabled||this.transitionTo("unknown",window.location.pathname.replace(/^\//,""))},titleToken:function(){return I18n.t("anniversaries.title")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){return Discourse.Route.extend({model:function(s){return s.timezone_offset=(new Date).getTimezoneOffset(),t&&(s.filter=t),this.store.find(e,s)}})}}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(){this.replaceWith("cakeday.birthdays.today")}})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthdays-all",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday").extend({queryParams:{month:{refreshModel:!0}},refreshQueryWithoutTransition:!0})}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-anniversaries-today",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("anniversary","today")}),define("discourse/plugins/discourse-cakeday/discourse/routes/cakeday-birthday-tomorrow",["exports","discourse/plugins/discourse-cakeday/discourse/routes/build-cakeday-route"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("birthday","tomorrow")}),define("discourse/plugins/discourse-cakeday/discourse/lib/cakeday",["exports"],function(e){"use strict";function t(e,t){var s="YYYY",n=moment(),a=moment(e);return!(t&&t.anniversary&&n.format(s)<=a.format(s))&&(s="MMDD",n.format(s)===a.format(s))}function s(e){return!Ember.isEmpty(e)&&t(e,{anniversary:!0})}function n(e){return!Ember.isEmpty(e)&&t(e)}function a(e,t){return o(e,t)?"user.anniversary.user_title":"user.anniversary.title"}function i(e,t){return o(e,t)?"user.date_of_birth.user_title":"user.date_of_birth.title"}function o(e,t){return!!t&&e.get("id")===t.get("id")}Object.defineProperty(e,"__esModule",{value:!0}),e.isSameDay=t,e.cakeday=s,e.cakedayBirthday=n,e.cakedayTitle=a,e.cakedayBirthdayTitle=i}),Ember.TEMPLATES["javascripts/components/user-info-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["user","&default"],"statements":[[7,"ul"],[11,"class","user-info-list"],[9],[0,"\\n"],[4,"each",[[23,["users"]]],null,{"statements":[[0,"    "],[7,"li"],[11,"class","user-info-item"],[9],[0,"\\n"],[4,"user-info",null,[["user"],[[22,1,[]]]],{"statements":[[0,"        "],[7,"div"],[9],[1,[27,"cakeday-date",[[22,1,["cakeday_date"]]],[["isBirthday"],[[23,["isBirthday"]]]]],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[1]},{"statements":[[0,"    "],[7,"div"],[11,"class","user-info-empty-message"],[9],[7,"h4"],[9],[14,2],[10],[10],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/user-info-list"}}),Ember.TEMPLATES["javascripts/components/emoji-images"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["html"],"statements":[[4,"if",[[23,["siteSettings","enable_emoji"]]],null,{"statements":[[0,"  "],[7,"div"],[12,"title",[21,"titleText"]],[9],[0,"\\n"],[4,"each",[[23,["emojiHTML"]]],null,{"statements":[[0,"      "],[1,[22,1,[]],true],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[1,[27,"fa-icon",["birthday-cake"],[["title"],[[23,["titleText"]]]]],false],[0,"\\n"]],"parameters":[]}]],"hasEval":false}',meta:{moduleName:"javascripts/components/emoji-images"}}),Ember.TEMPLATES["javascripts/cakeday"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","container cakeday"],[9],[0,"\\n  "],[7,"ul"],[11,"class","nav-pills"],[9],[0,"\\n"],[4,"if",[[23,["cakedayEnabled"]]],null,{"statements":[[0,"      "],[7,"li"],[11,"class","nav-item-anniversaries"],[9],[0,"\\n"],[4,"link-to",["cakeday.anniversaries"],null,{"statements":[[0,"          "],[1,[27,"i18n",["anniversaries.title"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["cakedayBirthdayEnabled"]]],null,{"statements":[[0,"      "],[7,"li"],[11,"class","nav-item-birthdays"],[9],[0,"\\n"],[4,"link-to",["cakeday.birthdays"],null,{"statements":[[0,"          "],[1,[27,"i18n",["birthdays.title"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n\\n  "],[1,[21,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday"}}),Ember.TEMPLATES["javascripts/connectors/user-card-post-names/user-card-cakeday"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[4,"if",[[23,["isUserBirthday"]]],null,{"statements":[[0,"    "],[1,[27,"emoji-images",null,[["list","title"],[[23,["siteSettings","cakeday_birthday_emoji"]],[23,["cakedayBirthdayTitle"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["siteSettings","cakeday_enabled"]]],null,{"statements":[[4,"if",[[23,["isCakeday"]]],null,{"statements":[[0,"    "],[1,[27,"emoji-images",null,[["list","title"],[[23,["siteSettings","cakeday_emoji"]],[23,["cakedayTitle"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-card-post-names/user-card-cakeday"}}),Ember.TEMPLATES["javascripts/connectors/user-custom-preferences/user-date-of-birth-input"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","control-group"],[9],[0,"\\n    "],[7,"label"],[11,"class","control-label"],[9],[1,[27,"i18n",["user.date_of_birth.label"],null],false],[10],[0,"\\n    "],[7,"div"],[11,"class","controls"],[9],[0,"\\n      "],[1,[27,"combo-box",null,[["content","value","valueAttribute","none"],[[23,["months"]],[23,["userBirthdayMonth"]],"value","cakeday.none"]]],false],[0,"\\n\\n      "],[1,[27,"combo-box",null,[["content","value","valueAttribute","none"],[[23,["days"]],[23,["userBirthdayDay"]],"value","cakeday.none"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-custom-preferences/user-date-of-birth-input"}}),Ember.TEMPLATES["javascripts/connectors/user-post-names/user-cakeday"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["siteSettings","cakeday_birthday_enabled"]]],null,{"statements":[[4,"if",[[23,["isUserBirthday"]]],null,{"statements":[[0,"    "],[1,[27,"emoji-images",null,[["list","title"],[[23,["siteSettings","cakeday_birthday_emoji"]],"birthdays.title"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["siteSettings","cakeday_enabled"]]],null,{"statements":[[4,"if",[[23,["isCakeday"]]],null,{"statements":[[0,"    "],[1,[27,"emoji-images",null,[["list","title"],[[23,["siteSettings","cakeday_emoji"]],"anniversaries.title"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-post-names/user-cakeday"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","anniversaries"],[9],[0,"\\n  "],[7,"ul"],[11,"class","nav-pills"],[9],[0,"\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.anniversaries.today"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.today"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.anniversaries.tomorrow"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.tomorrow"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.anniversaries.upcoming"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.upcoming"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.anniversaries.all"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.all"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[21,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","birthdays"],[9],[0,"\\n  "],[7,"ul"],[11,"class","nav-pills"],[9],[0,"\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.birthdays.today"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.today"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.birthdays.tomorrow"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.tomorrow"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.birthdays.upcoming"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.upcoming"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n\\n    "],[7,"li"],[9],[0,"\\n"],[4,"link-to",["cakeday.birthdays.all"],null,{"statements":[[0,"        "],[1,[27,"i18n",["cakeday.all"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[21,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/upcoming"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[21,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users","isBirthday"],[[23,["model"]],true]],{"statements":[[0,"      "],[1,[27,"i18n",["birthdays.upcoming.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/upcoming"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/all"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[0,"  "],[7,"div"],[11,"class","cakeday-months"],[9],[0,"\\n    "],[7,"h2"],[11,"class","cakeday-header"],[9],[1,[27,"i18n",["birthdays.month.title"],null],false],[10],[0,"\\n    "],[1,[27,"combo-box",null,[["content","value","valueAttribute","none"],[[23,["months"]],[23,["month"]],"value","cakeday.none"]]],false],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users","isBirthday"],[[23,["model"]],true]],{"statements":[[0,"      "],[1,[27,"i18n",["birthdays.month.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/all"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/tomorrow"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[21,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[23,["model"]]]],{"statements":[[0,"      "],[1,[27,"i18n",["birthdays.tomorrow.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/tomorrow"}}),Ember.TEMPLATES["javascripts/cakeday/birthdays/today"]=Ember.HTMLBars.template({id:null,
block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[21,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users","isBirthday"],[[23,["model"]],true]],{"statements":[[0,"      "],[1,[27,"i18n",["birthdays.today.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/birthdays/today"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/upcoming"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[21,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[23,["model"]]]],{"statements":[[0,"      "],[1,[27,"i18n",["anniversaries.upcoming.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/upcoming"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/all"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[0,"  "],[7,"div"],[11,"class","cakeday-months"],[9],[0,"\\n    "],[7,"h2"],[11,"class","cakeday-header"],[9],[1,[27,"i18n",["anniversaries.month.title"],null],false],[10],[0,"\\n    "],[1,[27,"combo-box",null,[["content","value","valueAttribute","none"],[[23,["months"]],[23,["month"]],"value","cakeday.none"]]],false],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[23,["model"]]]],{"statements":[[0,"      "],[1,[27,"i18n",["anniversaries.month.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/all"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/tomorrow"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[21,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[23,["model"]]]],{"statements":[[0,"      "],[1,[27,"i18n",["anniversaries.tomorrow.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/tomorrow"}}),Ember.TEMPLATES["javascripts/cakeday/anniversaries/today"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"h2"],[11,"class","cakeday-header"],[9],[1,[21,"title"],false],[10],[0,"\\n\\n"],[4,"load-more",null,[["selector","action"],[".user-info","loadMore"]],{"statements":[[4,"conditional-loading-spinner",null,[["condition"],[[23,["model","loading"]]]],{"statements":[[4,"user-info-list",null,[["users"],[[23,["model"]]]],{"statements":[[0,"      "],[1,[27,"i18n",["anniversaries.today.empty"],null],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["model","loadingMore"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/cakeday/anniversaries/today"}}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-all",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={queryParams:["month"],month:moment().month()+1,months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"months",[t.default],Object.getOwnPropertyDescriptor(s,"months"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-tomorrow",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={title:function(){return I18n.t("birthdays.today.title",{date:moment().add(1,"day").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"title",[t.default],Object.getOwnPropertyDescriptor(s,"title"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-tomorrow",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={title:function(){return I18n.t("anniversaries.today.title",{date:moment().add(1,"day").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"title",[t.default],Object.getOwnPropertyDescriptor(s,"title"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-upcoming",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={title:function(){var e=moment();return I18n.t("birthdays.upcoming.title",{start_date:e.add(2,"days").format("MMMM Do"),end_date:e.add(7,"days").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"title",[t.default],Object.getOwnPropertyDescriptor(s,"title"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-upcoming",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={title:function(){var e=moment();return I18n.t("anniversaries.upcoming.title",{start_date:e.add(2,"days").format("MMMM Do"),end_date:e.add(7,"days").format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"title",[t.default],Object.getOwnPropertyDescriptor(s,"title"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-today",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={title:function(){return I18n.t("birthdays.today.title",{date:moment().format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"title",[t.default],Object.getOwnPropertyDescriptor(s,"title"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({cakedayEnabled:Ember.computed.alias("siteSettings.cakeday_enabled"),cakedayBirthdayEnabled:Ember.computed.alias("siteSettings.cakeday_birthday_enabled")})}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-birthdays-all",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={queryParams:["month"],month:moment().month()+1,months:function(){return moment.months().map(function(e,t){return{name:e,value:t+1}})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"months",[t.default],Object.getOwnPropertyDescriptor(s,"months"),s),s))}),define("discourse/plugins/discourse-cakeday/discourse/controllers/cakeday-anniversaries-today",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s;e.default=Ember.Controller.extend((s={title:function(){return I18n.t("anniversaries.today.title",{date:moment().format("MMMM Do")})},actions:{loadMore:function(){this.get("model").loadMore()}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(s,"title",[t.default],Object.getOwnPropertyDescriptor(s,"title"),s),s))}),define("discourse/plugins/discourse-canned-replies/components/canned-reply",["exports","discourse/lib/show-modal","discourse/plugins/discourse-canned-replies/lib/apply-reply"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({isOpen:!1,actions:{toggle:function(){this.toggleProperty("isOpen")},apply:function(){var e=Discourse.__container__.lookup("controller:composer");(0,s.default)(this.get("reply.id"),this.get("reply.title"),this.get("reply.content"),e.model),this.appEvents.trigger("canned-replies:hide")},editReply:function(){var e=Discourse.__container__.lookup("controller:composer");e.send("closeModal"),(0,t.default)("edit-reply").setProperties({composerModel:e.composerModel,replyId:this.get("reply.id"),replyTitle:this.get("reply.title"),replyContent:this.get("reply.content")})}}})}),define("discourse/plugins/discourse-canned-replies/components/canned-replies-form",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({})}),define("discourse/plugins/discourse-canned-replies/connectors/editor-preview/canned-replies",["exports","discourse/lib/show-modal","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,t){t.set("isVisible",!1),t.set("loadingReplies",!1),t.set("replies",[]),t.set("filteredReplies",[]),t.appEvents.has("canned-replies:show")||t.appEvents.on("canned-replies:show",function(){t.send("show")}),t.appEvents.has("canned-replies:hide")||t.appEvents.on("canned-replies:hide",function(){t.send("hide")}),t.appEvents.on("composer:will-close",function(){t.appEvents.off("canned-replies:show"),t.appEvents.off("canned-replies:hide")}),t.addObserver("listFilter",function(){var e=t.get("listFilter").toLowerCase(),s=t.get("replies").map(function(t){return t.score=0,-1!==t.title.toLowerCase().indexOf(e)?t.score+=2:-1!==t.content.toLowerCase().indexOf(e)&&(t.score+=1),t}).filter(function(e){return 0!==e.score}).sort(function(e,t){return e.score!==t.score?e.score>t.score?-1:1:e.title!==t.title?e.title<t.title?-1:1:0});t.set("filteredReplies",s)})},actions:{show:function(){var e=this;$("#reply-control .d-editor-preview-wrapper > .d-editor-preview").hide(),this.set("isVisible",!0),this.set("loadingReplies",!0),(0,s.ajax)("/canned_replies").then(function(t){e.set("replies",t.replies),e.set("filteredReplies",t.replies)}).catch(n.popupAjaxError).finally(function(){e.set("loadingReplies",!1),Ember.run.schedule("afterRender",function(){$(".canned-replies-filter").focus()})})},hide:function(){$(".d-editor-preview-wrapper > .d-editor-preview").show(),this.set("isVisible",!1)},newReply:function(){var e=Discourse.__container__.lookup("controller:composer");e.send("closeModal"),(0,t.default)("new-reply").setProperties({newContent:e.model.reply})}}}}),Ember.TEMPLATES["javascripts/components/canned-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","canned-reply"],[9],[0,"\\n  "],[7,"div"],[11,"class","canned-reply-title"],[3,"action",[[22,0,[]],"toggle"]],[9],[0,"\\n    "],[1,[27,"d-button",null,[["class","action","icon"],["btn canned-replies-apply","apply","clipboard"]]],false],[0,"\\n\\n    "],[1,[27,"d-button",null,[["class","action","icon"],["btn canned-replies-edit","editReply","pencil"]]],false],[0,"\\n\\n    "],[7,"b"],[9],[1,[23,["reply","title"]],false],[10],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"if",[[23,["isOpen"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","canned-replies-content"],[9],[0,"\\n      "],[1,[27,"cook-text",[[23,["reply","content"]]],null],true],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/canned-reply"}}),Ember.TEMPLATES["javascripts/components/canned-replies-form"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"form"],[9],[0,"\\n  "],[7,"div"],[9],[0,"\\n    "],[7,"label"],[9],[7,"strong"],[9],[1,[27,"i18n",["canned_replies.title.name"],null],false],[10],[10],[0,"\\n    "],[1,[27,"input",null,[["class","value"],["canned-replies-form-title-input",[23,["title"]]]]],false],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"div"],[9],[0,"\\n    "],[7,"label"],[9],[7,"strong"],[9],[1,[27,"i18n",["canned_replies.content.name"],null],false],[10],[10],[0,"\\n    "],[1,[27,"d-editor",null,[["class","value"],["canned-replies-form-content-input",[23,["content"]]]]],false],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/canned-replies-form"}}),Ember.TEMPLATES["javascripts/connectors/editor-preview/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["r"],"statements":[[4,"if",[[23,["isVisible"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","d-editor-preview"],[9],[0,"\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[23,["loadingReplies"]]]],{"statements":[[0,"      "],[1,[27,"d-button",null,[["class","action","icon","label"],["btn canned-replies-new","newReply","plus","canned_replies.insert.new_button"]]],false],[0,"\\n      "],[1,[27,"text-field",null,[["class","value","placeholder"],["canned-replies-filter",[23,["listFilter"]],[27,"i18n",["canned_replies.filter_hint"],null]]]],false],[0,"\\n      "],[7,"a"],[11,"class","close pull-right"],[3,"action",[[22,0,[]],"hide"]],[9],[1,[27,"d-icon",["times"],null],false],[10],[0,"\\n\\n      "],[7,"hr"],[9],[10],[0,"\\n\\n"],[4,"each",[[23,["filteredReplies"]]],null,{"statements":[[0,"        "],[1,[27,"canned-reply",null,[["reply"],[[22,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/editor-preview/canned-replies"}}),Ember.TEMPLATES["javascripts/modal/canned-replies"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class","style"],["canned_replies.insert.modal_title","canned-replies-modal","overflow: visible"]],{"statements":[[0,"\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[23,["loadingReplies"]]]],{"statements":[[0,"    "],[7,"div"],[11,"class","details"],[9],[0,"\\n      "],[7,"div"],[11,"class","reply-selector"],[9],[0,"\\n        "],[7,"div"],[11,"class","selector"],[9],[0,"\\n          "],[1,[27,"combo-box",null,[["id","valueAttribute","value","nameProperty","content","none"],["canned-replies-combobox","id",[23,["selectedReplyId"]],"title",[23,["replies"]],"canned_replies.insert.choose"]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n"],[4,"if",[[23,["selectedReply"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","content"],[9],[0,"\\n          "],[7,"div"],[9],[0,"\\n            "],[1,[27,"cook-text",[[23,["selectedReply","content"]]],null],true],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n  "],[1,[27,"d-button",null,[["class","action","icon","label"],["btn pull-left canned-replies-new","newReply","plus","canned_replies.insert.new_button"]]],false],[0,"\\n\\n"],[4,"if",[[23,["selectedReply"]]],null,{"statements":[[0,"    "],[1,[27,"d-button",null,[["class","action","icon","label"],["btn pull-left canned-replies-edit","editReply","pencil","canned_replies.insert.edit_button"]]],false],[0,"\\n\\n    "],[1,[27,"d-button",null,[["class","action","icon","label"],["btn-primary pull-right canned-replies-apply","apply","clipboard","canned_replies.insert.insert_button"]]],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/canned-replies"}}),Ember.TEMPLATES["javascripts/modal/edit-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class"],["canned_replies.edit.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[27,"canned-replies-form",null,[["title","content"],[[23,["replyTitle"]],[23,["replyContent"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer canned-replies-footer"],[9],[0,"\\n\\n  "],[1,[27,"d-button",null,[["class","action","label","disabled"],["btn btn-primary edit-reply-save-btn","save",[23,["savingLabel"]],[23,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[7,"a"],[3,"action",[[22,0,[]],"cancel"]],[9],[1,[27,"i18n",["cancel"],null],false],[10],[0,"\\n\\n  "],[1,[27,"d-button",null,[["class","action","icon","disabled"],["btn-danger pull-right","remove","trash",[23,["saving"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/edit-reply"}}),Ember.TEMPLATES["javascripts/modal/new-reply"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class"],["canned_replies.add.modal_title","canned-replies-modal"]],{"statements":[[0,"  "],[1,[27,"canned-replies-form",null,[["title","content"],[[23,["newTitle"]],[23,["newContent"]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer canned-replies-footer"],[9],[0,"\\n  "],[1,[27,"d-button",null,[["class","action","label","disabled"],["btn btn-primary new-reply-save-btn","save","save",[23,["disableSaveButton"]]]]],false],[0,"\\n\\n  "],[7,"a"],[3,"action",[[22,0,[]],"cancel"]],[9],[1,[27,"i18n",["cancel"],null],false],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/new-reply"}}),define("discourse/plugins/discourse-canned-replies/initializers/add-canned-replies-ui-builder",["exports","discourse/lib/plugin-api","discourse/lib/show-modal","discourse/controllers/composer"],function(e,t,s,n){"use strict";function a(e){n.default.reopen({actions:{showCannedRepliesButton:function(){this.site.mobileView?(0,s.default)("canned-replies").setProperties({composerModel:this.model}):(this.appEvents.trigger("composer:show-preview"),this.appEvents.trigger("canned-replies:show"))}}}),e.addToolbarPopupMenuOptionsCallback(function(){return{id:"canned_replies_button",icon:"clipboard",action:"showCannedRepliesButton",label:"canned_replies.composer_button_text"}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"add-canned-replies-ui-builder",initialize:function(e){var s=e.lookup("site-settings:main"),n=e.lookup("current-user:main");s.canned_replies_enabled&&n&&n.staff&&(0,t.withPluginApi)("0.5",a)}}}),define("discourse/plugins/discourse-canned-replies/lib/apply-reply",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,n,a,i){if(i){var o={user:i.get("user.username"),original_poster:i.get("topic.posters")?i.get("topic.posters")[0].user.get("username"):"",reply_to:i.get("post.reply_to_user.username"),last_user:i.get("topic.last_poster_username"),reply_to_or_last:i.get("post.reply_to_user.username")||i.get("topic.last_poster_username")};for(var r in o)o[r]&&(n=n.replace("%{"+r+"}",o[r]),a=a.replace("%{"+r+"}",o[r]))}i.appEvents.trigger("composer:insert-block",a),i&&!i.get("title")&&i.set("title",n),(0,t.ajax)("/canned_replies/"+e+"/use",{type:"PATCH"}).catch(s.popupAjaxError)}}),define("discourse/plugins/discourse-canned-replies/controllers/new-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,t,s,n,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r;e.default=Ember.Controller.extend(t.default,(o=(0,a.default)("newTitle","newContent"),r={newTitle:"",newContent:"",onShow:function(){this.setProperties({newTitle:"",newContent:""})},disableSaveButton:function(e,t){return""===e||""===t},actions:{save:function(){var e=this;(0,n.ajax)("/canned_replies",{type:"POST",data:{title:this.get("newTitle"),content:this.get("newContent")}}).then(function(){e.send("closeModal"),e.site.mobileView?(0,s.default)("canned-replies"):e.appEvents.trigger("canned-replies:show")}).catch(i.popupAjaxError)},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,s.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(r,"disableSaveButton",[o],Object.getOwnPropertyDescriptor(r,"disableSaveButton"),r),r))}),define("discourse/plugins/discourse-canned-replies/controllers/canned-replies",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error","discourse/plugins/discourse-canned-replies/lib/apply-reply"],function(e,t,s,n,a,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,l;e.default=Ember.Controller.extend(t.default,(r=(0,a.observes)("selectedReplyId"),l={selectedReply:null,selectedReplyId:"",loadingReplies:!0,init:function(){this._super(),this.replies=[]},_updateSelection:function(){this.selectionChange()},onShow:function(){var e=this;(0,n.ajax)("/canned_replies").then(function(t){e.set("replies",t.replies),e.selectionChange()}).catch(i.popupAjaxError).finally(function(){return e.set("loadingReplies",!1)})},selectionChange:function(){var e=this.get("selectedReplyId"),t="";this.get("replies").forEach(function(s){if(s.id===e)return void(t=s)}),this.set("selectedReply",t)},actions:{apply:function(){(0,o.default)(this.get("selectedReplyId"),this.selectedReply.title,this.selectedReply.content,this.composerModel),this.send("closeModal")},newReply:function(){this.send("closeModal"),(0,s.default)("new-reply").setProperties({newContent:this.composerModel.reply})},editReply:function(){this.send("closeModal"),(0,s.default)("edit-reply").setProperties({replyId:this.get("selectedReplyId"),replyTitle:this.get("selectedReply.title"),replyContent:this.get("selectedReply.content")})}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(l,"_updateSelection",[r],Object.getOwnPropertyDescriptor(l,"_updateSelection"),l),l))}),define("discourse/plugins/discourse-canned-replies/controllers/edit-reply",["exports","discourse/mixins/modal-functionality","discourse/lib/show-modal","discourse/lib/ajax","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,t,s,n,a,i){"use strict";function o(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var r,l,u;e.default=Ember.Controller.extend(t.default,(r=(0,a.default)("saving"),l=(0,a.default)("replyTitle","replyContent","saving"),u={replyTitle:"",replyContent:"",replyId:"",saving:null,onShow:function(){this.setProperties({saving:null})},savingLabel:function(e){return null===e?"save":e?"saving":"saved"},disableSaveButton:function(e,t,s){return s||""===e||""===t},actions:{save:function(){var e=this;this.set("saving",!0),(0,n.ajax)("/canned_replies/"+this.get("replyId"),{type:"PATCH",data:{title:this.get("replyTitle"),content:this.get("replyContent")}}).catch(i.popupAjaxError).finally(function(){e.set("saving",!1),e.appEvents.trigger("canned-replies:show")})},remove:function(){var e=this;bootbox.confirm(I18n.t("canned_replies.edit.remove_confirm"),function(t){t&&(0,n.ajax)("/canned_replies/"+e.get("replyId"),{type:"DELETE"}).then(function(){e.send("closeModal"),e.site.mobileView?(0,s.default)("canned-replies"):e.appEvents.trigger("canned-replies:show")}).catch(i.popupAjaxError)})},cancel:function(){this.send("closeModal"),this.site.mobileView?(0,s.default)("canned-replies"):this.appEvents.trigger("canned-replies:show")}}},o(u,"savingLabel",[r],Object.getOwnPropertyDescriptor(u,"savingLabel"),u),o(u,"disableSaveButton",[l],Object.getOwnPropertyDescriptor(u,"disableSaveButton"),u),u))}),define("discourse/plugins/discourse-chat-integration/admin/adapters/channel",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("chat")}),define("discourse/plugins/discourse-chat-integration/admin/adapters/rule",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("chat")}),define("discourse/plugins/discourse-chat-integration/admin/adapters/provider",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("chat")}),define("discourse/plugins/discourse-chat-integration/admin/components/channel-data",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["channel-info"]})}),define("discourse/plugins/discourse-chat-integration/admin/components/channel-details",["exports","discourse/lib/ajax-error"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNames:["channel-details"],actions:{refresh:function(){this.sendAction("refresh")},delete:function(e){var s=this;bootbox.confirm(I18n.t("chat_integration.channel_delete_confirm"),I18n.t("no_value"),I18n.t("yes_value"),function(n){n&&e.destroyRecord().then(function(){s.send("refresh")}).catch(t.popupAjaxError)})},edit:function(e){this.sendAction("edit",e)},test:function(e){this.sendAction("test",e)},createRule:function(e){this.sendAction("createRule",e)},editRule:function(e){this.sendAction("editRule",e,this.get("channel"))},showError:function(e){this.sendAction("showError",e)}}})}),define("discourse/plugins/discourse-chat-integration/admin/components/rule-row",["exports","discourse/lib/ajax-error","ember-addons/ember-computed-decorators"],function(e,t,s){"use strict";function n(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o,r;e.default=Ember.Component.extend((a=(0,s.default)("rule.type"),i=(0,s.default)("rule.type"),o=(0,s.default)("rule.type"),r={tagName:"tr",isCategory:function(e){return"normal"===e},isMessage:function(e){return"group_message"===e},isMention:function(e){return"group_mention"===e},actions:{edit:function(){this.sendAction("edit",this.get("rule"))},delete:function(e){var s=this
;e.destroyRecord().then(function(){s.send("refresh")}).catch(t.popupAjaxError)},refresh:function(){this.sendAction("refresh")}}},n(r,"isCategory",[a],Object.getOwnPropertyDescriptor(r,"isCategory"),r),n(r,"isMessage",[i],Object.getOwnPropertyDescriptor(r,"isMessage"),r),n(r,"isMention",[o],Object.getOwnPropertyDescriptor(r,"isMention"),r),r))}),define("discourse/plugins/discourse-chat-integration/admin/routes/admin-plugins-chat-index",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({afterModel:function(e){e.totalRows>0&&this.transitionTo("adminPlugins.chat.provider",e.get("firstObject").name)}})}),define("discourse/plugins/discourse-chat-integration/admin/routes/admin-plugins-chat",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({model:function(){return this.store.findAll("provider")},actions:{showSettings:function(){this.transitionTo("adminSiteSettingsCategory","plugins",{queryParams:{filter:"chat_integration"}})}}})}),define("discourse/plugins/discourse-chat-integration/admin/routes/admin-plugins-chat-provider",["exports","discourse/models/group"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({model:function(e){var s=this;return Ember.RSVP.hash({channels:this.store.findAll("channel",{provider:e.provider}),provider:this.modelFor("admin-plugins-chat").findBy("id",e.provider),groups:t.default.findAll().then(function(e){return e.filter(function(e){return!e.get("automatic")})})}).then(function(e){return e.channels.forEach(function(e){e.set("rules",e.rules.map(function(t){return t=s.store.createRecord("rule",t),t.channel=e,t}))}),e})},serialize:function(e){return{provider:e.provider.get("id")}},actions:{closeModal:function(){return this.get("controller.modalShowing")&&(this.refresh(),this.set("controller.modalShowing",!1)),!0},refresh:function(){this.refresh()}}})}),Ember.TEMPLATES["javascripts/admin/templates/modal/admin-plugins-chat-channel-error"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["id"],["chat_integration_error_modal"]],{"statements":[[0,"    "],[7,"h4"],[9],[1,[27,"i18n",[[23,["model","error_key"]]],null],false],[10],[0,"\\n    "],[7,"pre"],[9],[1,[23,["model","error_info"]],false],[10],[0,""]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/admin/templates/modal/admin-plugins-chat-channel-error"}}),Ember.TEMPLATES["javascripts/admin/templates/modal/admin-plugins-chat-edit-rule"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["id","title"],["chat-integration-edit-rule_modal","chat_integration.edit_rule_modal.title"]],{"statements":[[0,"  "],[7,"div"],[9],[0,"\\n    "],[7,"form"],[3,"action",[[22,0,[]],"save"],[["on"],["submit"]]],[9],[0,"\\n      "],[7,"table"],[9],[0,"\\n\\n        "],[7,"tr"],[11,"class","input"],[9],[0,"\\n          "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","provider"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.provider"],null],false],[10],[10],[0,"\\n          "],[7,"td"],[9],[0,"\\n            "],[1,[27,"i18n",[[27,"concat",["chat_integration.provider.",[23,["model","channel","provider"]],".title"],null]],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n        "],[10],[0,"\\n\\n        "],[7,"tr"],[11,"class","input"],[9],[0,"\\n          "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","channel"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.channel"],null],false],[10],[10],[0,"\\n          "],[7,"td"],[9],[0,"\\n            "],[1,[27,"channel-data",null,[["provider","channel"],[[23,["model","provider"]],[23,["model","channel"]]]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n        "],[10],[0,"\\n\\n        "],[7,"tr"],[11,"class","input"],[9],[0,"\\n          "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","filter"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.type"],null],false],[10],[10],[0,"\\n          "],[7,"td"],[9],[0,"\\n            "],[1,[27,"combo-box",null,[["name","content","value"],["type",[23,["model","rule","available_types"]],[23,["model","rule","type"]]]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n          "],[7,"td"],[9],[7,"label"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.instructions.type"],null],false],[10],[10],[0,"\\n        "],[10],[0,"\\n\\n        "],[7,"tr"],[11,"class","input"],[9],[0,"\\n          "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","filter"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.filter"],null],false],[10],[10],[0,"\\n          "],[7,"td"],[9],[0,"\\n            "],[1,[27,"combo-box",null,[["name","content","value"],["filter",[23,["model","rule","available_filters"]],[23,["model","rule","filter"]]]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n          "],[7,"td"],[9],[7,"label"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.instructions.filter"],null],false],[10],[10],[0,"\\n        "],[10],[0,"\\n\\n"],[4,"if",[[23,["showCategory"]]],null,{"statements":[[0,"          "],[7,"tr"],[11,"class","input"],[9],[0,"\\n            "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","category"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.category"],null],false],[10],[10],[0,"\\n            "],[7,"td"],[9],[0,"\\n              "],[1,[27,"category-chooser",null,[["name","value","rootNoneLabel","rootNone","overrideWidths"],["category",[23,["model","rule","category_id"]],"chat_integration.all_categories",true,false]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n            "],[7,"td"],[9],[10],[0,"\\n            "],[7,"td"],[9],[7,"label"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.instructions.category"],null],false],[10],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[7,"tr"],[11,"class","input"],[9],[0,"\\n            "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","group"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.group"],null],false],[10],[10],[0,"\\n            "],[7,"td"],[9],[0,"\\n              "],[1,[27,"combo-box",null,[["content","valueAttribute","value","none"],[[23,["model","groups"]],"id",[23,["model","rule","group_id"]],"chat_integration.choose_group"]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n            "],[7,"td"],[9],[10],[0,"\\n            "],[7,"td"],[9],[7,"label"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.instructions.group"],null],false],[10],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]}],[0,"\\n"],[4,"if",[[23,["siteSettings","tagging_enabled"]]],null,{"statements":[[0,"          "],[7,"tr"],[11,"class","input"],[9],[0,"\\n            "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","tags"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.tags"],null],false],[10],[10],[0,"\\n            "],[7,"td"],[9],[0,"\\n              "],[1,[27,"tag-chooser",null,[["placeholderKey","name","tags"],["chat_integration.all_tags","tags",[23,["model","rule","tags"]]]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n            "],[7,"td"],[9],[10],[0,"\\n            "],[7,"td"],[9],[7,"label"],[9],[1,[27,"i18n",["chat_integration.edit_rule_modal.instructions.tags"],null],false],[10],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n      "],[10],[0,"\\n\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n  "],[1,[27,"d-button",null,[["id","class","action","title","label","disabled"],["save-rule","btn-primary btn-large","save","chat_integration.edit_rule_modal.save","chat_integration.edit_rule_modal.save",[23,["saveDisabled"]]]]],false],[0,"\\n\\n  "],[1,[27,"d-button",null,[["class","action","title","label"],["btn-large","cancel","chat_integration.edit_rule_modal.cancel","chat_integration.edit_rule_modal.cancel"]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/templates/modal/admin-plugins-chat-edit-rule"}}),Ember.TEMPLATES["javascripts/admin/templates/modal/admin-plugins-chat-edit-channel"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["param"],"statements":[[4,"d-modal-body",null,[["id","title"],["chat-integration-edit-channel-modal","chat_integration.edit_channel_modal.title"]],{"statements":[[0,"  "],[7,"div"],[9],[0,"\\n    "],[7,"form"],[3,"action",[[22,0,[]],"save"],[["on"],["submit"]]],[9],[0,"\\n      "],[7,"table"],[9],[0,"\\n\\n        "],[7,"tr"],[11,"class","input"],[9],[0,"\\n          "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","provider"],[9],[1,[27,"i18n",["chat_integration.edit_channel_modal.provider"],null],false],[10],[10],[0,"\\n          "],[7,"td"],[9],[0,"\\n            "],[1,[27,"i18n",[[27,"concat",["chat_integration.provider.",[23,["model","channel","provider"]],".title"],null]],null],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n          "],[7,"td"],[9],[10],[0,"\\n        "],[10],[0,"\\n\\n"],[4,"each",[[23,["model","provider","channel_parameters"]]],null,{"statements":[[0,"          "],[7,"tr"],[11,"class","input"],[9],[0,"\\n            "],[7,"td"],[11,"class","label"],[9],[7,"label"],[12,"for",[28,["param-",[22,1,["key"]]]]],[9],[1,[27,"i18n",[[27,"concat",["chat_integration.provider.",[23,["model","channel","provider"]],".param.",[22,1,["key"]],".title"],null]],null],false],[10],[10],[0,"\\n            "],[7,"td"],[9],[0,"\\n              "],[1,[27,"text-field",null,[["name","value"],[[27,"concat",["param-",[22,1,["key"]]],null],[27,"mut",[[27,"get",[[23,["model","channel","data"]],[22,1,["key"]]],null]],null]]]],false],[0,"\\n\\n               \\n"],[4,"if",[[27,"get",[[23,["model","channel","data"]],[22,1,["key"]]],null]],null,{"statements":[[0,"                "],[1,[27,"input-tip",null,[["validation"],[[27,"get",[[23,["paramValidation"]],[22,1,["key"]]],null]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"tr"],[11,"class","instructions"],[9],[0,"\\n            "],[7,"td"],[9],[10],[0,"\\n            "],[7,"td"],[9],[7,"label"],[9],[1,[27,"i18n",[[27,"concat",["chat_integration.provider.",[23,["model","channel","provider"]],".param.",[22,1,["key"]],".help"],null]],null],false],[10],[10],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n  "],[1,[27,"d-button",null,[["id","class","action","title","label","disabled"],["save-channel","btn-primary btn-large","save","chat_integration.edit_channel_modal.save","chat_integration.edit_channel_modal.save",[23,["saveDisabled"]]]]],false],[0,"\\n\\n  "],[1,[27,"d-button",null,[["class","action","title","label"],["btn-large","cancel","chat_integration.edit_channel_modal.cancel","chat_integration.edit_channel_modal.cancel"]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/templates/modal/admin-plugins-chat-edit-channel"}}),Ember.TEMPLATES["javascripts/admin/templates/modal/admin-plugins-chat-test"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["id","title"],["chat_integration_test_modal","chat_integration.test_modal.title"]],{"statements":[[0,"  "],[7,"div"],[9],[0,"\\n    "],[7,"form"],[3,"action",[[22,0,[]],"send"],[["on"],["submit"]]],[9],[0,"\\n      "],[7,"table"],[9],[0,"\\n        "],[7,"tr"],[11,"class","input"],[9],[0,"\\n          "],[7,"td"],[11,"class","label"],[9],[7,"label"],[11,"for","channel"],[9],[1,[27,"i18n",["chat_integration.test_modal.topic"],null],false],[10],[10],[0,"\\n          "],[7,"td"],[9],[0,"\\n            "],[1,[27,"choose-topic",null,[["selectedTopicId"],[[23,["model","topic_id"]]]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n"],[4,"conditional-loading-spinner",null,[["condition"],[[23,["loading"]]]],{"statements":[[0,"    "],[1,[27,"d-button",null,[["id","class","action","title","label","disabled"],["send-test","btn-primary btn-large","send","chat_integration.test_modal.send","chat_integration.test_modal.send",[23,["sendDisabled"]]]]],false],[0,"\\n\\n    "],[1,[27,"d-button",null,[["class","action","title","label"],["btn-large","closeModal","chat_integration.test_modal.close","chat_integration.test_modal.close"]]],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/templates/modal/admin-plugins-chat-test"}}),define("discourse/plugins/discourse-chat-integration/admin/models/channel",["exports","discourse/models/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({updateProperties:function(){return this.getProperties(["data"])},createProperties:function(){return this.getProperties(["provider","data"])}})}),define("discourse/plugins/discourse-chat-integration/admin/models/rule",["exports","discourse/models/rest","discourse/models/category","ember-addons/ember-computed-decorators"],function(e,t,s,n){"use strict";function a(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var i,o,r,l;e.default=t.default.extend((i=(0,n.observes)("type"),o=(0,n.default)("category_id"),r=(0,n.default)("filter"),l={available_filters:[{id:"watch",name:I18n.t("chat_integration.filter.watch"),icon:"exclamation-circle"},{id:"follow",name:I18n.t("chat_integration.filter.follow"),icon:"circle"},{id:"mute",name:I18n.t("chat_integration.filter.mute"),icon:"times-circle"}],available_types:[{id:"normal",name:I18n.t("chat_integration.type.normal")},{id:"group_message",name:I18n.t("chat_integration.type.group_message")},{id:"group_mention",name:I18n.t("chat_integration.type.group_mention")}],category_id:null,tags:null,channel_id:null,filter:"watch",type:"normal",error_key:null,removeUnneededInfo:function(){"normal"===this.get("type")?this.set("group_id",null):this.set("category_id",null)},category:function(e){return!!e&&s.default.findById(e)},filterName:function(e){return I18n.t("chat_integration.filter."+e)},updateProperties:function(){return this.getProperties(["type","category_id","group_id","tags","filter"])},createProperties:function(){return this.getProperties(["type","channel_id","category_id","group_id","tags","filter"])}},a(l,"removeUnneededInfo",[i],Object.getOwnPropertyDescriptor(l,"removeUnneededInfo"),l),a(l,"category",[o],Object.getOwnPropertyDescriptor(l,"category"),l),a(l,"filterName",[r],Object.getOwnPropertyDescriptor(l,"filterName"),l),l))}),define("discourse/plugins/discourse-chat-integration/admin/models/provider",["exports","discourse/models/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({})}),define("discourse/plugins/discourse-chat-integration/admin/chat-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("chat",function(){this.route("provider",{path:"/:provider"})})}}}),define("discourse/plugins/discourse-chat-integration/admin/controllers/admin-plugins-chat",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend({})}),define("discourse/plugins/discourse-chat-integration/admin/controllers/modals/admin-plugins-chat-edit-channel",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax-error","discourse/models/input-validation","ember-addons/ember-computed-decorators"],function(e,t,s,n,a){"use strict";function i(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var o,r,l,u;e.default=Ember.Controller.extend(t.default,(o=(0,a.on)("init"),r=(0,a.observes)("model"),l=(0,a.default)("paramValidation"),u={setupKeydown:function(){var e=this;Ember.run.schedule("afterRender",function(){$("#chat-integration-edit-channel-modal").keydown(function(t){13===t.keyCode&&e.send("save")})})},setupValidations:function(){if(this.get("model.provider")){var e=this.get("model.provider.channel_parameters").map(function(e){return e.key});Ember.defineProperty(this,"paramValidation",Ember.computed("model.channel.data.{"+e.join(",")+"}",this._paramValidation))}},validate:function(e){var t=e.regex,s=new RegExp(t),a=this.get("model.channel.data."+e.key);return void 0===a&&(a=""),""===a?n.default.create({failed:!0}):t?s.test(a)?n.default.create({ok:!0,reason:I18n.t("chat_integration.edit_channel_modal.channel_validation.ok")}):n.default.create({failed:!0,reason:I18n.t("chat_integration.edit_channel_modal.channel_validation.fail")}):n.default.create({ok:!0})},_paramValidation:function(){var e=this,t={};return this.get("model.provider.channel_parameters").forEach(function(s){t[s.key]=e.validate(s)}),t},saveDisabled:function(e){if(!e)return!0;var t=!1;return Object.keys(e).forEach(function(s){e[s]||(t=!0),e[s].ok||(t=!0)}),t},actions:{cancel:function(){this.send("closeModal")},save:function(){var e=this;this.get("saveDisabled")||this.get("model.channel").save().then(function(){e.send("closeModal")}).catch(s.popupAjaxError)}}},i(u,"setupKeydown",[o],Object.getOwnPropertyDescriptor(u,"setupKeydown"),u),i(u,"setupValidations",[r],Object.getOwnPropertyDescriptor(u,"setupValidations"),u),i(u,"saveDisabled",[l],Object.getOwnPropertyDescriptor(u,"saveDisabled"),u),u))}),define("discourse/plugins/discourse-chat-integration/admin/controllers/modals/admin-plugins-chat-test",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax","discourse/lib/ajax-error","ember-addons/ember-computed-decorators"],function(e,t,s,n,a){"use strict";function i(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var o,r,l;e.default=Ember.Controller.extend(t.default,(o=(0,a.on)("init"),r=(0,a.default)("model.topic_id"),l={setupKeydown:function(){var e=this;Ember.run.schedule("afterRender",function(){$("#chat_integration_test_modal").keydown(function(t){13===t.keyCode&&e.send("send")})})},sendDisabled:function(e){return!e},actions:{send:function(){var e=this;this.get("sendDisabled")||(this.set("loading",!0),(0,s.ajax)("/admin/plugins/chat/test",{data:{channel_id:this.get("model.channel.id"),topic_id:this.get("model.topic_id")},type:"POST"}).then(function(){e.set("loading",!1),e.flash(I18n.t("chat_integration.test_modal.success"),"success")}).catch(n.popupAjaxError))}}},i(l,"setupKeydown",[o],Object.getOwnPropertyDescriptor(l,"setupKeydown"),l),i(l,"sendDisabled",[r],Object.getOwnPropertyDescriptor(l,"sendDisabled"),l),l))}),define("discourse/plugins/discourse-chat-integration/admin/controllers/modals/admin-plugins-chat-edit-rule",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax-error","ember-addons/ember-computed-decorators"],function(e,t,s,n){"use strict";function a(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var i,o,r;e.default=Ember.Controller.extend(t.default,(i=(0,n.on)("init"),o=(0,n.default)("model.rule.type"),r={saveDisabled:!1,setupKeydown:function(){var e=this;Ember.run.schedule("afterRender",function(){$("#chat-integration-edit-channel-modal").keydown(function(t){13===t.keyCode&&e.send("save")})})},showCategory:function(e){return"normal"===e},actions:{cancel:function(){this.send("closeModal")},save:function(){var e=this;this.get("saveDisabled")||this.get("model.rule").save().then(function(){e.send("closeModal")}).catch(s.popupAjaxError)}}},a(r,"setupKeydown",[i],Object.getOwnPropertyDescriptor(r,"setupKeydown"),r),a(r,"showCategory",[o],Object.getOwnPropertyDescriptor(r,"showCategory"),r),r))}),define("discourse/plugins/discourse-chat-integration/admin/controllers/admin-plugins-chat-provider",["exports","discourse/lib/show-modal","ember-addons/ember-computed-decorators"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a;e.default=Ember.Controller.extend((n=(0,s.default)("model.channels"),a={modalShowing:!1,anyErrors:function(e){var t=!1;return e.forEach(function(e){e.error_key&&(t=!0)}),t},actions:{createChannel:function(){this.set("modalShowing",!0);var e={channel:this.store.createRecord("channel",{provider:this.get("model.provider.id"),data:{}}),provider:this.get("model.provider")};(0,t.default)("admin-plugins-chat-edit-channel",{model:e,admin:!0})},editChannel:function(e){this.set("modalShowing",!0);var s={channel:e,provider:this.get("model.provider")};(0,t.default)("admin-plugins-chat-edit-channel",{model:s,admin:!0})},testChannel:function(e){this.set("modalShowing",!0),(0,t.default)("admin-plugins-chat-test",{model:{channel:e},admin:!0})},createRule:function(e){this.set("modalShowing",!0);var s={rule:this.store.createRecord("rule",{channel_id:e.id}),channel:e,provider:this.get("model.provider"),groups:this.get("model.groups")};(0,t.default)("admin-plugins-chat-edit-rule",{model:s,admin:!0})},editRule:function(e,s){this.set("modalShowing",!0);var n={rule:e,channel:s,provider:this.get("model.provider"),groups:this.get("model.groups")};(0,t.default)("admin-plugins-chat-edit-rule",{model:n,admin:!0})},showError:function(e){this.set("modalShowing",!0),(0,t.default)("admin-plugins-chat-channel-error",{model:e,admin:!0})}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(a,"anyErrors",[n],Object.getOwnPropertyDescriptor(a,"anyErrors"),a),a))}),define("discourse/plugins/discourse-chat-integration/discourse/public-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){this.route("transcript",{path:"/chat-transcript/:secret"})}}),define("discourse/plugins/discourse-chat-integration/discourse/routes/transcript",["exports","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({beforeModel:function(e){var n=this;if(this.currentUser){var a=e.params.transcript.secret;this.replaceWith("discovery.latest").then(function(e){n.controllerFor("navigation/default").get("canCreateTopic")&&Ember.run.next(function(){(0,t.ajax)("chat-transcript/"+a).then(function(t){e.send("createNewTopicViaParams",null,t.content,null,null,null)},s.popupAjaxError)})})}else this.session.set("shouldRedirectToUrl",window.location.href),this.replaceWith("login")}})}),Ember.TEMPLATES["javascripts/components/channel-details"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["rule"],"statements":[[7,"div"],[11,"class","channel-header"],[9],[0,"\\n  "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n    "],[1,[27,"d-button",null,[["action","actionParam","icon","title","label"],["edit",[23,["channel"]],"pencil","chat_integration.edit_channel","chat_integration.edit_channel"]]],false],[0,"\\n\\n    "],[1,[27,"d-button",null,[["action","actionParam","icon","title","label","class"],["test",[23,["channel"]],"rocket","chat_integration.test_channel","chat_integration.test_channel","btn-chat-test"]]],false],[0,"\\n\\n    "],[1,[27,"d-button",null,[["class","action","actionParam","icon","title","label"],["cancel","delete",[23,["channel"]],"trash","chat_integration.delete_channel","chat_integration.delete_channel"]]],false],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"span"],[11,"class","channel-title"],[9],[0,"\\n"],[4,"if",[[23,["channel","error_key"]]],null,{"statements":[[0,"      "],[1,[27,"d-button",null,[["action","actionParam","class","icon"],["showError",[23,["channel"]],"delete btn-danger","exclamation-triangle"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[1,[27,"channel-data",null,[["provider","channel"],[[23,["provider"]],[23,["channel"]]]]],false],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n\\n"],[7,"div"],[11,"class","channel-body"],[9],[0,"\\n  "],[7,"table"],[9],[0,"\\n    "],[7,"tr"],[9],[0,"\\n      "],[7,"th"],[9],[1,[27,"i18n",["chat_integration.rule_table.filter"],null],false],[10],[0,"\\n      "],[7,"th"],[9],[1,[27,"i18n",["chat_integration.rule_table.category"],null],false],[10],[0,"\\n\\n"],[4,"if",[[23,["siteSettings","tagging_enabled"]]],null,{"statements":[[0,"        "],[7,"th"],[9],[1,[27,"i18n",["chat_integration.rule_table.tags"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n      "],[7,"th"],[9],[10],[0,"\\n    "],[10],[0,"\\n\\n"],[4,"each",[[23,["channel","rules"]]],null,{"statements":[[0,"      "],[1,[27,"rule-row",null,[["rule","edit","refresh"],[[22,1,[]],"editRule","refresh"]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n\\n"],[7,"div"],[11,"class","channel-footer"],[9],[0,"\\n  "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n   "],[1,[27,"d-button",null,[["action","actionParam","icon","title","label"],["createRule",[23,["channel"]],"plus","chat_integration.create_rule","chat_integration.create_rule"]]],false],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/channel-details"}}),Ember.TEMPLATES["javascripts/components/channel-data"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["param"],"statements":[[4,"each",[[23,["provider","channel_parameters"]]],null,{"statements":[[4,"unless",[[22,1,["hidden"]]],null,{"statements":[[0,"    "],[7,"span"],[11,"class","field-name"],[9],[1,[27,"i18n",[[27,"concat",["chat_integration.provider.",[23,["channel","provider"]],".param.",[22,1,["key"]],".title"],null]],null],false],[0,":"],[10],[0,"\\n    "],[7,"span"],[11,"class","field-value"],[9],[1,[27,"get",[[23,["channel","data"]],[22,1,["key"]]],null],false],[10],[0,"\\n    "],[7,"br"],[9],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/channel-data"}}),Ember.TEMPLATES["javascripts/components/rule-row"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"td"],[9],[0,"\\n  "],[1,[23,["rule","filterName"]],false],[0,"\\n"],[10],[0,"\\n\\n"],[7,"td"],[9],[0,"\\n"],[4,"if",[[23,["isCategory"]]],null,{"statements":[[4,"if",[[23,["rule","category"]]],null,{"statements":[[0,"      "],[1,[27,"category-link",[[23,["rule","category"]]],[["allowUncategorized","link"],["true","false"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"i18n",["chat_integration.all_categories"],null],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[4,"if",[[23,["isMention"]]],null,{"statements":[[0,"    "],[1,[27,"i18n",["chat_integration.group_mention_template"],[["name"],[[23,["rule","group_name"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["isMessage"]]],null,{"statements":[[0,"    "],[1,[27,"i18n",["chat_integration.group_message_template"],[["name"],[[23,["rule","group_name"]]]]],false],[0,"\\n  "]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]}],[10],[0,"\\n\\n\\n"],[4,"if",[[23,["siteSettings","tagging_enabled"]]],null,{"statements":[[0,"  "],[7,"td"],[9],[0,"\\n"],[4,"if",[[23,["rule","tags"]]],null,{"statements":[[0,"      "],[1,[23,["rule","tags"]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"      "],[1,[27,"i18n",["chat_integration.all_tags"],null],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"td"],[9],[0,"\\n  "],[1,[27,"d-button",null,[["action","actionParam","icon","class","title"],["edit",[23,["rule"]],"pencil","edit","chat_integration.rule_table.edit_rule"]]],false],[0,"\\n  "],[1,[27,"d-button",null,[["action","actionParam","icon","class","title"],["delete",[23,["rule"]],"trash-o","delete","chat_integration.rule_table.delete_rule"]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/rule-row"}}),Ember.TEMPLATES["javascripts/admin/plugins-chat"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["provider"],"statements":[[7,"div"],[11,"id","admin-plugin-chat"],[9],[0,"\\n  "],[7,"div"],[11,"class","admin-controls"],[9],[0,"\\n    "],[7,"div"],[11,"class","span15"],[9],[0,"\\n      "],[7,"ul"],[11,"class","nav nav-pills"],[9],[0,"\\n"],[4,"each",[[23,["model"]]],null,{"statements":[[0,"          "],[1,[27,"nav-item",null,[["route","routeParam","label"],["adminPlugins.chat.provider",[22,1,["name"]],[27,"concat",["chat_integration.provider.",[22,1,["name"]],".title"],null]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n      "],[1,[27,"d-button",null,[["action","icon","title","label"],["showSettings","gear","chat_integration.settings","chat_integration.settings"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n"],[4,"unless",[[23,["model","totalRows"]]],null,{"statements":[[0,"    "],[1,[27,"i18n",["chat_integration.no_providers"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[1,[21,"outlet"],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/plugins-chat"}}),
Ember.TEMPLATES["javascripts/admin/plugins-chat-provider"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["channel"],"statements":[[4,"if",[[23,["anyErrors"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","error"],[9],[0,"\\n    "],[1,[27,"d-icon",["exclamation-triangle"],null],false],[0,"\\n    "],[7,"span"],[11,"class","error-message"],[9],[1,[27,"i18n",["chat_integration.channels_with_errors"],null],false],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"each",[[23,["model","channels"]]],null,{"statements":[[0,"  "],[1,[27,"channel-details",null,[["channel","provider","store","refresh","edit","test","createRule","editRule","showError"],[[22,1,[]],[23,["model","provider"]],[23,["store"]],"refresh","editChannel","testChannel","createRule","editRule","showError"]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"\\n"],[7,"div"],[11,"class","table-footer"],[9],[0,"\\n  "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n     "],[1,[27,"d-button",null,[["id","action","actionParam","icon","title","label"],["create-channel","createChannel",[23,["model","provider"]],"plus","chat_integration.create_channel","chat_integration.create_channel"]]],false],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/plugins-chat-provider"}}),define("discourse/plugins/discourse-checklist/discourse/initializers/checklist",["exports","discourse/lib/plugin-api","discourse/lib/ajax","discourse/lib/text","discourse-common/lib/icon-library"],function(e,t,s,n,a){"use strict";function i(e){e.container.lookup("site-settings:main").checklist_enabled&&e.decorateCooked(o)}function o(e,t){if(t){var i=e.find(".chcklst-box"),o=t.getModel();o.can_edit&&(i.each(function(e,t){$(t).click(function(t){var i=$(t.currentTarget),r=i.hasClass("checked")?"[ ]":"[\\*]";i.after((0,a.iconHTML)("spinner",{class:"fa-spin"})),i.hide();var l=Discourse.getURL("/posts/"+o.id);s.default.ajax(l,{type:"GET",cache:!1}).then(function(t){var s=-1,a=t.raw.replace(/\[(\s|\_|\-|\x|\\?\*)?\]/gi,function(t){return s+=1,s===e?r:t}),i={raw:a,edit_reason:I18n.t("checklist.edit_reason")};n.default.cookAsync?n.default.cookAsync(a).then(function(e){i.cooked=e.string,o.save(i)}):(i.cooked=n.default.cook(a).string,o.save(i))})})}),i.css({cursor:"pointer"}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.checklistSyntax=o,e.default={name:"checklist",initialize:function(){(0,t.withPluginApi)("0.1",function(e){return i(e)})}}}),define("discourse/plugins/discourse-checklist/lib/discourse-markdown/checklist",["exports","pretty-text/pretty-text"],function(e,t){"use strict";function s(e){switch(e.toLowerCase()){case"x":return"checked fa fa-check-square fa-fw";case"*":return"checked fa fa-check-square-o fa-fw";case"-":return"fa fa-minus-square-o fa-fw";case"_":return"fa fa-square fa-fw";default:return"fa fa-square-o fa-fw"}}function n(e,t,n,a){var i=s(n[1]),o=new a.Token("check_open","span",1);o.attrs=[["class","chcklst-box "+i]],e.push(o),o=new a.Token("check_close","span",-1),e.push(o)}function a(e,t){for(var s=null,a=0,i=void 0;i=r.exec(e);){if(i.index>a){s=s||[];var o=new t.Token("text","",0);o.content=e.slice(a,i.index),s.push(o)}a=i.index+i[0].length,s=s||[],n(s,e,i,t)}if(s&&a<e.length){var l=new t.Token("text","",0);l.content=e.slice(a),s.push(l)}return s}function i(e){var t,s,n,i,o,r=e.tokens,l=0;for(s=0,n=r.length;s<n;s++)if("inline"===r[s].type)for(i=r[s].children,t=i.length-1;t>=0;t--)if(o=i[t],l+=o.nesting,"text"===o.type&&0===l){var u=a(o.content,e);u&&(r[s].children=i=e.md.utils.arrayReplaceAt(i,t,u))}}function o(e){e.registerOptions(function(e,t){e.features.checklist=!!t.checklist_enabled}),e.whiteList(["span.chcklst-stroked","span.chcklst-box fa fa-square-o fa-fw","span.chcklst-box fa fa-square fa-fw","span.chcklst-box fa fa-minus-square-o fa-fw","span.chcklst-box checked fa fa-check-square fa-fw","span.chcklst-box checked fa fa-check-square-o fa-fw"]),e.registerPlugin(function(e){e.core.ruler.push("checklist",i)})}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=o;var r=/\[(\s?|_|-|x|\*)\]/gi}),define("discourse/plugins/discourse-data-explorer/admin/adapters/query",["exports","admin/adapters/build-plugin"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.default)("explorer").extend({})}),define("discourse/plugins/discourse-data-explorer/discourse/components/query-result",["exports","discourse/lib/ajax","discourse/models/badge","discourse-common/lib/get-owner","ember-addons/ember-computed-decorators"],function(e,t,s,n,a){"use strict";function i(){return"xxxxxxxx".replace(/[xy]/g,function(){return(16*Math.random()|0).toString(16)})}function o(e,t){var s={};return e.forEach(function(e){s[e.id]=t?t.create(e):e}),s}Object.defineProperty(e,"__esModule",{value:!0});var r,l,u,c=Ember.Component.extend((r=(0,a.default)("content.result_count"),l={layoutName:"explorer-query-result",rows:Ember.computed.alias("content.rows"),columns:Ember.computed.alias("content.columns"),params:Ember.computed.alias("content.params"),explainText:Ember.computed.alias("content.explain"),hasExplain:Ember.computed.notEmpty("content.explain"),resultCount:function(e){return e===this.get("content.default_limit")?I18n.t("explorer.max_result_count",{count:e}):I18n.t("explorer.result_count",{count:e})},colCount:function(){return this.get("content.columns").length}.property("content.columns.length"),duration:function(){return I18n.t("explorer.run_time",{value:I18n.toNumber(this.get("content.duration"),{precision:1})})}.property("content.duration"),parameterAry:function(){var e=[],t=this.get("params");for(var s in t)t.hasOwnProperty(s)&&e.push({key:s,value:t[s]});return e}.property("params.[]"),columnDispNames:function(){return this.get("columns")?this.get("columns").map(function(e){if(e.endsWith("_id"))return e.slice(0,-3);var t=e.indexOf("$");return t>=0?e.substring(t+1):e}):[]}.property("content","columns.[]"),fallbackTemplate:function(){return(0,n.getOwner)(this).lookup("template:explorer/text.raw")}.property(),columnTemplates:function(){var e=this;return this.get("columns")?this.get("columns").map(function(t,s){var a="text";e.get("content.colrender")[s]&&(a=e.get("content.colrender")[s]);var i=(0,n.getOwner)(e).lookup("template:explorer/"+a+".raw");return i||(i=Discourse.RAW_TEMPLATES["javascripts/explorer/"+a]),{name:a,template:i}}):[]}.property("content","columns.[]"),transformedUserTable:function(){return o(this.get("content.relations.user"))}.property("content.relations.user"),transformedBadgeTable:function(){return o(this.get("content.relations.badge"),s.default)}.property("content.relations.badge"),transformedPostTable:function(){return o(this.get("content.relations.post"))}.property("content.relations.post"),transformedTopicTable:function(){return o(this.get("content.relations.topic"))}.property("content.relations.topic"),transformedGroupTable:function(){return o(this.get("site.groups"))}.property("site.groups"),lookupUser:function(e){return this.get("transformedUserTable")[e]},lookupBadge:function(e){return this.get("transformedBadgeTable")[e]},lookupPost:function(e){return this.get("transformedPostTable")[e]},lookupTopic:function(e){return this.get("transformedTopicTable")[e]},lookupGroup:function(e){return this.get("transformedGroupTable")[e]},lookupCategory:function(e){return this.site.get("categoriesById")[e]},downloadResult:function(e){function s(e,t){var s=void 0;s=document.createElement("input"),s.setAttribute("name",e),s.setAttribute("value",t),a.appendChild(s)}var n=i();window.open("data:text/html;base64,"+btoa("<style>body{font-size:36px;display:flex;justify-content:center;align-items:center;}</style><body>Click anywhere to close this window once the download finishes.<script>window.onclick=function(){window.close()};<\/script>"),n);var a=document.createElement("form");a.setAttribute("id","query-download-result"),a.setAttribute("method","post"),a.setAttribute("action",Discourse.getURL("/admin/plugins/explorer/queries/"+this.get("query.id")+"/run."+e+"?download=1")),a.setAttribute("target",n),a.setAttribute("style","display:none;"),s("params",JSON.stringify(this.get("params"))),s("explain",this.get("hasExplain")),s("limit","1000000"),(0,t.ajax)("/session/csrf.json").then(function(e){s("authenticity_token",e.csrf),document.body.appendChild(a),a.submit(),Ember.run.next("afterRender",function(){document.body.removeChild(a)})})},actions:{downloadResultJson:function(){this.downloadResult("json")},downloadResultCsv:function(){this.downloadResult("csv")}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(l,"resultCount",[r],(u=Object.getOwnPropertyDescriptor(l,"resultCount"),u=u?u.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return u}}),l),l));e.default=c}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema",["exports","discourse/lib/debounce"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({actions:{expandSchema:function(){this.set("hideSchema",!1)},collapseSchema:function(){this.set("hideSchema",!0)}},transformedSchema:function(){var e=this.get("schema");for(var t in e)e.hasOwnProperty(t)&&e[t].forEach(function(e){var t=[];e.primary&&t.push("primary key"),e.is_nullable&&t.push("null"),e.column_default&&t.push("default "+e.column_default),e.fkey_info&&t.push("fkey "+e.fkey_info),e.denormal&&t.push("denormal "+e.denormal);var s=t.join(", ");s&&(e.notes=s),(e.enum||e.column_desc)&&(e.havepopup=!0),e.havetypeinfo=!!(e.notes||e.enum||e.column_desc)});return e}.property("schema"),rfilter:function(){if(!Ember.isBlank(this.get("filter")))return new RegExp(this.get("filter"))}.property("filter"),filterTables:function(e){var t=[],s=this.get("rfilter"),n=!!s;for(var a in e)e.hasOwnProperty(a)&&(n?s.source===a||s.source+"s"===a?t.unshift({name:a,columns:e[a],open:n}):s.test(a)?t.push({name:a,columns:e[a],open:n}):function(){var i=[];e[a].forEach(function(e){s.source===e.column_name?i.unshift(e):s.test(e.column_name)&&i.push(e)}),Ember.isEmpty(i)||t.push({name:a,columns:i,open:n})}():t.push({name:a,columns:e[a],open:!1}));return t},triggerFilter:(0,t.default)(function(){this.set("filteredTables",this.filterTables(this.get("transformedSchema"))),this.set("loading",!1)},500).observes("filter"),setLoading:function(){this.set("loading",!0)}.observes("filter"),init:function(){this._super(),this.set("loading",!0),this.triggerFilter()}})}),define("discourse/plugins/discourse-data-explorer/discourse/components/param-field",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.TextField.extend({value:function(e,t){return arguments.length>1&&(this.get("params")[this.get("pname")]=t),this.get("params")[this.get("pname")]}.property("params","pname")})}),define("discourse/plugins/discourse-data-explorer/discourse/components/hljs-code-view",["exports","discourse/lib/debounce","discourse/lib/highlight-syntax","discourse-common/lib/buffered-render"],function(e,t,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend((0,n.bufferedRender)({buildBuffer:function(e){e.push("<pre><code class='"+this.get("codeClass")+"'>"),e.push(Handlebars.Utils.escapeExpression(this.get("value"))),e.push("</code></pre>")},_refreshHighlight:(0,t.default)(function(){this.rerenderBuffer()},50).observes("value"),_applyHighlight:function(){(0,s.default)(this.$())}.on("didInsertElement")}))}),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input",["exports"],function(e){"use strict";function t(){try{var e=document.createElement("input");return e.attributes.type="time",e.attributes.type="date",!0}catch(e){return!1}}Object.defineProperty(e,"__esModule",{value:!0});var s=Discourse.Category,n={int:"int",bigint:"int",boolean:"boolean",string:"generic",time:"generic",date:"generic",datetime:"generic",double:"string",user_id:"user_id",post_id:"string",topic_id:"generic",category_id:"generic",group_id:"generic",badge_id:"generic",int_list:"generic",string_list:"generic",user_list:"user_list"};e.default=Ember.Component.extend({classNameBindings:["valid:valid:invalid",":param"],boolTypes:[{name:I18n.t("explorer.types.bool.true"),id:"Y"},{name:I18n.t("explorer.types.bool.false"),id:"N"},{name:I18n.t("explorer.types.bool.null_"),id:"#null"}],value:Ember.computed("params","info.identifier",{get:function(){return this.get("params")[this.get("info.identifier")]},set:function(e,t){return this.get("params")[this.get("info.identifier")]=t.toString(),t}}),valueBool:Ember.computed("params","info.identifier",{get:function(){return"false"!==this.get("params")[this.get("info.identifier")]},set:function(e,t){return t=!!t,this.get("params")[this.get("info.identifier")]=t.toString(),t}}),valid:function(){var e=this.get("info.type"),t=this.get("value");if(Ember.isEmpty(this.get("value")))return this.get("info.nullable");var n=parseInt(t,10),a=!isNaN(n)&&n<2147483648&&n>-2147483649,i=/^\d+$/.test(t);switch(e){case"int":return/^-?\d+$/.test(t)&&a;case"bigint":return/^-?\d+$/.test(t)&&!isNaN(n);case"boolean":return/^Y|N|#null|true|false/.test(t);case"double":return!isNaN(parseFloat(t))||/^(-?)Inf(inity)?$/i.test(t)||/^(-?)NaN$/i.test(t);case"int_list":return t.split(",").every(function(e){return/^(-?\d+|null)$/.test(e.trim())});case"post_id":return i||/\d+\/\d+(\?u=.*)?$/.test(t);case"category_id":if(i||t===t.dasherize()||this.set("value",t.dasherize()),i)return!!this.site.categories.find(function(e){return e.get("id")===n});if(/\//.test(t)){var o=/(.*)\/(.*)/.exec(t);if(!o)return!1;return!!s.findBySlug(o[2].dasherize(),o[1].dasherize())}return!!s.findBySlug(t.dasherize());case"group_id":var r=this.site.get("groups");return i?!!r.find(function(e){return e.id===n}):!!r.find(function(e){return e.name===t})}return!0}.property("value","info.type","info.nullable"),layoutType:function(){var e=this.get("info.type");return"time"!==e&&"date"!==e||t()?n[e]?n[e]:"generic":"string"}.property("info.type"),layoutName:function(){return"admin/components/q-params/"+this.get("layoutType")}.property("layoutType")})}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema-enuminfo",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({tagName:"ol",enuminfo:function(){var e=this.get("col.enum"),t=[];for(var s in e)e.hasOwnProperty(s)&&t.push({value:s,name:e[s]});return t}.property("col.enum")})}),define("discourse/plugins/discourse-data-explorer/discourse/components/query-row-content",["exports","discourse/helpers/category-link","discourse/lib/formatter","discourse-common/lib/buffered-render","discourse-common/lib/icon-library"],function(e,t,s,n,a){"use strict";function i(e,t){if(e=Ember.get(t.contexts[0],e),Ember.isEmpty(e))return"";if(e.indexOf("fa-")>-1){var s=(0,a.iconHTML)((0,a.convertIconClass)(e));return new Handlebars.SafeString(s)}return new Handlebars.SafeString("<img src='"+e+"'>")}function o(e,s){var n=Ember.get(s.contexts[0],e);return(0,t.categoryLinkHTML)(n,{allowUncategorized:!0})}function r(e,t){var n=Ember.get(t.contexts[0],e);return new Handlebars.SafeString((0,s.autoUpdatingRelativeAge)(new Date(n),{title:!0}))}Object.defineProperty(e,"__esModule",{value:!0});var l=Handlebars.Utils.escapeExpression,u=Ember.Component.extend((0,n.bufferedRender)({tagName:"tr",buildBuffer:function(e){var t=this,s=this.get("row"),n=t.get("parentView"),a=this.get("fallbackTemplate"),u={"icon-or-image":i,"category-link":o,reltime:r},c=this.get("columnTemplates").map(function(e,t){var i=s[t],o=parseInt(i),r={value:i,id:o,baseuri:"/"===Discourse.BaseUri?"":Discourse.BaseUri},c={};if(null===s[t])return"NULL";if("text"===e.name)return l(s[t]);n["lookup"+e.name.capitalize()]&&(r[e.name]=n["lookup"+e.name.capitalize()](o)),"category"!==e.name&&"badge"!==e.name&&"reltime"!==e.name||(c.helpers=u);try{return new Handlebars.SafeString((e.template||a)(r,c))}catch(e){return"error"}});e.push("<td>"+c.join("</td><td>")+"</td>")}}));e.default=u}),define("discourse/plugins/discourse-data-explorer/discourse/components/json-file-uploader",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({fileInput:null,loading:!1,expectedRootObjectName:null,hover:0,classNames:["json-uploader"],_initialize:function(){var e=this.$(),t=this,s=e.find("#js-file-input");this.set("fileInput",s[0]),s.on("change",function(){t.fileSelected(this.files)}),e.on("dragover",function(e){return e.preventDefault&&e.preventDefault(),!1}),e.on("dragenter",function(e){return e.preventDefault&&e.preventDefault(),t.set("hover",t.get("hover")+1),!1}),e.on("dragleave",function(e){return e.preventDefault&&e.preventDefault(),t.set("hover",t.get("hover")-1),!1}),e.on("drop",function(e){return e.preventDefault&&e.preventDefault(),t.set("hover",0),t.fileSelected(e.dataTransfer.files),!1})}.on("didInsertElement"),accept:function(){return".json,application/json,application/x-javascript,text/json"+(this.get("extension")?","+this.get("extension"):"")}.property("extension"),setReady:function(){var e=void 0;try{e=JSON.parse(this.get("value"))}catch(e){return void this.set("ready",!1)}var t=e[this.get("expectedRootObjectName")];null!==t&&void 0!==t?this.set("ready",!0):this.set("ready",!1)}.observes("destination","expectedRootObjectName"),actions:{selectFile:function(){$(this.get("fileInput")).click()}},fileSelected:function(e){for(var t=this,s=[],n=0;n<e.length;n++)s[n]=e[n];var a=/\.(json|txt)$/;s=s.filter(function(e){return!!a.test(e.name)||"text/plain"===e.type});var i=e[0];this.set("loading",!0);var o=new FileReader;o.onload=function(e){t.set("value",e.target.result),t.set("loading",!1)},o.readAsText(i)}})}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-container",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";function s(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var n,a,i;e.default=Ember.Component.extend((n=(0,t.observes)("hideSchema"),a=(0,t.observes)("everEditing"),i={_onHideSchema:function(){this.appEvents.trigger("ace:resize")},_onInsertEditor:function(){var e=this;Ember.run.schedule("afterRender",this,function(){return e._bindControls()})},_bindControls:function(){if("inDOM"===this._state){var e=this.$().find(".query-editor");if(e.length){var t=this.get("grippie");t&&(t.off("mousedown mousemove mouseup"),e.off("mousemove mouseup"));var s=e.find(".grippie"),n=e.find(".ace-wrapper,.grippie-target"),a=$("body"),i=this;this.set("grippie",s);var o=function(e){var t=i.get("startY")-e.screenY,s=i.get("startSize")-t;n.height(s),i.appEvents.trigger("ace:resize")},r=void 0;r=function(e){o(e),a.off("mousemove",o),a.off("mouseup",r),i.set("startY",null),i.set("startSize",null)},s.on("mousedown",function(e){i.set("startY",e.screenY),i.set("startSize",n.height()),a.on("mousemove",o),a.on("mouseup",r),e.preventDefault()})}}},didInsertElement:function(){this._super(),this._bindControls()},willDestroyElement:function(){this._super(),this.get("everEditing")&&(this.get("grippie").off("mousedown"),this.set("grippie",null))}},s(i,"_onHideSchema",[n],Object.getOwnPropertyDescriptor(i,"_onHideSchema"),i),s(i,"_onInsertEditor",[a],Object.getOwnPropertyDescriptor(i,"_onInsertEditor"),i),i))}),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema-onetable",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend({classNameBindings:[":schema-table","open"],tagName:"li",open:Ember.computed.alias("table.open"),_bindClicks:function(){var e=this;this.$().find(".schema-table-name").click(function(t){e.set("open",!e.get("open")),t.preventDefault()})}.on("didInsertElement"),_cleanup:function(){this.$().find(".schema-table-name").off("click")}.on("willDestroyElement")})}),define("discourse/plugins/discourse-data-explorer/discourse/initializers/initialize-data-explorer",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"initialize-data-explorer",initialize:function(e){e.lookup("store:main").addPluralization("query","queries"),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var s=this.toString();(void 0===t||t>s.length)&&(t=s.length),t-=e.length;var n=s.indexOf(e,t);return-1!==n&&n===t})}}}),define("discourse/plugins/discourse-data-explorer/discourse/routes/admin-plugins-explorer",["exports","discourse/lib/ajax"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Discourse.Route.extend({controllerName:"admin-plugins-explorer",model:function(){var e=this.store.findAll("query"),s=(0,t.ajax)("/admin/plugins/explorer/schema.json",{cache:!0});return e.then(function(e){return e.forEach(function(e){return e.markNotDirty()}),s.then(function(t){return{model:e,schema:t}})}).catch(function(){return s.catch(function(){}),{model:null,schema:null,disallow:!0}})},setupController:function(e,t){e.setProperties(t)},actions:{refreshModel:function(){return this.refresh(),!1}}})}),define("discourse/plugins/discourse-data-explorer/discourse/lib/binary-search",["exports"],function(e){"use strict";function t(e,t,s){for(var n,a=0,i=e.length-1,o=s||"id";a<=i;){if(n=Math.floor((a+i)/2),Ember.get(e[n],o)===t)return n;Ember.get(e[n],o)<t?a=n+1:i=n-1}return-1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}),define("discourse/plugins/discourse-data-explorer/discourse/explorer-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("explorer")}}}),Discourse.RAW_TEMPLATES["javascripts/explorer/post"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,s,n,a){var i;return'  <aside class="quote" data-post="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"post.post_number",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'" data-topic="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"post.topic_id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">\n    <div class="title">\n      <div class="quote-controls">\n        <a href="/t/via-quote/'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"post.topic_id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"post.post_number",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n          title="go to the quoted post"\n          class="quote-other-topic">\n        </a>\n      </div>\n      <a class="result-post-link" href="/t/'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"post.topic_id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"post.post_number",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">\n        '+e.escapeExpression((s.avatar||t&&t.avatar||s.helperMissing).call(null!=t?t:e.nullContext||{},"post",{name:"avatar",hash:{imageSize:"tiny"},hashTypes:{imageSize:"StringLiteral"},hashContexts:{imageSize:t},types:["PathExpression"],contexts:[t],data:a}))+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"post.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+":\n      </a>\n    </div>\n    <blockquote>\n      <p>\n        "+(null!=(i=s.get.call(null!=t?t:e.nullContext||{},"post.excerpt",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))?i:"")+"\n      </p>\n    </blockquote>\n  </aside>\n"},3:function(e,t,s,n,a){return"  "+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){var i;return null!=(i=s.if.call(null!=t?t:e.nullContext||{},"post",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/user"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,s,n,a){return'  <a href="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/users/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"user.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'/activity"\n     data-user-card="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"user.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression((s.avatar||t&&t.avatar||s.helperMissing).call(null!=t?t:e.nullContext||{},"user",{name:"avatar",hash:{imageSize:"tiny"},hashTypes:{imageSize:"StringLiteral"},hashContexts:{imageSize:t},types:["PathExpression"],contexts:[t],data:a}))+" "+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"user.username",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},3:function(e,t,s,n,a){return"  "+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){var i;return null!=(i=s.if.call(null!=t?t:e.nullContext||{},"user",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/text"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){return e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"value",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/reltime"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){return e.escapeExpression((s.reltime||t&&t.reltime||s.helperMissing).call(null!=t?t:e.nullContext||{},"value",{name:"reltime",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/group"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,s,n,a){return'  <a href="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/groups/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"group.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"group.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},3:function(e,t,s,n,a){return"  "+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){var i;return null!=(i=s.if.call(null!=t?t:e.nullContext||{},"group",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/html"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){var i;return(null!=(i=s.get.call(null!=t?t:e.nullContext||{},"value",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))?i:"")+"\n"},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/badge"]=requirejs("discourse-common/lib/raw-handlebars").template({compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){return'<a href="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/badges/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"badge.id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"badge.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n   class="user-badge '+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"badge.badgeTypeClassName",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n   title="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"badge.displayDescription",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n   data-badge-name="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"badge.name",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression((s["icon-or-image"]||t&&t["icon-or-image"]||s.helperMissing).call(null!=t?t:e.nullContext||{},"badge.icon",{name:"icon-or-image",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'\n<span class="badge-display-name">'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"badge.displayName",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</span></a>\n"},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/category"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,s,n,a){return"  "+e.escapeExpression((s["category-link"]||t&&t["category-link"]||s.helperMissing).call(null!=t?t:e.nullContext||{},"category",{name:"category-link",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"\n"},3:function(e,t,s,n,a){return'  <a href="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/t/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){var i;return null!=(i=s.if.call(null!=t?t:e.nullContext||{},"category",{name:"if",hash:{},
hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Discourse.RAW_TEMPLATES["javascripts/explorer/topic"]=requirejs("discourse-common/lib/raw-handlebars").template({1:function(e,t,s,n,a){var i;return'  <a href="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/t/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"topic.slug",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"topic.id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'"\n          >'+(null!=(i=s.get.call(null!=t?t:e.nullContext||{},"topic.fancy_title",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))?i:"")+"</a> ("+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"topic.posts_count",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+")\n"},3:function(e,t,s,n,a){return'  <a href="'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"baseuri",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"/t/"+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+'">'+e.escapeExpression(s.get.call(null!=t?t:e.nullContext||{},"id",{name:"get",hash:{},hashTypes:{},hashContexts:{},types:["PathExpression"],contexts:[t],data:a}))+"</a>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,s,n,a){var i;return null!=(i=s.if.call(null!=t?t:e.nullContext||{},"topic",{name:"if",hash:{},hashTypes:{},hashContexts:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),types:["PathExpression"],contexts:[t],data:a}))?i:""},useData:!0}),Ember.TEMPLATES["javascripts/components/explorer-schema"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["table"],"statements":[[4,"if",[[23,["hideSchema"]]],null,{"statements":[[0,"  "],[1,[27,"d-button",null,[["action","icon","class"],[[27,"action",[[22,0,[]],"expandSchema"],null],"chevron-left","no-text unhide"]]],false],[0,"\\n"]],"parameters":[]},null],[7,"div"],[12,"class",[28,[[27,"if",[[23,["hideSchema"]],"hidden"],null]]]],[9],[0,"\\n  "],[1,[27,"text-field",null,[["value","placeholderKey"],[[23,["filter"]],"explorer.schema.filter"]]],false],[0,"\\n  "],[1,[27,"d-button",null,[["action","icon","class"],[[27,"action",[[22,0,[]],"collapseSchema"],null],"chevron-right","no-text"]]],false],[0,"\\n  "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["loading"]]]]],false],[0,"\\n  "],[7,"div"],[11,"class","schema-container"],[9],[0,"\\n    "],[7,"ul"],[9],[0,"\\n"],[4,"each",[[23,["filteredTables"]]],null,{"statements":[[0,"        "],[1,[27,"explorer-schema-onetable",null,[["table"],[[22,1,[]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/explorer-schema"}}),Ember.TEMPLATES["javascripts/components/explorer-schema-enuminfo"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["enum"],"statements":[[4,"each",[[23,["enuminfo"]]],null,{"statements":[[0,"  "],[7,"li"],[12,"value",[28,[[22,1,["value"]]]]],[9],[0,"\\n    "],[1,[22,1,["name"]],false],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[1]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/explorer-schema-enuminfo"}}),Ember.TEMPLATES["javascripts/components/explorer-schema-onetable"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["col"],"statements":[[7,"div"],[11,"class","schema-table-name"],[9],[0,"\\n"],[4,"if",[[23,["table","open"]]],null,{"statements":[[0,"    "],[1,[27,"d-icon",["caret-down"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"d-icon",["caret-right"],null],false],[0,"\\n"]],"parameters":[]}],[0,"  "],[1,[23,["table","name"]],false],[0,"\\n"],[10],[0,"\\n"],[7,"div"],[11,"class","schema-table-cols"],[9],[0,"\\n"],[4,"if",[[23,["table","open"]]],null,{"statements":[[0,"    "],[7,"dl"],[9],[0,"\\n"],[4,"each",[[23,["table","columns"]]],null,{"statements":[[0,"      "],[7,"div"],[9],[0,"\\n      "],[7,"dt"],[12,"class",[28,[[27,"if",[[22,1,["sensitive"]],"sensitive"],null]]]],[12,"title",[28,[[27,"if",[[22,1,["sensitive"]],[27,"i18n",["explorer.schema.sensitive"],null]],null]]]],[9],[0,"\\n"],[4,"if",[[22,1,["sensitive"]]],null,{"statements":[[0,"          "],[1,[27,"d-icon",["warning"],null],false],[0,"\\n"]],"parameters":[]},null],[0,"        "],[1,[22,1,["column_name"]],false],[0,"\\n      "],[10],[0,"\\n      "],[7,"dd"],[9],[0,"\\n        "],[1,[22,1,["data_type"]],false],[0,"\\n"],[4,"if",[[22,1,["havetypeinfo"]]],null,{"statements":[[0,"          "],[7,"br"],[9],[10],[0,"\\n"],[4,"if",[[22,1,["havepopup"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","popup-info"],[9],[0,"\\n              "],[1,[27,"d-icon",["info"],null],false],[0,"\\n              "],[7,"div"],[11,"class","popup"],[9],[0,"\\n                "],[1,[22,1,["column_desc"]],false],[0,"\\n"],[4,"if",[[22,1,["enum"]]],null,{"statements":[[0,"                  "],[1,[27,"explorer-schema-enuminfo",null,[["col"],[[22,1,[]]]]],false],[0,"\\n"]],"parameters":[]},null],[0,"              "],[10],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"          "],[7,"span"],[11,"class","schema-typenotes"],[9],[0,"\\n            "],[1,[22,1,["notes"]],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/explorer-schema-onetable"}}),Ember.TEMPLATES["javascripts/components/json-file-uploader"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"div"],[11,"class","jsfu-shade-container"],[9],[0,"\\n  "],[7,"div"],[11,"class","jsfu-file"],[9],[0,"\\n    "],[7,"input"],[11,"id","js-file-input"],[11,"style","display:none;"],[12,"accept",[21,"accept"]],[11,"type","file"],[9],[10],[0,"\\n    "],[1,[27,"d-button",null,[["class","action","class","icon","label"],["fileSelect",[27,"action",[[22,0,[]],"selectFile"],null],"","upload","upload_selector.select_file"]]],false],[0,"\\n    "],[1,[27,"conditional-loading-spinner",null,[["condition","size"],[[23,["loading"]],"small"]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","jsfu-separator"],[9],[0,"\\n    "],[7,"small"],[9],[0,"\\n      "],[1,[27,"i18n",["alternation"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[11,"class","jsfu-paste"],[9],[0,"\\n    "],[1,[27,"textarea",null,[["value"],[[23,["value"]]]]],false],[0,"\\n  "],[10],[0,"\\n  "],[7,"div"],[12,"class",[28,["jsfu-shade ",[27,"if",[[23,["hover"]],"","hidden"],null]]]],[9],[7,"span"],[11,"class","text"],[9],[1,[27,"d-icon",["upload"],null],false],[10],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/json-file-uploader"}}),Ember.TEMPLATES["javascripts/explorer-query-result"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["row","col"],"statements":[[7,"div"],[11,"class","result-info"],[9],[0,"\\n  "],[1,[27,"d-button",null,[["action","icon","label"],[[27,"action",[[22,0,[]],"downloadResultJson"],null],"download","explorer.download_json"]]],false],[0,"\\n  "],[1,[27,"d-button",null,[["action","icon","label"],[[27,"action",[[22,0,[]],"downloadResultCsv"],null],"download","explorer.download_csv"]]],false],[0,"\\n"],[10],[0,"\\n\\n"],[7,"div"],[11,"class","result-about"],[9],[0,"\\n  "],[1,[21,"resultCount"],false],[0,"\\n  "],[1,[21,"duration"],false],[0,"\\n"],[10],[0,"\\n\\n"],[7,"br"],[9],[10],[4,"if",[[23,["hasExplain"]]],null,{"statements":[[0,"  "],[7,"pre"],[11,"class","result-explain"],[9],[7,"code"],[9],[1,[23,["content","explain"]],false],[0,"\\n  "],[10],[10]],"parameters":[]},null],[0,""],[7,"br"],[9],[10],[0,"\\n\\n"],[7,"table"],[9],[0,"\\n  "],[7,"thead"],[9],[0,"\\n  "],[7,"tr"],[11,"class","headers"],[9],[0,"\\n"],[4,"each",[[23,["columnDispNames"]]],null,{"statements":[[0,"      "],[7,"th"],[9],[1,[22,2,[]],false],[10],[0,"\\n"]],"parameters":[2]},null],[0,"  "],[10],[0,"\\n  "],[10],[0,"\\n  "],[7,"tbody"],[9],[0,"\\n"],[4,"each",[[23,["rows"]]],null,{"statements":[[0,"    "],[1,[27,"query-row-content",null,[["row","fallbackTemplate","columnTemplates"],[[22,1,[]],[23,["fallbackTemplate"]],[23,["columnTemplates"]]]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/explorer-query-result"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/boolean"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["info","nullable"]]],null,{"statements":[[0,"  "],[1,[27,"combo-box",null,[["valueAttribute","value","nameProperty","content"],["id",[23,["value"]],"name",[23,["boolTypes"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"  "],[1,[27,"input",null,[["type","checked"],["checkbox",[23,["valueBool"]]]]],false],[0,"\\n"]],"parameters":[]}],[7,"span"],[11,"class","param-name"],[9],[1,[23,["info","identifier"]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/components/q-params/boolean"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/user_id"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"user-selector",null,[["usernames","single"],[[23,["value"]],"true"]]],false],[0,"\\n"],[7,"span"],[11,"class","param-name"],[9],[1,[23,["info","identifier"]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/components/q-params/user_id"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/int"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"input",null,[["type","value"],["number",[23,["value"]]]]],false],[0,"\\n"],[7,"span"],[11,"class","param-name"],[9],[1,[23,["info","identifier"]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/components/q-params/int"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/generic"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"text-field",null,[["value"],[[23,["value"]]]]],false],[0,"\\n"],[7,"span"],[11,"class","param-name"],[9],[1,[23,["info","identifier"]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/components/q-params/generic"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/user_list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"user-selector",null,[["usernames"],[[23,["value"]]]]],false],[0,"\\n"],[7,"span"],[11,"class","param-name"],[9],[1,[23,["info","identifier"]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/components/q-params/user_list"}}),Ember.TEMPLATES["javascripts/admin/components/q-params/string"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"text-field",null,[["value","type"],[[23,["value"]],"text"]]],false],[0,"\\n"],[7,"span"],[11,"class","param-name"],[9],[1,[23,["info","identifier"]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/components/q-params/string"}}),Ember.TEMPLATES["javascripts/admin/plugins-explorer"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["query","err","pinfo"],"statements":[[4,"explorer-container",null,[["hideSchema","everEditing"],[[23,["hideSchema"]],[23,["everEditing"]]]],{"statements":[[4,"if",[[23,["disallow"]]],null,{"statements":[[0,"    "],[7,"h1"],[9],[1,[27,"i18n",["explorer.admins_only"],null],false],[10],[0,"\\n"]],"parameters":[]},{"statements":[[4,"unless",[[23,["selectedQueryId"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","query-list"],[9],[0,"\\n        "],[1,[27,"text-field",null,[["value","placeholderKey"],[[23,["search"]],"explorer.search_placeholder"]]],false],[0,"\\n        "],[1,[27,"d-button",null,[["action","icon","class"],[[27,"action",[[22,0,[]],"showCreate"],null],"plus","no-text btn-right"]]],false],[0,"\\n        "],[1,[27,"d-button",null,[["action","label","icon"],[[27,"action",[[22,0,[]],"importQuery"],null],"explorer.import.label","upload"]]],false],[0,"\\n      "],[10],[0,"\\n\\n"],[4,"if",[[23,["showCreate"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","query-create"],[9],[0,"\\n          "],[1,[27,"text-field",null,[["value","placeholderKey"],[[23,["newQueryName"]],"explorer.create_placeholder"]]],false],[0,"\\n          "],[1,[27,"d-button",null,[["action","disabled","label","icon"],[[27,"action",[[22,0,[]],"create"],null],[23,["createDisabled"]],"explorer.create","plus"]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["othersDirty"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","warning"],[9],[0,"\\n          "],[1,[27,"d-icon",["warning"],null],false],[0,"\\n          "],[1,[27,"i18n",["explorer.others_dirty"],null],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["model","length"]]],null,{"statements":[[4,"unless",[[23,["selectedItem","fake"]]],null,{"statements":[[0,"        "],[7,"div"],[12,"class",[28,["query-edit ",[27,"if",[[23,["editName"]],"editing"],null]]]],[9],[0,"\\n"],[4,"if",[[23,["selectedItem"]]],null,{"statements":[[4,"if",[[23,["editing"]]],null,{"statements":[[0,"              "],[7,"div"],[11,"class","name"],[9],[0,"\\n                  "],[1,[27,"d-button",null,[["action","icon","class"],[[27,"action",[[22,0,[]],"goHome"],null],"chevron-left","previous"]]],false],[0,"\\n                "],[7,"div"],[11,"class","name-text-field"],[9],[0,"\\n                  "],[1,[27,"text-field",null,[["value"],[[23,["selectedItem","name"]]]]],false],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n              "],[7,"div"],[11,"class","desc"],[9],[0,"\\n                "],[1,[27,"textarea",null,[["value","placeholder"],[[23,["selectedItem","description"]],[27,"i18n",["explorer.description_placeholder"],null]]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"div"],[11,"class","name"],[9],[0,"\\n                "],[1,[27,"d-button",null,[["action","icon","class"],[[27,"action",[[22,0,[]],"goHome"],null],"chevron-left","previous"]]],false],[0,"\\n                "],[7,"h1"],[9],[1,[23,["selectedItem","name"]],false],[0,"\\n"],[4,"unless",[[23,["editDisabled"]]],null,{"statements":[[0,"                    "],[7,"a"],[3,"action",[[22,0,[]],"editName"],[["class"],["edit-query-name"]]],[9],[1,[27,"d-icon",["pencil"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"                "],[10],[0,"\\n              "],[10],[0,"\\n              "],[7,"div"],[11,"class","desc"],[9],[0,"\\n                "],[1,[23,["selectedItem","description"]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}],[0,"\\n"],[4,"if",[[23,["everEditing"]]],null,{"statements":[[0,"              "],[7,"div"],[12,"class",[28,["query-editor ",[27,"if",[[23,["hideSchema"]],"no-schema"],null]]]],[9],[0,"\\n                "],[7,"div"],[11,"class","right-panel"],[9],[0,"\\n                  "],[7,"div"],[11,"class","schema grippie-target"],[9],[0,"\\n                    "],[1,[27,"explorer-schema",null,[["schema","hideSchema"],[[23,["schema"]],[23,["hideSchema"]]]]],false],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n                "],[7,"div"],[11,"class","editor-panel"],[9],[0,"\\n                  "],[1,[27,"ace-editor",null,[["content","mode"],[[23,["selectedItem","sql"]],"sql"]]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"div"],[11,"class","grippie"],[9],[10],[0,"\\n                "],[7,"div"],[11,"class","clear"],[9],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[7,"div"],[11,"class","sql"],[9],[0,"\\n                "],[1,[27,"hljs-code-view",null,[["value","codeClass"],[[23,["selectedItem","sql"]],"sql"]]],false],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[]}],[0,"\\n            "],[7,"div"],[11,"class","clear"],[9],[10],[0,"\\n\\n            "],[7,"div"],[11,"class","pull-left"],[9],[0,"\\n"],[4,"if",[[23,["everEditing"]]],null,{"statements":[[0,"                "],[1,[27,"d-button",null,[["action","label","disabled"],[[27,"action",[[22,0,[]],"save"],null],"explorer.save",[23,["saveDisable"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"unless",[[23,["editDisabled"]]],null,{"statements":[[0,"                  "],[1,[27,"d-button",null,[["action","label","icon"],[[27,"action",[[22,0,[]],"editName"],null],"explorer.edit","pencil"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"              "],[1,[27,"d-button",null,[["action","label","disabled","icon"],[[27,"action",[[22,0,[]],"download"],null],"explorer.export",[23,["runDisabled"]],"download"]]],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n"],[4,"if",[[23,["selectedItem","destroyed"]]],null,{"statements":[[0,"                "],[1,[27,"d-button",null,[["action","class","icon","label"],[[27,"action",[[22,0,[]],"recover"],null],"","undo","explorer.recover"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"if",[[23,["everEditing"]]],null,{"statements":[[0,"                  "],[1,[27,"d-button",null,[["action","icon","label","disabled"],[[27,"action",[[22,0,[]],"discard"],null],"undo","explorer.undo",[23,["saveDisabled"]]]]],false],[0,"\\n"]],"parameters":[]},null],[4,"unless",[[23,["editDisabled"]]],null,{"statements":[[0,"                  "],[1,[27,"d-button",null,[["action","class","icon","label"],[[27,"action",[[22,0,[]],"destroy"],null],"btn-danger","trash","explorer.delete"]]],false],[0,"\\n"]],"parameters":[]},null]],"parameters":[]}],[0,"            "],[10],[0,"\\n            "],[7,"div"],[11,"class","clear"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n\\n        "],[7,"form"],[11,"class","query-run"],[3,"action",[[22,0,[]],"run"],[["on"],["submit"]]],[9],[0,"\\n"],[4,"if",[[23,["selectedItem","hasParams"]]],null,{"statements":[[0,"            "],[7,"div"],[11,"class","query-params"],[9],[0,"\\n"],[4,"each",[[23,["selectedItem","param_info"]]],null,{"statements":[[0,"                "],[1,[27,"param-input",null,[["params","info"],[[23,["selectedItem","params"]],[22,3,[]]]]],false],[0,"\\n"]],"parameters":[3]},null],[0,"            "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["runDisabled"]]],null,{"statements":[[4,"if",[[23,["saveDisabled"]]],null,{"statements":[[0,"              "],[1,[27,"d-button",null,[["label","disabled","class"],["explorer.run","true","btn-primary"]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"              "],[1,[27,"d-button",null,[["action","icon","label","class"],[[27,"action",[[22,0,[]],"saverun"],null],"play","explorer.saverun","btn-primary"]]],false],[0,"\\n"]],"parameters":[]}]],"parameters":[]},{"statements":[[0,"            "],[1,[27,"d-button",null,[["action","icon","label","disabled","class","type"],[[27,"action",[[22,0,[]],"run"],null],"play","explorer.run",[23,["runDisabled"]],"btn-primary","submit"]]],false],[0,"\\n"]],"parameters":[]}],[0,"          "],[7,"label"],[11,"class","query-plan"],[9],[1,[27,"input",null,[["type","checked","name"],["checkbox",[23,["explain"]],"explain"]]],false],[0," "],[1,[27,"i18n",["explorer.explain_label"],null],false],[10],[0,"\\n        "],[10],[0,"\\n\\n        "],[7,"hr"],[9],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[1,[27,"conditional-loading-spinner",null,[["condition"],[[23,["loading"]]]]],false],[0,"\\n"],[4,"unless",[[23,["selectedItem","fake"]]],null,{"statements":[[4,"if",[[23,["results"]]],null,{"statements":[[0,"          "],[7,"div"],[11,"class","query-results"],[9],[0,"\\n"],[4,"if",[[23,["showResults"]]],null,{"statements":[[0,"              "],[1,[27,"query-result",null,[["query","content"],[[23,["selectedItem"]],[23,["results"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[4,"each",[[23,["results","errors"]]],null,{"statements":[[0,"                "],[7,"pre"],[11,"class","query-error"],[9],[7,"code"],[9],[1,[22,2,[]],false],[10],[10],[0,""]],"parameters":[2]},null]],"parameters":[]}],[0,"          "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"if",[[23,["showRecentQueries"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","container"],[9],[0,"\\n        "],[7,"table"],[11,"class","recent-queries"],[9],[0,"\\n          "],[7,"thead"],[11,"class","heading-container"],[9],[0,"\\n            "],[7,"th"],[11,"class","col heading name"],[9],[0,"\\n              "],[7,"div"],[11,"class","heading-toggle"],[3,"action",[[22,0,[]],"sortByProperty","name"]],[9],[0,"\\n                "],[1,[27,"directory-toggle",null,[["field","labelKey","order","asc"],["name","explorer.query_name",[23,["order"]],[23,["asc"]]]]],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n            "],[7,"th"],[11,"class","col heading created-by"],[9],[0,"\\n              "],[7,"div"],[11,"class","heading-toggle"],[3,"action",[[22,0,[]],"sortByProperty","username"]],[9],[0,"\\n                "],[1,[27,"directory-toggle",null,[["field","labelKey","order","asc"],["username","explorer.query_user",[23,["order"]],[23,["asc"]]]]],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n            "],[7,"th"],[11,"class","col heading created-at"],[9],[0,"\\n              "],[7,"div"],[11,"class","heading-toggle"],[3,"action",[[22,0,[]],"sortByProperty","last_run_at"]],[9],[0,"\\n                "],[1,[27,"directory-toggle",null,[["field","labelKey","order","asc"],["last_run_at","explorer.query_time",[23,["order"]],[23,["asc"]]]]],false],[0,"\\n              "],[10],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"tr"],[9],[10],[0,"\\n          "],[7,"tbody"],[9],[0,"\\n"],[4,"each",[[23,["filteredContent"]]],null,{"statements":[[0,"              "],[7,"tr"],[11,"class","query-row"],[9],[0,"\\n                "],[7,"td"],[9],[0,"\\n                  "],[7,"a"],[12,"href",[28,["/admin/plugins/explorer/?id=",[22,1,["id"]]]]],[3,"action",[[22,0,[]],"scrollTop"]],[9],[0,"\\n                    "],[7,"b"],[11,"class","query-name"],[9],[1,[22,1,["name"]],false],[10],[0,"\\n                    "],[7,"medium"],[11,"class","query-desc"],[9],[1,[22,1,["description"]],false],[10],[0,"\\n                  "],[10],[0,"\\n                "],[10],[0,"\\n                "],[7,"td"],[11,"class","query-created-by"],[9],[0,"\\n"],[4,"if",[[22,1,["username"]]],null,{"statements":[[0,"                    "],[7,"a"],[12,"href",[28,["/users/",[22,1,["username"]],"/activity"]]],[9],[0,"\\n                      "],[7,"medium"],[9],[1,[22,1,["username"]],false],[10],[0,"\\n                    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"                "],[10],[0,"\\n                "],[7,"td"],[11,"class","query-created-at"],[9],[0,"\\n"],[4,"if",[[22,1,["last_run_at"]]],null,{"statements":[[0,"                    "],[7,"medium"],[9],[0,"\\n                      "],[1,[27,"bound-date",[[22,1,["last_run_at"]]],null],false],[0,"\\n                    "],[10],[0,"\\n"]],"parameters":[]},{"statements":[[0,"                    "],[7,"medium"],[9],[0,"\\n                      "],[1,[27,"bound-date",[[22,1,["created_at"]]],null],false],[0,"\\n                    "],[10],[0,"\\n"]],"parameters":[]}],[0,"                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[1]},{"statements":[[0,"              "],[7,"br"],[9],[10],[0,"\\n              "],[7,"em"],[11,"class","no-search-results"],[9],[0," "],[1,[27,"i18n",["explorer.no_search_results"],null],false],[10],[0,"\\n"]],"parameters":[]}],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n      "],[7,"div"],[11,"class","explorer-pad-bottom"],[9],[10],[0,"\\n\\n"]],"parameters":[]},null]],"parameters":[]}]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/admin/plugins-explorer"}}),Ember.TEMPLATES["javascripts/modal/import-query"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title"],["explorer.import.modal"]],{"statements":[[0,"  "],[7,"form"],[3,"action",[[22,0,[]],"dummy"],[["on"],["submit"]]],[9],[0,"\\n    "],[7,"div"],[11,"class","modal-body"],[9],[0,"\\n      "],[1,[27,"json-file-uploader",null,[["value","extension"],[[23,["queryFile"]],".dcquery.json"]]],false],[0,"\\n    "],[10],[0,"\\n    "],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n      "],[1,[27,"d-button",null,[["class","action","type","disabled","icon","label"],["btn-primary","doImport","submit",[23,["notReady"]],"plus","explorer.import.label"]]],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/modal/import-query"}}),define("discourse/plugins/discourse-data-explorer/discourse/models/query",["exports","discourse/models/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=t.default.extend({dirty:!1,params:{},results:null,_init:function(){this._super(),this.set("dirty",!1)}.on("init"),_initParams:function(){this.resetParams()}.on("init").observes("param_info"),markDirty:function(){this.set("dirty",!0)}.observes("name","description","sql"),markNotDirty:function(){this.set("dirty",!1)},hasParams:function(){return this.get("param_info.length")>0}.property("param_info"),resetParams:function(){var e={},t=this.get("params");(this.get("param_info")||[]).forEach(function(s){var n=s.identifier;t[s.identifier]?e[n]=t[n]:null!==s.default?e[n]=s.default:"boolean"===s.type?e[n]="false":e[n]=""}),this.set("params",e)},downloadUrl:function(){return Discourse.getURL("/admin/plugins/explorer/queries/"+this.get("id")+".json?export=1")}.property("id"),createProperties:function(){return this.get("sql")?this.updateProperties():this.getProperties("name")},updateProperties:function(){var e=this.getProperties(s.updatePropertyNames);return this.get("destroyed")&&(e.id=this.get("id")),e}});s.reopenClass({updatePropertyNames:["name","description","sql","created_by","created_at","last_run_at"]}),e.default=s}),define("discourse/plugins/discourse-data-explorer/discourse/controllers/admin-plugins-explorer",["exports","discourse/lib/show-modal","discourse/plugins/discourse-data-explorer/discourse/models/query","discourse/lib/ajax-error","discourse/lib/ajax","ember-addons/ember-computed-decorators"],function(e,t,s,n,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r,l=s.default.create({name:"No queries",fake:!0});e.default=Ember.Controller.extend((o=(0,i.default)("search","sortBy"),r={queryParams:{selectedQueryId:"id"},selectedQueryId:null,editDisabled:!1,showResults:!1,hideSchema:!1,loading:!1,explain:!1,saveDisabled:Ember.computed.not("selectedItem.dirty"),runDisabled:Ember.computed.alias("selectedItem.dirty"),results:Ember.computed.alias("selectedItem.results"),asc:null,order:null,editing:!1,everEditing:!1,showRecentQueries:!0,sortBy:["last_run_at:desc"],sortedQueries:Ember.computed.sort("model","sortBy"),filteredContent:function(){var e=new RegExp(this.get("search"),"i");return this.get("sortedQueries").filter(function(t){return e.test(t.get("name"))||e.test(t.get("description"))})},createDisabled:function(){return 0===(this.get("newQueryName")||"").trim().length}.property("newQueryName"),selectedItem:function(){var e=parseInt(this.get("selectedQueryId")),t=this.get("model").find(function(t){return t.get("id")===e});return isNaN(e)?this.set("showRecentQueries",!0):this.set("showRecentQueries",!1),e<0&&this.set("editDisabled",!0),t||l}.property("selectedQueryId"),othersDirty:function(){var e=this.get("selectedItem");return!!this.get("model").find(function(t){return t!==e&&t.get("dirty")})}.property("selectedItem","selectedItem.dirty"),setEverEditing:function(){this.get("editing")&&!this.get("everEditing")&&this.set("everEditing",!0)}.observes("editing"),addCreatedRecord:function(e){this.get("model").pushObject(e),this.set("selectedQueryId",Ember.get(e,"id")),this.get("selectedItem").set("dirty",!1),this.set("showResults",!1),this.set("results",null),this.set("editing",!0)},save:function(){var e=this;return this.set("loading",!0),""===this.get("selectedItem.description")&&this.set("selectedItem.description",""),this.get("selectedItem").save().then(function(){e.get("selectedItem").markNotDirty(),e.set("editing",!1)}).catch(function(e){throw(0,n.popupAjaxError)(e),e}).finally(function(){e.set("loading",!1)})},actions:{dummy:function(){},importQuery:function(){(0,t.default)("import-query"),this.set("showCreate",!1)},showCreate:function(){this.set("showCreate",!0)},editName:function(){this.set("editing",!0)},download:function(){window.open(this.get("selectedItem.downloadUrl"),"_blank")},scrollTop:function(){window.scrollTo(0,0),this.set("editing",!1),this.set("everEditing",!1)},goHome:function(){this.setProperties({asc:null,order:null,showResults:!1,editDisabled:!1,selectedQueryId:null,sortBy:["last_run_at:desc"]}),this.send("refreshModel"),this.transitionToRoute("adminPlugins.explorer")},resetParams:function(){this.get("selectedItem").resetParams()},saveDefaults:function(){this.get("selectedItem").saveDefaults()},save:function(){this.save()},saverun:function(){var e=this;this.save().then(function(){return e.send("run")})},sortByProperty:function(e){this.sortBy[0]===e+":desc"?this.set("sortBy",[e+":asc"]):this.set("sortBy",[e+":desc"])},create:function(){var e=this,t=this.get("newQueryName").trim();this.set("loading",!0),this.set("showCreate",!1),this.set("showRecentQueries",!1),this.store.createRecord("query",{name:t}).save().then(function(t){return e.addCreatedRecord(t.target)}).catch(n.popupAjaxError).finally(function(){return e.set("loading",!1)})},discard:function(){var e=this;this.set("loading",!0),this.store.find("query",this.get("selectedItem.id")).then(function(t){var n=e.get("selectedItem");n.setProperties(t.getProperties(s.default.updatePropertyNames)),n.markNotDirty(),e.set("editing",!1)}).catch(n.popupAjaxError).finally(function(){e.set("loading",!1)})},destroy:function(){var e=this,t=this.get("selectedItem");this.set("loading",!0),this.set("showResults",!1),this.store.destroyRecord("query",t).then(function(){t.set("destroyed",!0)}).catch(n.popupAjaxError).finally(function(){e.set("loading",!1)})},recover:function(){var e=this,t=this.get("selectedItem");this.set("loading",!0),this.set("showResults",!0),t.save().then(function(){t.set("destroyed",!1)}).catch(n.popupAjaxError).finally(function(){e.set("loading",!1)})},run:function(){var e=this;this.get("selectedItem.dirty")||this.get("runDisabled")||(this.set("loading",!0),this.set("showResults",!1),(0,a.ajax)("/admin/plugins/explorer/queries/"+this.get("selectedItem.id")+"/run",{type:"POST",data:{params:JSON.stringify(this.get("selectedItem.params")),explain:this.get("explain")}}).then(function(t){if(e.set("results",t),!t.success)return void e.set("showResults",!1);e.set("showResults",!0)}).catch(function(t){e.set("showResults",!1),t.jqXHR&&422===t.jqXHR.status&&t.jqXHR.responseJSON?e.set("results",t.jqXHR.responseJSON):(0,n.popupAjaxError)(t)}).finally(function(){e.set("loading",!1)}))}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),
a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(r,"filteredContent",[o],Object.getOwnPropertyDescriptor(r,"filteredContent"),r),r))}),define("discourse/plugins/discourse-data-explorer/discourse/controllers/import-query",["exports","discourse/mixins/modal-functionality","discourse/lib/ajax-error"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Controller.extend(t.default,{notReady:Ember.computed.not("ready"),adminPluginsExplorer:Ember.inject.controller(),ready:function(){var e=void 0;try{e=JSON.parse(this.get("queryFile"))}catch(e){return!1}return!!e.query}.property("queryFile"),actions:{doImport:function(){var e=this,t=JSON.parse(this.get("queryFile")).query;t.id=0,this.set("loading",!0),this.store.createRecord("query",t).save().then(function(t){e.send("closeModal"),e.set("loading",!1),e.get("adminPluginsExplorer").addCreatedRecord(t.target)}).catch(s.popupAjaxError)}}})}),function(e,t){function s(e){e.toggleClass("open")}var n=function(e){var t,s=e.createElement("details");if(!("open"in s))return!1;var n=e.body||function(){var s=e.documentElement;return t=!0,s.insertBefore(e.createElement("body"),s.firstElementChild||s.firstChild)}();s.innerHTML="<summary>a</summary>b",s.style.display="block",n.appendChild(s);var a=s.offsetHeight;return s.open=!0,a=a!==s.offsetHeight,n.removeChild(s),t&&n.parentNode.removeChild(n),a}(e);t.fn.details=function(){return n?this:this.each(function(){var e=t(this),n=t("summary",e).first();n.prop("tabIndex",0),n.on("keydown",function(t){if(32===t.keyCode||13===t.keyCode)return s(e),!1}),n.on("click",function(){n.focus(),s(e)})})}}(document,jQuery),define("discourse/plugins/discourse-details/initializers/apply-details",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";function s(e){e.decorateCooked(function(e){return $("details",e).details()}),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"insertDetails",icon:"caret-right",label:"details.title"}}),e.modifyClass("controller:composer",{actions:{insertDetails:function(){this.get("toolbarEvent").applySurround('\n[details="'+I18n.t("composer.details_title")+'"]\n',"\n[/details]\n","details_text",{multiline:!1})}}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"apply-details",initialize:function(){(0,t.withPluginApi)("0.8.7",s)}}}),define("discourse/plugins/discourse-details/lib/discourse-markdown/details",["exports"],function(e){"use strict";function t(e){e.whiteList(["summary","summary[title]","details","details[open]","details.elided"]),e.registerPlugin(function(e){e.block.bbcode.ruler.push("details",s)})}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=t;var s={tag:"details",before:function(e,t){var s=t.attrs;e.push("bbcode_open","details",1),e.push("bbcode_open","summary",1),e.push("text","",0).content=s._default||"",e.push("bbcode_close","summary",-1)},after:function(e){e.push("bbcode_close","details",-1)}}}),function(e){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};clearTimeout(this.timeout);var n=moment().utc(),i=s.time?s.date+" "+s.time:s.date,o=void 0,r=void 0;r=s.time?s.displayedTimezone||moment.tz.guess():s.displayedTimezone||s.timezone||moment.tz.guess(),(o=s.timezone?a(i,s.timezone):moment.utc(i))<n&&(s.recurring?o=u(o,s.recurring):e.addClass("past"));var c=o.tz(r),h=d(c.clone(),r,s),g=p(h),b=m(h),v=l(c,r,s);e.html(f).attr("title",g).attr("data-html-tooltip",'<div class="previews">'+b+"</div>").addClass("cooked-date").find(".relative-time").text(v),this.timeout=setTimeout(function(){return t(e,s)},1e4)}function s(e){return e.replace("_"," ").replace("Etc/","").split("/")}function n(e){var t=s(e);return t[1]||t[0]}function a(e,t){return moment.tz(e,t).utc()}function i(e,t){var s=I18n.t("discourse_local_dates.relative_dates."+t,{time:"LT"});return e?s.split("LT").map(function(e){return"["+e+"]"}).join("LT"):"["+s.replace(" LT","")+"]"}function o(e){return{sameDay:i(e,"today"),nextDay:i(e,"tomorrow"),lastDay:i(e,"yesterday"),sameElse:"L"}}function r(e,t){return moment.tz(e).utcOffset()===moment.tz(t).utcOffset()}function l(e,t,a){var i=r(t,moment.tz.guess()),l=e.isBetween(moment().subtract(2,"days"),moment().add(1,"days").endOf("day"));return a.calendar&&l?i?e=a.time?e.calendar(null,o(a.time)):e.calendar(null,o(null)):(e=e.format(a.format),e=e.replace("TZ",""),e=e+" ("+n(t)+")"):a.time?(e=e.format(a.format),a.displayedTimezone&&!i?(e=e.replace("TZ",""),e=e+" ("+n(t)+")"):e=e.replace("TZ",s(t).join(": "))):(e=e.format(a.format),i?e=e.replace("TZ",n(t)):(e=e.replace("TZ",""),e=e+" ("+n(t)+")")),e}function u(e,t){var s=t.split("."),n=parseInt(s[0],10),a=s[1],i=moment().diff(e,a),o=Math.ceil(i+n);return e.add(o,a)}function c(e,t){return e.tz(t).format("LLL")+" → "+e.add(24,"hours").tz(t).format("LLL")}function d(e,t,s){var n=[],a=moment.tz.guess(),i=s.timezones.filter(function(e){return e!==a});return n.push({timezone:a,current:!0,dateTime:s.time?e.tz(a).format("LLL"):c(e,a)}),s.timezone&&t===a&&s.timezone!==t&&!r(t,s.timezone)&&i.unshift(s.timezone),i.filter(function(e){return e}).forEach(function(i){r(i,t)||(r(i,a)&&(i=a),n.push({timezone:i,dateTime:s.time?e.tz(i).format("LLL"):c(e,i)}))}),n.length||n.push({timezone:"Etc/UTC",dateTime:s.time?e.tz("Etc/UTC").format("LLL"):c(e,"Etc/UTC")}),_.uniq(n,"timezone")}function p(e){return e.map(function(e){var t=n(e.timezone);return e.dateTime.match(/TZ/)?e.dateTime.replace(/TZ/,t):t+" "+e.dateTime}).join(", ")}function m(t){return t.map(function(t){var s=e(h);return t.current&&s.addClass("current"),s.find(".timezone").text(n(t.timezone)),s.find(".date-time").text(t.dateTime),s[0].outerHTML}).join("")}var f='\n    <span>\n      <svg class="fa d-icon d-icon-globe-americas svg-icon" xmlns="http://www.w3.org/2000/svg">\n        <use xlink:href="#globe-americas"></use>\n      </svg>\n      <span class="relative-time"></span>\n    </span>\n  ',h="\n    <div class='preview'>\n      <span class='timezone'></span>\n      <span class='date-time'></span>\n    </div>\n  ";e.fn.applyLocalDates=function(){return this.each(function(){var s=e(this),n={};n.time=s.attr("data-time"),n.date=s.attr("data-date"),n.recurring=s.attr("data-recurring"),n.timezones=(s.attr("data-timezones")||Discourse.SiteSettings.discourse_local_dates_default_timezones||"Etc/UTC").split("|"),n.timezone=s.attr("data-timezone"),n.calendar="on"===(s.attr("data-calendar")||"on"),n.displayedTimezone=s.attr("data-displayed-timezone"),n.format=s.attr("data-format")||(n.time?"LLL":"LL"),t(s,n)})}}(jQuery),define("discourse/plugins/discourse-local-dates/discourse/components/discourse-local-dates-create-form",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";function s(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var n,a,i,o,r;e.default=Ember.Component.extend((n=(0,t.observes)("date","time","toDate","toTime"),a=(0,t.default)("formats"),i=(0,t.default)(),o=(0,t.default)("advancedMode"),r={timeFormat:"HH:mm:ss",dateFormat:"YYYY-MM-DD",dateTimeFormat:"YYYY-MM-DD HH:mm:ss",config:null,date:null,toDate:null,time:null,toTime:null,format:null,formats:null,recurring:null,advancedMode:!1,isValid:!0,init:function(){this._super(),this.set("date",moment().format(this.dateFormat)),this.set("timezones",[]),this.set("formats",(this.siteSettings.discourse_local_dates_default_formats||"").split("|").filter(function(e){return e}))},_resetFormValidity:function(){this.set("isValid",!0)},currentUserTimezone:function(){return moment.tz.guess()},previewedFormats:function(e){return e.map(function(e){return{format:e,preview:moment().format(e)}})},recurringOptions:function(){return[{name:"Every day",id:"1.days"},{name:"Every week",id:"1.weeks"},{name:"Every two weeks",id:"2.weeks"},{name:"Every month",id:"1.months"},{name:"Every two months",id:"2.months"},{name:"Every three months",id:"3.months"},{name:"Every six months",id:"6.months"},{name:"Every year",id:"1.years"}]},allTimezones:function(){return moment.tz.names()},getConfig:function(e){var t=e&&"end"===e,s=t?this.get("toTime"):this.get("time"),n=t?this.get("toDate"):this.get("date");t&&s&&!n&&(n=moment().format(this.dateFormat));var a=this.get("recurring"),i=this.get("format"),o=this.get("timezones"),r=!s,l=this.get("currentUserTimezone"),u=void 0;u=r?t?moment.tz(n,l).endOf("day"):moment.tz(n,l):moment.tz(n+" "+s,l);var c={date:u.format(this.dateFormat),dateTime:u,recurring:a,format:i,timezones:o,timezone:l};return r||(c.time=u.format(this.timeFormat)),r&&(c.displayedTimezone=this.get("currentUserTimezone")),r&&this.get("formats").includes(i)&&(c.format="LL"),c},_generateDateMarkup:function(e){var t="[date="+e.date;return e.time&&(t+=" time="+e.time+" "),e.format&&e.format.length&&(t+=' format="'+e.format+'" '),e.timezone&&(t+=' timezone="'+e.timezone+'"'),e.timezones&&e.timezones.length&&(t+=' timezones="'+e.timezones.join("|")+'"'),e.recurring&&(t+=' recurring="'+e.recurring+'"'),t+="]"},valid:function(e){var t=this.getConfig(e?"start":null);if(!t.dateTime||!t.dateTime.isValid())return this.set("isValid",!1),!1;if(e){var s=this.getConfig("end");if(!s.dateTime||!s.dateTime.isValid()||s.dateTime.diff(t.dateTime)<0)return this.set("isValid",!1),!1}return this.set("isValid",!0),!0},toggleModeBtnLabel:function(e){return e?"discourse_local_dates.create.form.simple_mode":"discourse_local_dates.create.form.advanced_mode"},actions:{advancedMode:function(){this.toggleProperty("advancedMode")},save:function(){var e=this.get("date")&&(this.get("toDate")||this.get("toTime"));if(this.valid(e)){this._closeModal();var t=this._generateDateMarkup(this.getConfig(e?"start":null));e&&(t+=" → ",t+=this._generateDateMarkup(this.getConfig("end"))),this.get("toolbarEvent").addText(t)}},fillFormat:function(e){this.set("format",e)},cancel:function(){this._closeModal()}},_closeModal:function(){Discourse.__container__.lookup("controller:composer").send("closeModal")}},s(r,"_resetFormValidity",[n],Object.getOwnPropertyDescriptor(r,"_resetFormValidity"),r),s(r,"currentUserTimezone",[t.default],Object.getOwnPropertyDescriptor(r,"currentUserTimezone"),r),s(r,"previewedFormats",[a],Object.getOwnPropertyDescriptor(r,"previewedFormats"),r),s(r,"recurringOptions",[t.default],Object.getOwnPropertyDescriptor(r,"recurringOptions"),r),s(r,"allTimezones",[i],Object.getOwnPropertyDescriptor(r,"allTimezones"),r),s(r,"toggleModeBtnLabel",[o],Object.getOwnPropertyDescriptor(r,"toggleModeBtnLabel"),r),r))}),Ember.TEMPLATES["javascripts/components/discourse-local-dates-create-form"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["previewedFormat"],"statements":[[4,"d-modal-body",null,[["title","subtitle","class","style"],["discourse_local_dates.create.modal_title","discourse_local_dates.create.modal_subtitle","discourse-local-dates-create-modal","overflow: auto"]],{"statements":[[0,"\\n  "],[7,"div"],[11,"class","form"],[9],[0,"\\n    "],[7,"div"],[11,"class","date-time-configuration"],[9],[0,"\\n      "],[7,"div"],[11,"class","range"],[9],[0,"\\n        "],[7,"div"],[11,"class","from"],[9],[0,"\\n          "],[7,"div"],[11,"class","control-group date"],[9],[0,"\\n            "],[7,"label"],[11,"class","control-label"],[9],[0,"\\n              "],[1,[27,"i18n",["discourse_local_dates.create.form.date_title"],null],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","controls"],[9],[0,"\\n              "],[1,[27,"date-picker",null,[["class","value","defaultDate"],["date-input",[23,["date"]],"DD-MM-YYYY"]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n\\n          "],[7,"div"],[11,"class","control-group time"],[9],[0,"\\n            "],[7,"label"],[11,"class","control-label"],[9],[0,"\\n              "],[1,[27,"i18n",["discourse_local_dates.create.form.time_title"],null],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","controls"],[9],[0,"\\n              "],[1,[27,"input",null,[["type","value","class"],["time",[23,["time"]],"time-input"]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n\\n        "],[7,"span"],[11,"class","to-indicator"],[9],[7,"span"],[9],[0,"to"],[10],[10],[0,"\\n\\n        "],[7,"div"],[11,"class","to"],[9],[0,"\\n          "],[7,"div"],[11,"class","control-group date"],[9],[0,"\\n            "],[7,"label"],[11,"class","control-label"],[9],[0,"\\n              "],[1,[27,"i18n",["discourse_local_dates.create.form.date_title"],null],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","controls"],[9],[0,"\\n              "],[1,[27,"date-picker",null,[["class","value","defaultDate"],["date-input",[23,["toDate"]],"DD-MM-YYYY"]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n\\n          "],[7,"div"],[11,"class","control-group time"],[9],[0,"\\n            "],[7,"label"],[11,"class","control-label"],[9],[0,"\\n              "],[1,[27,"i18n",["discourse_local_dates.create.form.time_title"],null],false],[0,"\\n            "],[10],[0,"\\n            "],[7,"div"],[11,"class","controls"],[9],[0,"\\n              "],[1,[27,"input",null,[["type","value","class"],["time",[23,["toTime"]],"time-input"]]],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n\\n      "],[7,"span"],[11,"class","preview"],[9],[1,[21,"currentUserTimezone"],false],[10],[0,"\\n    "],[10],[0,"\\n\\n"],[4,"unless",[[23,["isValid"]]],null,{"statements":[[0,"      "],[7,"span"],[11,"class","validation-error"],[9],[1,[27,"i18n",["discourse_local_dates.create.form.invalid_date"],null],false],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[7,"div"],[11,"class","control-group recurrence"],[9],[0,"\\n      "],[7,"label"],[11,"class","control-label"],[9],[0,"\\n        "],[1,[27,"i18n",["discourse_local_dates.create.form.recurring_title"],null],false],[0,"\\n      "],[10],[0,"\\n"],[4,"if",[[23,["advancedMode"]]],null,{"statements":[[0,"        "],[7,"p"],[9],[1,[27,"i18n",["discourse_local_dates.create.form.recurring_description"],null],true],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[7,"div"],[11,"class","controls"],[9],[0,"\\n        "],[1,[27,"combo-box",null,[["content","class","value","none"],[[23,["recurringOptions"]],"recurrence-input",[23,["recurring"]],"discourse_local_dates.create.form.recurring_none"]]],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n\\n"],[4,"if",[[23,["advancedMode"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","advanced-options"],[9],[0,"\\n        "],[7,"div"],[11,"class","control-group format"],[9],[0,"\\n          "],[7,"label"],[9],[1,[27,"i18n",["discourse_local_dates.create.form.format_title"],null],false],[10],[0,"\\n          "],[7,"p"],[9],[0,"\\n            "],[1,[27,"i18n",["discourse_local_dates.create.form.format_description"],null],false],[0,"\\n            "],[7,"a"],[11,"target","_blank"],[11,"rel","noopener"],[11,"href","https://momentjs.com/docs/#/parsing/string-format/"],[9],[0,"\\n              "],[1,[27,"d-icon",["question-circle"],null],false],[0,"\\n            "],[10],[0,"\\n          "],[10],[0,"\\n          "],[7,"div"],[11,"class","controls"],[9],[0,"\\n            "],[1,[27,"text-field",null,[["value","class"],[[23,["format"]],"format-input"]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n        "],[7,"div"],[11,"class","control-group"],[9],[0,"\\n          "],[7,"ul"],[11,"class","formats"],[9],[0,"\\n"],[4,"each",[[23,["previewedFormats"]]],null,{"statements":[[0,"              "],[7,"li"],[11,"class","format"],[9],[0,"\\n                "],[7,"a"],[11,"class","moment-format"],[11,"href",""],[3,"action",[[22,0,[]],"fillFormat",[22,1,["format"]]]],[9],[0,"\\n                  "],[1,[22,1,["format"]],false],[0,"\\n                "],[10],[0,"\\n                "],[7,"span"],[11,"class","previewed-format"],[9],[0,"\\n                  "],[1,[22,1,["preview"]],false],[0,"\\n                "],[10],[0,"\\n              "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"          "],[10],[0,"\\n        "],[10],[0,"\\n\\n        "],[7,"div"],[11,"class","control-group timezones"],[9],[0,"\\n          "],[7,"label"],[9],[1,[27,"i18n",["discourse_local_dates.create.form.timezones_title"],null],false],[10],[0,"\\n          "],[7,"p"],[9],[1,[27,"i18n",["discourse_local_dates.create.form.timezones_description"],null],false],[10],[0,"\\n          "],[7,"div"],[11,"class","controls"],[9],[0,"\\n            "],[1,[27,"multi-select",null,[["class","allowAny","maximum","content","values"],["timezones-input",false,5,[23,["allTimezones"]],[23,["timezones"]]]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer discourse-local-dates-create-modal-footer"],[9],[0,"\\n"],[4,"if",[[23,["isValid"]]],null,{"statements":[[0,"    "],[1,[27,"d-button",null,[["class","action","label"],["btn btn-default",[27,"action",[[22,0,[]],"save"],null],"discourse_local_dates.create.form.insert"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"\\n  "],[7,"a"],[11,"class","cancel-action"],[11,"href",""],[3,"action",[[22,0,[]],"cancel"]],[9],[0,"\\n    "],[1,[27,"i18n",["cancel"],null],false],[0,"\\n  "],[10],[0,"\\n\\n  "],[1,[27,"d-button",null,[["class","action","icon","label"],["btn-default advanced-mode-btn",[27,"action",[[22,0,[]],"advancedMode"],null],"cog",[23,["toggleModeBtnLabel"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/discourse-local-dates-create-form"}}),Ember.TEMPLATES["javascripts/modal/discourse-local-dates-create-modal"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"discourse-local-dates-create-form",null,[["config","toolbarEvent"],[[23,["config"]],[23,["toolbarEvent"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/discourse-local-dates-create-modal"}}),define("discourse/plugins/discourse-local-dates/initializers/discourse-local-dates",["exports","discourse/lib/plugin-api","discourse/lib/show-modal","discourse/lib/tooltip"],function(e,t,s,n){"use strict";function a(e){e.decorateCooked(function(e){$(".discourse-local-date",e).applyLocalDates(),(0,n.registerTooltip)($(".discourse-local-date",e))}),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"insertDiscourseLocalDate",icon:"globe",label:"discourse_local_dates.title"}}),e.modifyClass("controller:composer",{actions:{insertDiscourseLocalDate:function(){(0,s.default)("discourse-local-dates-create-modal").setProperties({toolbarEvent:this.get("toolbarEvent")})}}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"discourse-local-dates",initialize:function(e){e.lookup("site-settings:main").discourse_local_dates_enabled&&(0,t.withPluginApi)("0.8.8",a)}}}),define("discourse/plugins/discourse-local-dates/lib/discourse-markdown/discourse-local-dates",["exports","pretty-text/engines/discourse-markdown/bbcode-block"],function(e,t){"use strict";function s(e,s,a){var i=void 0,o={date:null,time:null,timezone:null,format:null,timezones:null,displayedTimezone:null},r=(0,t.parseBBCodeTag)("[date date"+s[1]+"]",0,s[1].length+11);if(o.date=r.attrs.date,o.format=r.attrs.format,o.calendar=r.attrs.calendar,o.time=r.attrs.time,o.timezone=r.attrs.timezone,o.recurring=r.attrs.recurring,o.timezones=r.attrs.timezones,o.displayedTimezone=r.attrs.displayedTimezone,i=new a.Token("span_open","span",1),i.attrs=[["data-date",a.md.utils.escapeHtml(o.date)]],!o.date.match(/\d{4}-\d{2}-\d{2}/))return void n(e,a,moment.invalid().format());if(o.time&&!o.time.match(/\d{2}:\d{2}(?::\d{2})?/))return void n(e,a,moment.invalid().format());var l=o.date;if(o.time&&(i.attrs.push(["data-time",a.md.utils.escapeHtml(o.time)]),l=l+" "+o.time),!moment(l).isValid())return void n(e,a,moment.invalid().format());if(i.attrs.push(["class","discourse-local-date"]),o.format&&i.attrs.push(["data-format",a.md.utils.escapeHtml(o.format)]),o.calendar&&i.attrs.push(["data-calendar",a.md.utils.escapeHtml(o.calendar)]),o.displayedTimezone&&moment.tz.names().includes(o.displayedTimezone)&&i.attrs.push(["data-displayed-timezone",a.md.utils.escapeHtml(o.displayedTimezone)]),o.timezones){var u=o.timezones.split("|").filter(function(e){return moment.tz.names().includes(e)});i.attrs.push(["data-timezones",a.md.utils.escapeHtml(u.join("|"))])}o.timezone&&moment.tz.names().includes(o.timezone)?(i.attrs.push(["data-timezone",a.md.utils.escapeHtml(o.timezone)]),l=moment.tz(l,o.timezone)):l=moment.utc(l),o.recurring&&i.attrs.push(["data-recurring",a.md.utils.escapeHtml(o.recurring)]),e.push(i);var c=l.tz("Etc/UTC").format(a.md.options.discourse.datesEmailFormat||moment.defaultFormat);i.attrs.push(["data-email-preview",c+" UTC"]),n(e,a,l.utc().format(o.format))}function n(e,t,s){var n=void 0;n=new t.Token("text","",0),n.content=s,e.push(n),n=new t.Token("span_close","span",-1),e.push(n)}function a(e){e.whiteList(["span.discourse-local-date","span[data-*]","span[title]"]),e.registerOptions(function(e,t){e.datesEmailFormat=t.discourse_local_dates_email_format,e.features["discourse-local-dates"]=!!t.discourse_local_dates_enabled}),e.registerPlugin(function(e){var t={matcher:/\[date(=.+?)\]/,onMatch:s};e.core.textPostProcess.ruler.push("discourse-local-dates",t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=a}),define("discourse/plugins/discourse-math/initializers/discourse-math",["exports","discourse/lib/plugin-api","discourse/lib/load-script"],function(e,t,s){"use strict";function n(e){if(!l){var t=["toMathML.js","Safe.js"];e.enable_accessibility&&t.push("[a11y]/accessibility-menu.js");var s={jax:["input/TeX","input/AsciiMath","input/MathML","output/CommonHTML"],TeX:{extensions:["AMSmath.js","AMSsymbols.js","autoload-all.js"]},extensions:t,showProcessingMessages:!1,root:Discourse.getURLWithCDN("/plugins/discourse-math/mathjax")};e.zoom_on_hover&&(s.menuSettings={zoom:"Hover"},s.MathEvents={hover:750}),window.MathJax=s,l=!0}}function a(e){return n(e),(0,s.default)("/plugins/discourse-math/mathjax/MathJax.2.7.5.js")}function i(e,t){var s=$(e);if(!s.data("applied-mathjax")){s.data("applied-mathjax",!0);var n=void 0,a=void 0;if(s.hasClass("math")){var i="DIV"===e.tagName?"div":"span",o="div"===i?"; mode=display":"";n=$("<"+i+' style="display: none;"><script type="math/tex'+o+'"><\/script></'+i+">"),a=n.children(),a.text(s.text()),s.after(n)}else s.hasClass("asciimath")&&(n=$('<span style="display: none;"><script type="math/asciimath"><\/script></span>'),a=n.children(),a.text(s.text()),s.after(n));Em.run.later(this,function(){window.MathJax.Hub.Queue(function(){e.parentElement&&null!==e.parentElement.offsetParent&&window.MathJax.Hub.Typeset(a[0],function(){s.remove(),n.show()})})},t?200:0)}}function o(e,t){if(e&&e.find){var s=void 0;if(s=t.enable_asciimath?e.find(".math, .asciimath"):e.find(".math"),s.length>0){var n=e.hasClass("d-editor-preview");a(t).then(function(){s.each(function(e,t){return i(t,n)})})}}}function r(e,t){e.decorateCooked(function(e){o(e,t)})}Object.defineProperty(e,"__esModule",{value:!0});var l=!1;e.default={name:"apply-math",initialize:function(e){var s=e.lookup("site-settings:main"),n={zoom_on_hover:s.discourse_math_zoom_on_hover,enable_accessibility:s.discourse_math_enable_accessibility,enable_asciimath:s.discourse_math_enable_asciimath};s.discourse_math_enabled&&(0,t.withPluginApi)("0.5",function(e){r(e,n)})}}}),define("discourse/plugins/discourse-math/lib/discourse-markdown/discourse-math",["exports"],function(e){"use strict";function t(e,t,s){return e!==t&&(!!s.utils.isWhiteSpace(e)||(!!s.utils.isMdAsciiPunct(e)||!!s.utils.isPunctChar(e)))}function s(e,s,n){var a=e.pos,i=e.posMax;if(s||e.src.charCodeAt(a)!==n||i<a+2)return!1;if(e.src.charCodeAt(a+1)===n)return!1;if(a>0){if(!t(e.src.charCodeAt(a-1),n,e.md))return!1}for(var o=void 0,r=a+1;r<i;r++){if(e.src.charCodeAt(r)===n&&92!==e.src.charCodeAt(r-1)){o=r;break}}if(!o)return!1;if(o+1<=i){var l=e.src.charCodeAt(o+1);if(l&&!t(l,n,e.md))return!1}var u=e.src.slice(a+1,o),c=e.push("html_raw","",0),d=e.md.utils.escapeHtml(u),p=36===n?"'math'":"'asciimath'";return c.content="<span class="+p+">"+d+"</span>",e.pos=o+1,!0}function n(e,t){return s(e,t,36)}function a(e,t){return s(e,t,37)}function i(e,t,s,n){if(36!==e.src.charCodeAt(t))return!1;if(t++,36!==e.src.charCodeAt(t))return!1;t++;for(var a=t;a<s;a++)if(!n.utils.isSpace(e.src.charCodeAt(a)))return!1;return!0}function o(e,t,s,n){if(!i(e,e.bMarks[t]+e.tShift[t],e.eMarks[t],e.md))return!1;if(n)return!0;for(var a=t,o=!1;!(++a>=s);)if(i(e,e.bMarks[a]+e.tShift[a],e.eMarks[a],e.md)){o=!0;break}var r=e.push("html_raw","",0),l=o?e.eMarks[a-1]:e.eMarks[a],u=e.src.slice(e.bMarks[t+1]+e.tShift[t+1],l),c=e.md.utils.escapeHtml(u);return r.content="<div class='math'>\n"+c+"\n</div>\n",e.line=o?a+1:a,!0}function r(e){if(e.markdownIt){var t=void 0;e.registerOptions(function(e,s){e.features.math=s.discourse_math_enabled,t=s.discourse_math_enable_asciimath}),e.registerPlugin(function(e){t&&e.inline.ruler.after("escape","asciimath",a),e.inline.ruler.after("escape","math",n),e.block.ruler.after("code","math",o,{alt:["paragraph","reference","blockquote","list"]})})}}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=r}),define("discourse/plugins/discourse-narrative-bot/initializers/new-user-narrative",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";function s(e){var t=e.container.lookup("message-bus:main"),s=e.getCurrentUser(),n=e.container.lookup("app-events:main");e.modifyClass("component:site-header",{didInsertElement:function(){this._super.apply(this,arguments),this.dispatch("header:search-context-trigger","header")}}),e.attachWidgetAction("header","headerSearchContextTrigger",function(){this.site.mobileView?this.state.skipSearchContext=!1:(this.state.contextEnabled=!0,this.state.searchContextType="topic")}),t&&s&&t.subscribe("/new_user_narrative/tutorial_search",function(){n.trigger("header:search-context-trigger")})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"new-user-narratve",initialize:function(e){e.lookup("site-settings:main").discourse_narrative_bot_enabled&&(0,t.withPluginApi)("0.8.7",s)}}}),define("discourse/plugins/discourse-patreon/discourse/routes/admin-plugins-patreon",["exports","discourse/models/group","discourse/lib/ajax","discourse/plugins/discourse-patreon/discourse/models/filter-rule"],function(e,t,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function e(e,t){var s=[],n=!0,a=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(n=(o=r.next()).done)&&(s.push(o.value),!t||s.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(a)throw i}}return s}return function(t,s){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=Discourse.Route.extend({model:function(){return Ember.RSVP.Promise.all([(0,s.ajax)("/patreon/list.json"),t.default.findAll({ignore_automatic:!0})]).then(function(e){var t=a(e,2),s=t[0],n=t[1];return{filters:s.filters,rewards:s.rewards,last_sync_at:s.last_sync_at,groups:n}})},setupController:function(e,t){var s=t.rewards,a=t.groups,i=_.map(t.filters,function(e,t){var i=e.map(function(e){return s[e]?" $"+s[e].amount_cents/100+" - "+s[e].title:""}),o=_.find(a,function(e){return e.id===parseInt(t)});return n.default.create({group:o.name,rewards:i,group_id:t,reward_ids:e})});e.setProperties({model:i,groups:a,rewards:s,last_sync_at:t.last_sync_at})}})}),Ember.TEMPLATES["javascripts/admin/plugins-patreon"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["rule"],"statements":[[7,"section"],[11,"id","patreon"],[9],[0,"\\n  "],[7,"h1"],[9],[1,[27,"i18n",["patreon.header.rules"],null],false],[10],[0,"\\n  "],[7,"table"],[9],[0,"\\n    "],[7,"tr"],[9],[0,"\\n      "],[7,"th"],[9],[1,[27,"i18n",["patreon.group"],null],false],[10],[0,"\\n      "],[7,"th"],[9],[1,[27,"i18n",["patreon.rewards"],null],false],[10],[0,"\\n      "],[7,"th"],[9],[10],[0,"\\n    "],[10],[0,"\\n\\n"],[4,"each",[[23,["model"]]],null,{"statements":[[0,"      "],[7,"tr"],[11,"class",""],[9],[0,"\\n        "],[7,"td"],[9],[1,[22,1,["group"]],false],[10],[0,"\\n        "],[7,"td"],[9],[1,[22,1,["rewards"]],false],[10],[0,"\\n        "],[7,"td"],[9],[0,"\\n          "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n            "],[1,[27,"d-button",null,[["action","actionParam","icon","class","title"],["delete",[22,1,[]],"trash-o","delete btn-danger","patreon.delete"]]],false],[0,"\\n          "],[10],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[1]},null],[0,"\\n    "],[7,"tr"],[11,"class","new-filter"],[9],[0,"\\n      "],[7,"td"],[9],[1,[27,"combo-box",null,[["value","content"],[[23,["editing","group_id"]],[23,["groups"]]]]],false],[10],[0,"\\n      "],[7,"td"],[9],[1,[27,"list-setting",null,[["settingValue","choices","class"],[[23,["editing","reward_list"]],[23,["rewardsNames"]],"rewards"]]],false],[10],[0,"\\n      "],[7,"td"],[9],[0,"\\n        "],[7,"div"],[11,"class","pull-right"],[9],[0,"\\n          "],[1,[27,"d-button",null,[["action","icon","class","title"],["save","check","save btn-primary","patreon.save"]]],false],[0,"\\n        "],[10],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n\\n  "],[7,"p"],[9],[1,[27,"i18n",["patreon.help_text"],null],false],[10],[0,"\\n\\n  "],[1,[27,"d-button",null,[["action","icon","class","disabled","title","label"],["updateData","refresh","test",[23,["updatingData"]],"patreon.update_data","patreon.update_data"]]],false],[0,"\\n\\n"],[4,"if",[[23,["last_sync_at"]]],null,{"statements":[[0,"    "],[7,"span"],[11,"class","last_synced"],[9],[1,[27,"i18n",["patreon.last_synced"],null],false],[0,": "],[1,[27,"format-date",[[23,["last_sync_at"]]],[["leaveAgo"],["true"]]],true],[10],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/admin/plugins-patreon"}}),define("discourse/plugins/discourse-patreon/discourse/templates/connectors/admin-user-details/patreon",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={setupComponent:function(e,t){var s=e.model.patreon_email,n="https://patreon.com/members";s&&(n=n+"?query="+s),t.set("patron_url",n)},shouldRender:function(e,t){return t.siteSettings.patreon_enabled&&e.model.patreon_id}}}),Ember.TEMPLATES["javascripts/connectors/admin-user-details/patreon"]=Ember.HTMLBars.template({id:null,
block:'{"symbols":[],"statements":[[4,"if",[[22,0,["siteSettings","patreon_enabled"]]],null,{"statements":[[0,"  "],[7,"section"],[11,"class","details"],[9],[0,"\\n    "],[7,"h1"],[9],[1,[27,"i18n",["patreon.title"],null],false],[10],[0,"\\n    "],[7,"div"],[11,"class","display-row"],[9],[0,"\\n      "],[7,"div"],[11,"class","field"],[9],[1,[27,"i18n",["patreon.field.id"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","value"],[9],[1,[23,["model","patreon_id"]],false],[10],[0,"\\n    "],[10],[0,"\\n"],[4,"if",[[23,["model","patreon_email"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","display-row"],[9],[0,"\\n      "],[7,"div"],[11,"class","field"],[9],[1,[27,"i18n",["patreon.field.email"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","value"],[9],[1,[23,["model","patreon_email"]],false],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["model","patreon_amount_cents"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","display-row"],[9],[0,"\\n      "],[7,"div"],[11,"class","field"],[9],[1,[27,"i18n",["patreon.field.amount_cents"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","value"],[9],[1,[23,["model","patreon_amount_cents"]],false],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["model","patreon_rewards"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","display-row"],[9],[0,"\\n      "],[7,"div"],[11,"class","field"],[9],[1,[27,"i18n",["patreon.field.rewards"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","value"],[9],[1,[23,["model","patreon_rewards"]],false],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[4,"if",[[23,["model","patreon_declined_since"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","display-row"],[9],[0,"\\n      "],[7,"div"],[11,"class","field"],[9],[1,[27,"i18n",["patreon.field.declined_since"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","value"],[9],[1,[27,"format-date",[[23,["model","patreon_declined_since"]]],null],true],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[]},null],[0,"    "],[7,"div"],[11,"class","display-row"],[9],[0,"\\n      "],[7,"div"],[11,"class","field"],[9],[1,[27,"i18n",["patreon.field.more_details.label"],null],false],[10],[0,"\\n      "],[7,"div"],[11,"class","value"],[9],[7,"a"],[11,"target","_blank"],[12,"href",[28,[[21,"patron_url"]]]],[9],[1,[27,"d-icon",["external-link-alt"],null],false],[10],[10],[0,"\\n      "],[7,"div"],[11,"class","controls"],[9],[0,"\\n"],[4,"if",[[23,["model","patreon_email"]]],null,{"statements":[[0,"          "],[1,[27,"i18n",["patreon.field.more_details.help_text.email_available"],null],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"          "],[1,[27,"i18n",["patreon.field.more_details.help_text.email_not_available"],null],false],[0,"\\n"]],"parameters":[]}],[0,"      "],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/admin-user-details/patreon"}});define("discourse/plugins/discourse-patreon/discourse/models/filter-rule",["exports","discourse/models/rest"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({group_id:-1,reward_list:""})}),define("discourse/plugins/discourse-patreon/discourse/controllers/admin-plugins-patreon",["exports","ember-addons/ember-computed-decorators","discourse/plugins/discourse-patreon/discourse/models/filter-rule","discourse/lib/ajax","discourse/lib/ajax-error"],function(e,t,s,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o;e.default=Ember.Controller.extend((i=(0,t.default)("rewards"),o={prettyPrintReward:function(e){return"$"+e.amount_cents/100+" - "+e.title},rewardsNames:function(){var e=this;return _.filter(this.rewards,function(e){return e.id>=0}).map(function(t){return e.prettyPrintReward(t)})},editing:s.default.create({}),actions:{save:function(){var e=this,t=this.get("editing"),i=this.get("model");t.set("group",this.groups.find(function(e){return e.id===parseInt(t.get("group_id"))})),t.set("rewards_ids",_.filter(this.rewards,function(s){return t.get("reward_list").includes(e.prettyPrintReward(s))}).map(function(e){return e.id})),(0,n.ajax)("/patreon/list.json",{method:"POST",data:t.getProperties("group_id","rewards_ids")}).then(function(){var n=i.find(function(e){return e.get("group_id")===t.get("group_id")}),a=t.get("reward_list").replace(/\|/g,", ");n?(n.set("reward_list",a),n.set("rewards",a),n.set("rewards_ids",t.rewards_ids)):i.pushObject(s.default.create({group:t.get("group.name"),rewards:a})),e.set("editing",s.default.create({}))}).catch(a.popupAjaxError)},delete:function(e){var t=this.get("model");(0,n.ajax)("/patreon/list.json",{method:"DELETE",data:e.getProperties("group_id")}).then(function(){var s=t.find(function(t){return t.get("group_id")===e.get("group_id")});t.removeObject(s)}).catch(a.popupAjaxError)},updateData:function(){var e=this;this.set("updatingData",!0),(0,n.ajax)("/patreon/update_data.json",{method:"POST"}).catch(a.popupAjaxError).finally(function(){return e.set("updatingData",!1)}),this.messageBus.subscribe("/patreon/background_sync",function(){e.messageBus.unsubscribe("/patreon/background_sync"),e.set("updatingData",!1),bootbox.alert(I18n.t("patreon.refresh_page"),function(){window.location.pathname=Discourse.getURL("/admin/plugins/patreon")})})}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(o,"rewardsNames",[i],Object.getOwnPropertyDescriptor(o,"rewardsNames"),o),o))}),define("discourse/plugins/discourse-patreon/discourse/patreon-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"admin.adminPlugins",path:"/plugins",map:function(){this.route("patreon")}}}),define("discourse/plugins/discourse-presence/discourse/components/composer-presence-display",["exports","discourse/lib/ajax","ember-addons/ember-computed-decorators"],function(e,t,s){"use strict";function n(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=e.keepAliveDuration=void 0;var a,i,o,r,l,u,c,d=e.keepAliveDuration=1e4,p=e.bufferTime=3e3;e.default=Ember.Component.extend((a=(0,s.on)("didInsertElement"),i=(0,s.observes)("action","post.id","topic.id"),o=(0,s.observes)("reply","title"),r=(0,s.on)("willDestroyElement"),l=(0,s.observes)("currentState"),u=(0,s.default)("presenceUsers","currentUser.id"),c={action:null,post:null,topic:null,reply:null,title:null,previousState:null,currentState:null,presenceUsers:null,channel:null,composerOpened:function(){this._lastPublish=new Date,Ember.run.once(this,"updateState")},composerStateChanged:function(){Ember.run.once(this,"updateState")},typing:function(){new Date-this._lastPublish>d&&this.publish({current:this.get("currentState")})},composerClosing:function(){this.publish({previous:this.get("currentState")}),Ember.run.cancel(this._pingTimer),Ember.run.cancel(this._clearTimer)},updateState:function(){var e=null,t=this.get("action");"reply"!==t&&"edit"!==t||(e={action:t},"reply"===t&&(e.topic_id=this.get("topic.id")),"edit"===t&&(e.post_id=this.get("post.id"))),this.set("previousState",this.get("currentState")),this.set("currentState",e)},currentStateChanged:function(){var e=this;this.get("channel")&&(this.messageBus.unsubscribe(this.get("channel")),this.set("channel",null)),this.clear(),["reply","edit"].includes(this.get("action"))&&this.publish({response_needed:!0,previous:this.get("previousState"),current:this.get("currentState")}).then(function(t){e.get("isDestroyed")||(e.set("presenceUsers",t.users),e.set("channel",t.messagebus_channel),t.messagebus_channel&&e.messageBus.subscribe(t.messagebus_channel,function(t){e.get("isDestroyed")||e.set("presenceUsers",t.users),e._clearTimer=Ember.run.debounce(e,"clear",d+p)},t.messagebus_id))})},clear:function(){this.get("isDestroyed")||this.set("presenceUsers",[])},publish:function(e){return this._lastPublish=new Date,this.currentUser.hide_profile_and_presence?Ember.RSVP.Promise.resolve():(0,t.ajax)("/presence/publish",{type:"POST",data:e})},users:function(e,t){return(e||[]).filter(function(e){return e.id!==t})},isReply:Ember.computed.equal("action","reply"),shouldDisplay:Ember.computed.gt("users.length",0)},n(c,"composerOpened",[a],Object.getOwnPropertyDescriptor(c,"composerOpened"),c),n(c,"composerStateChanged",[i],Object.getOwnPropertyDescriptor(c,"composerStateChanged"),c),n(c,"typing",[o],Object.getOwnPropertyDescriptor(c,"typing"),c),n(c,"composerClosing",[r],Object.getOwnPropertyDescriptor(c,"composerClosing"),c),n(c,"currentStateChanged",[l],Object.getOwnPropertyDescriptor(c,"currentStateChanged"),c),n(c,"users",[u],Object.getOwnPropertyDescriptor(c,"users"),c),c))}),define("discourse/plugins/discourse-presence/discourse/components/topic-presence-display",["exports","ember-addons/ember-computed-decorators","discourse/plugins/discourse-presence/discourse/components/composer-presence-display"],function(e,t,s){"use strict";function n(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o,r,l;e.default=Ember.Component.extend((a=(0,t.on)("didInsertElement"),i=(0,t.on)("willDestroyElement"),o=(0,t.default)("topicId"),r=(0,t.default)("presenceUsers","currentUser.id"),l={topicId:null,presenceUsers:null,clear:function(){this.get("isDestroyed")||this.set("presenceUsers",[])},_inserted:function(){var e=this;this.clear(),this.messageBus.subscribe(this.get("channel"),function(t){e.get("isDestroyed")||e.set("presenceUsers",t.users),e._clearTimer=Ember.run.debounce(e,"clear",s.keepAliveDuration+s.bufferTime)},-2)},_destroyed:function(){Ember.run.cancel(this._clearTimer),this.messageBus.unsubscribe(this.get("channel"))},channel:function(e){return"/presence/topic/"+e},users:function(e,t){return(e||[]).filter(function(e){return e.id!==t})},shouldDisplay:Ember.computed.gt("users.length",0)},n(l,"_inserted",[a],Object.getOwnPropertyDescriptor(l,"_inserted"),l),n(l,"_destroyed",[i],Object.getOwnPropertyDescriptor(l,"_destroyed"),l),n(l,"channel",[o],Object.getOwnPropertyDescriptor(l,"channel"),l),n(l,"users",[r],Object.getOwnPropertyDescriptor(l,"users"),l),l))}),Ember.TEMPLATES["javascripts/components/composer-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["user"],"statements":[[4,"if",[[23,["shouldDisplay"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","presence-users"],[9],[0,"\\n    "],[7,"div"],[11,"class","presence-avatars"],[9],[0,"\\n"],[4,"each",[[23,["users"]]],null,{"statements":[[0,"        "],[1,[27,"avatar",[[22,1,[]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n    "],[7,"span"],[11,"class","presence-text"],[9],[0,"\\n      "],[7,"span"],[11,"class","description"],[9],[0,"\\n"],[4,"if",[[23,["isReply"]]],null,{"statements":[[1,[27,"i18n",["presence.replying"],null],false]],"parameters":[]},{"statements":[[1,[27,"i18n",["presence.editing"],null],false]],"parameters":[]}],[10],[10],[7,"span"],[11,"class","wave"],[9],[7,"span"],[11,"class","dot"],[9],[0,"."],[10],[7,"span"],[11,"class","dot"],[9],[0,"."],[10],[7,"span"],[11,"class","dot"],[9],[0,"."],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/composer-presence-display"}}),Ember.TEMPLATES["javascripts/components/topic-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["user"],"statements":[[4,"if",[[23,["shouldDisplay"]]],null,{"statements":[[0,"  "],[7,"div"],[11,"class","presence-users"],[9],[0,"\\n    "],[7,"div"],[11,"class","presence-avatars"],[9],[0,"\\n"],[4,"each",[[23,["users"]]],null,{"statements":[[0,"        "],[1,[27,"avatar",[[22,1,[]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"parameters":[1]},null],[0,"    "],[10],[0,"\\n    "],[7,"span"],[11,"class","presence-text"],[9],[0,"\\n      "],[7,"span"],[11,"class","description"],[9],[1,[27,"i18n",["presence.replying_to_topic"],[["count"],[[23,["users","length"]]]]],false],[10],[7,"span"],[11,"class","wave"],[9],[7,"span"],[11,"class","dot"],[9],[0,"."],[10],[7,"span"],[11,"class","dot"],[9],[0,"."],[10],[7,"span"],[11,"class","dot"],[9],[0,"."],[10],[10],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/components/topic-presence-display"}}),Ember.TEMPLATES["javascripts/connectors/topic-above-footer-buttons/presence"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"topic-presence-display",null,[["topicId"],[[23,["model","id"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/topic-above-footer-buttons/presence"}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/topic-above-footer-buttons/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return t.siteSettings.presence_enabled}}}),Ember.TEMPLATES["javascripts/connectors/composer-fields/presence"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"composer-presence-display",null,[["action","post","topic","reply","title"],[[23,["model","action"]],[23,["model","post"]],[23,["model","topic"]],[23,["model","reply"]],[23,["model","title"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/composer-fields/presence"}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/composer-fields/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return t.siteSettings.presence_enabled}}}),define("discourse/plugins/discourse-solved/discourse/solved-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user.userActivity",map:function(){this.route("solved")}}}),Ember.TEMPLATES["javascripts/discourse/connectors/category-custom-settings/solved-settings"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"unless",[[23,["siteSettings","allow_solved_on_all_topics"]]],null,{"statements":[[7,"section"],[11,"class","field"],[9],[0,"\\n  "],[7,"div"],[11,"class","enable-accepted-answer"],[9],[0,"\\n    "],[7,"label"],[11,"class","checkbox-label"],[9],[0,"\\n      "],[1,[27,"input",null,[["type","checked"],["checkbox",[23,["category","enable_accepted_answers"]]]]],false],[0,"\\n      "],[1,[27,"i18n",["solved.allow_accepted_answers"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/category-custom-settings/solved-settings"}}),Ember.TEMPLATES["javascripts/discourse/connectors/topic-after-cooked/solved-panel"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["topic","accepted_answer"]]],null,{"statements":[[7,"p"],[11,"class","solved"],[9],[0,"\\n"],[1,[23,["topic","acceptedAnswerHtml"]],true],[0,"\\n"],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/topic-after-cooked/solved-panel"}}),Ember.TEMPLATES["javascripts/discourse/connectors/user-summary-stat/solved-count"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"link-to",["userActivity.solved"],null,{"statements":[[0,"  "],[1,[27,"user-stat",null,[["value","label","icon"],[[23,["model","solved_count"]],"solved.solution_summary","check-square"]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/user-summary-stat/solved-count"}}),Ember.TEMPLATES["javascripts/discourse/connectors/user-activity-bottom/solved-list"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"link-to",["userActivity.solved"],null,{"statements":[[0,"  "],[1,[27,"d-icon",["check-square"],null],false],[0," "],[1,[27,"i18n",["solved.title"],null],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse/connectors/user-activity-bottom/solved-list"}}),define("discourse/plugins/discourse-solved/discourse/pre-initializers/extend-category-for-solved",["exports","ember-addons/ember-computed-decorators","discourse/models/category"],function(e,t,s){"use strict";function n(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-category-for-solved",before:"inject-discourse-objects",initialize:function(){var e,a,i;s.default.reopen((e=(0,t.default)("custom_fields.enable_accepted_answers"),a={enable_accepted_answers:{get:function(e){return"true"===e},set:function(e){return e=e?"true":"false",this.set("custom_fields.enable_accepted_answers",e),e}}},n(a,"enable_accepted_answers",[e],(i=Object.getOwnPropertyDescriptor(a,"enable_accepted_answers"),i=i?i.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return i}}),a),a))}}}),define("discourse/plugins/discourse-solved/discourse/initializers/extend-for-solved-button",["exports","discourse/models/topic","discourse/models/user","discourse/raw-views/topic-status","discourse/lib/ajax-error","discourse/lib/plugin-api","discourse/lib/ajax","discourse/widgets/post-cooked","discourse/lib/utilities","discourse-common/lib/icon-library"],function(e,t,s,n,a,i,o,r,l,u){"use strict";function c(e){e.get("postStream.posts").forEach(function(e){e.get("post_number")>1&&(e.set("accepted_answer",!1),e.set("can_accept_answer",!0),e.set("can_unaccept_answer",!1))})}function d(e){if(e.get("can_unaccept_answer")){var t=e.topic;e.setProperties({can_accept_answer:!0,can_unaccept_answer:!1,accepted_answer:!1}),t.set("accepted_answer",void 0),(0,o.ajax)("/solution/unaccept",{type:"POST",data:{id:e.get("id")}}).catch(a.popupAjaxError)}}function p(e){var t=e.topic;c(t),e.setProperties({can_unaccept_answer:!0,can_accept_answer:!1,accepted_answer:!0}),t.set("accepted_answer",{username:e.get("username"),post_number:e.get("post_number"),excerpt:e.get("cooked")}),(0,o.ajax)("/solution/accept",{type:"POST",data:{id:e.get("id")}}).catch(a.popupAjaxError)}function m(e){var t=e.getCurrentUser();e.includePostAttributes("can_accept_answer","can_unaccept_answer","accepted_answer"),e.addDiscoveryQueryParam&&e.addDiscoveryQueryParam("solved",{replace:!0,refreshModel:!0}),e.addPostMenuButton("solved",function(e){var s=e.can_accept_answer,n=e.can_unaccept_answer,a=e.accepted_answer,i=t&&t.id===e.topicCreatedById,o=a||!s||i?"first":"second-last-hidden";if(s)return{action:"acceptAnswer",icon:"check-square-o",className:"unaccepted",title:"solved.accept_answer",position:o};if(n||a){return{action:"unacceptAnswer",icon:"check-square",title:n?"solved.unaccept_answer":"solved.accepted_answer",className:"accepted fade-out",position:o,beforeButton:function(e){return e("span.accepted-text",I18n.t("solved.solution"))}}}}),e.decorateWidget("post-contents:after-cooked",function(e){if(1===e.attrs.post_number){var t=e.getModel();if(t){var s=t.get("topic");if(s.get("accepted_answer")){var n=!!s.get("accepted_answer").excerpt,a="\n            <aside class='quote' data-post=\""+s.get("accepted_answer").post_number+'" data-topic="'+s.get("id")+"\">\n              <div class='title'>\n                "+s.get("acceptedAnswerHtml")+' <div class="quote-controls"></div>\n              </div>\n              <blockquote>\n                '+s.get("accepted_answer").excerpt+"\n              </blockquote>\n            </aside>",i="\n            <aside class='quote'>\n              <div class='title title-only'>\n                "+s.get("acceptedAnswerHtml")+"\n              </div>\n            </aside>",o=new r.default({cooked:n?a:i}),l=o.init();return e.rawHtml(l)}}}}),e.attachWidgetAction("post","acceptAnswer",function(){var e=this,t=this.model,s=t.get("topic.postStream.posts").filter(function(e){return 1===e.get("post_number")||e.get("accepted_answer")});p(t),s.forEach(function(t){return e.appEvents.trigger("post-stream:refresh",{id:t.id})})}),e.attachWidgetAction("post","unacceptAnswer",function(){var e=this.model,t=e.get("topic.postStream.posts").find(function(e){return 1===e.get("post_number")});d(e),this.appEvents.trigger("post-stream:refresh",{id:t.get("id")})}),e.registerConnectorClass&&(e.registerConnectorClass("user-activity-bottom","solved-list",{shouldRender:function(e,t){return t.siteSettings.solved_enabled}}),e.registerConnectorClass("user-summary-stat","solved-count",{shouldRender:function(e,t){return t.siteSettings.solved_enabled&&e.model.solved_count>0},setupComponent:function(){this.set("classNames",["linked-stat"])}}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-for-solved-button",initialize:function(){t.default.reopen({acceptedAnswerHtml:function(){var e=this.get("accepted_answer.username"),t=this.get("accepted_answer.post_number");return e&&t?I18n.t("solved.accepted_html",{icon:(0,u.iconHTML)("check-square",{class:"accepted"}),username_lower:e.toLowerCase(),username:(0,l.formatUsername)(e),post_path:this.get("url")+"/"+t,post_number:t,user_path:s.default.create({username:e}).get("path")}):""}.property("accepted_answer","id")}),n.default.reopen({statuses:function(){var e=this._super();return this.topic.has_accepted_answer?e.push({openTag:"span",closeTag:"span",title:I18n.t("solved.has_accepted_answer"),icon:"check-square-o"}):this.topic.can_have_answer&&this.siteSettings.solved_enabled&&this.siteSettings.empty_box_on_unsolved&&e.push({openTag:"span",closeTag:"span",title:I18n.t("solved.has_no_accepted_answer"),icon:"square-o"}),e}.property()}),(0,i.withPluginApi)("0.1",m),(0,i.withPluginApi)("0.8.10",function(e){e.replaceIcon("notification.solved.accepted_notification","check-square")})}}}),define("discourse/plugins/discourse-solved/discourse/routes/user-activity-solved",["exports","discourse/routes/user-activity-stream"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({userActionType:15,noContentHelpKey:"solved.no_solutions"})}),function(e){function t(t){e("div.lazyYT",t).each(function(){e(this).replaceWith("<p>https://youtube.com/watch?v="+e(this).data("youtube-id")+"</p>")})}function s(e,t){var s="gray 0 0 "+t+"px",n="-webkit-user-select";o&&(s=t<=0?"0 0 0 0 gray":"0 0 "+t+"px .1px gray",n="-ms-user-select"),r&&(n="-moz-user-select"),e.css("background-color","transparent").css("color","rgba(0,0,0,0)").css("text-shadow",s).css(n,"none")}function n(e,t){var s=t>0?"blur("+t+"px)":"";o?e.css("-ms-filter","progid:DXImageTransform.Microsoft.Blur(pixelradius="+t+")"):e.css("filter",s).css("-webkit-filter",s)}function a(t,s){e("a",t).addClass("no-track-link"),e("a,pre",t).each(function(t,a){n(e(a),s)})}function i(t,s){var a=e("img",t);o?a.css("opacity",0===s?"1.0":"0.0"):n(a,s)}var o=document.documentMode,r="undefined"!=typeof InstallTrigger,l={max:{text:10,link:10,image:20},partial:{text:5,link:5,image:6},none:{text:0,link:0,image:0}},u=function(e,n){t(e),s(e,n.text),a(e,n.link),i(e,n.image)},c=function(e,t){var s=t.max,n=t.partial,a=t.none;e.data("spoiler-state","blurred"),u(e,s),e.on("mouseover",function(){e.css("cursor","pointer"),"blurred"===e.data("spoiler-state")&&u(e,n)}).on("mouseout",function(){"blurred"===e.data("spoiler-state")&&u(e,s)}).on("click",function(t){"blurred"===e.data("spoiler-state")?(e.data("spoiler-state","revealed").css("cursor","auto"),u(e,a),t.preventDefault()):t.target&&"A"!==t.target.tagName&&(e.data("spoiler-state","blurred").css("cursor","pointer"),u(e,n),t.preventDefault())})};e.fn.spoil=function(t){var s=e.extend(l,t||{});return this.each(function(){c(e(this),s)})}}(jQuery),define("discourse/plugins/discourse-spoiler-alert/initializers/spoiler-alert",["exports","discourse/lib/plugin-api","discourse/lib/to-markdown","discourse/controllers/composer"],function(e,t,s,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){$(".spoiler",e).removeClass("spoiler").addClass("spoiled").spoil()}function l(e){e.decorateCooked(r),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"insertSpoiler",icon:"magic",label:"spoiler.title"}}),n.default.reopen({actions:{insertSpoiler:function(){this.get("toolbarEvent").applySurround("[spoiler]","[/spoiler]","spoiler_text",{multiline:!1})}}}),s.Tag&&(s.Tag.prototype.decorate=function(e){return"spoiled"===this.element.attributes.class&&(this.prefix="[spoiler]",this.suffix="[/spoiler]"),(this.prefix||this.suffix)&&(e=[this.prefix,e,this.suffix].join("")),this.inline&&(e=" "+e+" "),e},s.Tag.block=function(e,t,n){return function(s){function r(){a(this,r);var s=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t,n));return s.gap="\n\n",s}return o(r,s),u(r,[{key:"decorate",value:function(e){var t=this.element.attributes,s=this.element.parent;return"p"===this.name&&s&&"li"===s.name&&(this.gap=""),"div"===this.name&&"spoiled"===t.class&&(this.prefix="[spoiler]",this.suffix="[/spoiler]",e=e.trim()),""+this.gap+this.prefix+e+this.suffix+this.gap}}]),r}(s.Tag)})}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function e(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}();e.default={name:"apply-spoilers",initialize:function(e){e.lookup("site-settings:main").spoiler_enabled&&(0,t.withPluginApi)("0.5",l)}}}),define("discourse/plugins/discourse-spoiler-alert/lib/discourse-markdown/spoiler-alert",["exports","pretty-text/pretty-text"],function(e,t){"use strict";function s(e,t){var s=o.test(t)?"div":"span";return"<"+s+" class='spoiler'>"+t+"</"+s+">"}function n(e){for(e=e||"";e!==(e=e.replace(/\[spoiler\]((?:(?!\[spoiler\]|\[\/spoiler\])[\S\s])*)\[\/spoiler\]/gi,s)););return e}function a(e){e.registerOptions(function(e,t){e.features["spoiler-alert"]=!!t.spoiler_enabled}),e.registerPlugin(function(e){e.inline.bbcode.ruler.push("spoiler",{tag:"spoiler",wrap:"span.spoiler"}),e.block.bbcode.ruler.push("spoiler",{tag:"spoiler",wrap:"div.spoiler"})})}function i(e){e.whiteList(["span.spoiler","div.spoiler"]),e.markdownIt?a(e):e.addPreProcessor(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=i,(0,t.registerOption)(function(e,t){t.features["spoiler-alert"]=!!e.spoiler_enabled});var o=/\n|<img|!\[[^\]]*\][(\[]/}),define("discourse/plugins/discourse-staff-notes/discourse/adapters/staff-note",["exports","discourse/adapters/rest","discourse/lib/ajax"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({destroyRecord:function(e,t,n){var a=this.pathFor(e,t,n.get("id")),i=n.get("user_id");return(0,s.ajax)(a+"?user_id="+i,{method:"DELETE"})}})}),define("discourse/plugins/discourse-staff-notes/discourse/components/show-staff-notes",["exports","ember-addons/ember-computed-decorators"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n,a;e.default=Ember.Component.extend((s=(0,t.default)("count"),n={tagName:"",showCount:function(e){return e&&e>0},actions:{show:function(){this.sendAction("show")}}},function(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(n,"showCount",[s],(a=Object.getOwnPropertyDescriptor(n,"showCount"),a=a?a.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return a}}),n),n))}),define("discourse/plugins/discourse-staff-notes/discourse/initializers/enable-staff-notes",["exports","discourse/lib/plugin-api","discourse-common/lib/icon-library","discourse/plugins/discourse-staff-notes/discourse-staff-notes/lib/staff-notes"],function(e,t,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"enable-staff-notes",initialize:function(e){var a=e.lookup("site-settings:main"),i=e.lookup("current-user:main");if(a.staff_notes_enabled&&i&&i.staff){var o=e.lookup("store:main");(0,t.withPluginApi)("0.8.15",function(e){function t(){var e=this;(0,n.showStaffNotes)(o,this.attrs.user_id,function(t){e.sendWidgetAction("refreshStaffNotes",t)},{postId:this.attrs.id})}e.attachWidgetAction("post","refreshStaffNotes",function(e){var t=this.model.get("user_custom_fields")||{};t.staff_notes_count=e,this.model.set("user_custom_fields",t)}),e.modifyClass("controller:user",{staffNotesCount:null,_modelChanged:function(){this.set("staffNotesCount",this.get("model.custom_fields.staff_notes_count")||0)}.observes("model").on("init"),actions:{showStaffNotes:function(){var e=this,t=this.get("model");(0,n.showStaffNotes)(o,t.get("id"),function(t){return e.set("staffNotesCount",t)})}}});var i=e.container.lookup("site:main").mobileView,r=i?"before":"after";e.decorateWidget("poster-name:"+r,function(e){if(!e.widget.settings.hideNotes){return(e.attrs.userCustomFields||{}).staff_notes_count>0?e.attach("staff-notes-icon"):void 0}}),e.decorateWidget("post-avatar:after",function(e){if(e.widget.settings.showNotes){return(e.attrs.userCustomFields||{}).staff_notes_count>0?e.attach("staff-notes-icon"):void 0}}),e.decorateWidget("post-admin-menu:after",function(e){return e.attach("post-admin-menu-button",{icon:"pencil",label:"staff_notes.attach",action:"showStaffNotes"})}),e.attachWidgetAction("post","showStaffNotes",t),e.createWidget("staff-notes-icon",{tagName:"span.staff-notes-icon",click:t,html:function(){return a.enable_emoji?this.attach("emoji",{name:"pencil"}):(0,s.iconNode)("sticky-note")}})})}
}}}),Ember.TEMPLATES["javascripts/components/show-staff-notes"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"a"],[11,"href",""],[11,"class","btn"],[3,"action",[[22,0,[]],"show"]],[9],[0,"\\n  "],[1,[27,"d-icon",["pencil"],null],false],[0,"\\n"],[4,"if",[[23,["showCount"]]],null,{"statements":[[0,"    "],[1,[27,"i18n",["staff_notes.show"],[["count"],[[23,["count"]]]]],false],[0,"\\n"]],"parameters":[]},{"statements":[[0,"    "],[1,[27,"i18n",["staff_notes.title"],null],false],[0,"\\n"]],"parameters":[]}],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/components/show-staff-notes"}}),Ember.TEMPLATES["javascripts/connectors/admin-dashboard-moderation-bottom/recent-staff-notes-report-table"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["siteSettings","staff_notes_enabled"]]],null,{"statements":[[0,"  "],[1,[27,"admin-report",null,[["dataSourceName","startDate","endDate"],["staff_notes",[23,["lastWeek"]],[23,["endDate"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/admin-dashboard-moderation-bottom/recent-staff-notes-report-table"}}),Ember.TEMPLATES["javascripts/modal/staff-notes"]=Ember.HTMLBars.template({id:null,block:'{"symbols":["n"],"statements":[[4,"d-modal-body",null,[["class"],["staff-notes-modal"]],{"statements":[[0,"  "],[1,[27,"textarea",null,[["value"],[[23,["newNote"]]]]],false],[0,"\\n  "],[1,[27,"d-button",null,[["action","label","class","disabled"],["attachNote","staff_notes.attach","btn-primary",[23,["attachDisabled"]]]]],false],[0,"\\n  "],[7,"hr"],[9],[10],[0,"\\n\\n"],[4,"each",[[23,["model"]]],null,{"statements":[[0,"    "],[7,"div"],[11,"class","staff-note"],[9],[0,"\\n      "],[7,"div"],[11,"class","posted-by"],[9],[0,"\\n"],[4,"user-link",null,[["user"],[[22,1,["created_by"]]]],{"statements":[[0,"          "],[1,[27,"avatar",[[22,1,["created_by"]]],[["imageSize"],["small"]]],false],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n      "],[7,"div"],[11,"class","note-contents"],[9],[0,"\\n        "],[7,"div"],[11,"class","note-info"],[9],[0,"\\n          "],[7,"span"],[11,"class","username"],[9],[1,[22,1,["created_by","username"]],false],[10],[0,"\\n          "],[7,"span"],[11,"class","post-date"],[9],[1,[27,"age-with-tooltip",[[22,1,["created_at"]]],null],false],[10],[0,"\\n\\n"],[4,"if",[[22,1,["can_delete"]]],null,{"statements":[[0,"            "],[7,"span"],[11,"class","controls"],[9],[0,"\\n              "],[1,[27,"d-button",null,[["action","icon","class","title"],[[27,"action",[[22,0,[]],"removeNote",[22,1,[]]],null],"trash-o","btn-small btn-danger","staff_notes.remove"]]],false],[0,"\\n            "],[10],[0,"\\n"]],"parameters":[]},null],[0,"        "],[10],[0,"\\n\\n        "],[7,"div"],[11,"class","cooked"],[9],[0,"\\n          "],[1,[27,"cook-text",[[22,1,["raw"]]],null],false],[0,"\\n        "],[10],[0,"\\n\\n"],[4,"if",[[22,1,["post_id"]]],null,{"statements":[[0,"          "],[7,"a"],[11,"class","btn btn-small"],[12,"href",[22,1,["post_url"]]],[9],[0,"\\n            "],[1,[27,"i18n",["staff_notes.show_post"],null],false],[0,"\\n          "],[10],[0,"\\n"]],"parameters":[]},null],[0,"      "],[10],[0,"\\n\\n      "],[7,"div"],[11,"class","clearfix"],[9],[10],[0,"\\n    "],[10],[0,"\\n"]],"parameters":[1]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/modal/staff-notes"}}),define("discourse/plugins/discourse-staff-notes/discourse/controllers/staff-notes",["exports","ember-addons/ember-computed-decorators","discourse/lib/ajax-error"],function(e,t,s){"use strict";function n(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o;e.default=Ember.Controller.extend((a=(0,t.on)("init"),i=(0,t.default)("newNote","saving"),o={newNote:null,saving:!1,user:null,reset:function(){this.setProperties({newNote:null,saving:!1,callback:null})},attachDisabled:function(e,t){return t||!e||0===e.length},_refreshCount:function(){var e=this.get("callback");e&&e(this.get("model.length"))},actions:{attachNote:function(){var e=this,t=this.store.createRecord("staff-note"),n=parseInt(this.get("userId"));this.set("saving",!0);var a={raw:this.get("newNote"),user_id:n},i=this.get("postId");i&&(a.post_id=parseInt(i)),t.save(a).then(function(){e.set("newNote",""),e.get("model").insertAt(0,t),e._refreshCount()}).catch(s.popupAjaxError).finally(function(){return e.set("saving",!1)})},removeNote:function(e){var t=this;bootbox.confirm(I18n.t("staff_notes.delete_confirm"),I18n.t("no_value"),I18n.t("yes_value"),function(n){n&&e.destroyRecord().then(function(){t.get("model").removeObject(e),t._refreshCount()}).catch(s.popupAjaxError)})}}},n(o,"reset",[a],Object.getOwnPropertyDescriptor(o,"reset"),o),n(o,"attachDisabled",[i],Object.getOwnPropertyDescriptor(o,"attachDisabled"),o),o))}),define("discourse/plugins/discourse-staff-notes/discourse-staff-notes/connectors/admin-user-controls-after/add-staff-notes-button",["exports","discourse/plugins/discourse-staff-notes/discourse-staff-notes/connectors/user-profile-controls/show-notes-on-profile"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("discourse/plugins/discourse-staff-notes/discourse-staff-notes/connectors/flagged-post-controls/show-staff-notes-on-flags",["exports","discourse/plugins/discourse-staff-notes/discourse-staff-notes/lib/staff-notes","discourse-common/lib/get-owner"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){return t.siteSettings.staff_notes_enabled},setupComponent:function(e,t){var s=e.flaggedPost.get("user");t.set("staffNotesCount",s.get("custom_fields.staff_notes_count")||0)},actions:{showStaffNotes:function(){var e=this,n=(0,s.getOwner)(this).lookup("store:main"),a=this.get("args.flaggedPost.user");(0,t.showStaffNotes)(n,a.get("id"),function(t){return e.set("staffNotesCount",t)})}}}}),define("discourse/plugins/discourse-staff-notes/discourse-staff-notes/connectors/user-profile-controls/show-notes-on-profile",["exports","discourse/plugins/discourse-staff-notes/discourse-staff-notes/lib/staff-notes","discourse-common/lib/get-owner"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,t){var s=t.siteSettings,n=t.currentUser;return s.staff_notes_enabled&&n&&n.staff},setupComponent:function(e,t){var s=e.model;t.set("staffNotesCount",s.get("staff_notes_count")||s.get("custom_fields.staff_notes_count")||0)},actions:{showStaffNotes:function(){var e=this,n=(0,s.getOwner)(this).lookup("store:main"),a=this.get("args.model");(0,t.showStaffNotes)(n,a.get("id"),function(t){return e.set("staffNotesCount",t)})}}}}),define("discourse/plugins/discourse-staff-notes/discourse-staff-notes/lib/staff-notes",["exports","discourse/lib/show-modal","discourse/lib/load-script"],function(e,t,s){"use strict";function n(e,n,a,i){return i=i||{},(0,s.default)("defer/html-sanitizer-bundle").then(function(){return e.find("staff-note",{user_id:n}).then(function(e){var s=(0,t.default)("staff-notes",{model:e,title:"staff_notes.title",addModalBodyView:!0});return s.reset(),s.set("userId",n),s.set("callback",a),s.set("postId",i.postId),s})})}Object.defineProperty(e,"__esModule",{value:!0}),e.showStaffNotes=n}),Ember.TEMPLATES["javascripts/discourse-staff-notes/templates/connectors/admin-user-controls-after/add-staff-notes-button"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[1,[27,"show-staff-notes",null,[["show","count"],["showStaffNotes",[23,["staffNotesCount"]]]]],false],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-staff-notes/templates/connectors/admin-user-controls-after/add-staff-notes-button"}}),Ember.TEMPLATES["javascripts/discourse-staff-notes/templates/connectors/flagged-post-controls/show-staff-notes-on-flags"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["staffNotesCount"]]],null,{"statements":[[0,"  "],[1,[27,"show-staff-notes",null,[["show","count"],["showStaffNotes",[23,["staffNotesCount"]]]]],false],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-staff-notes/templates/connectors/flagged-post-controls/show-staff-notes-on-flags"}}),Ember.TEMPLATES["javascripts/discourse-staff-notes/templates/connectors/user-profile-controls/show-notes-on-profile"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"li"],[9],[1,[27,"show-staff-notes",null,[["show","count"],["showStaffNotes",[23,["staffNotesCount"]]]]],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/discourse-staff-notes/templates/connectors/user-profile-controls/show-notes-on-profile"}}),define("discourse/plugins/discourse-voting/discourse/feature-voting-route-map",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={resource:"user",path:"users/:username",map:function(){this.route("userActivity",{path:"activity",resetNamespace:!0},function(){this.route("votes")})}}}),define("discourse/plugins/discourse-voting/discourse/pre-initializers/extend-category-for-voting",["exports","ember-addons/ember-computed-decorators","discourse/models/category","discourse/lib/plugin-api"],function(e,t,s,n){"use strict";function a(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function i(e){e.addPostClassesCallback(function(e){if(1===e.post_number&&e.can_vote)return["voting-post"]}),e.includePostAttributes("can_vote"),e.addTagsHtmlCallback(function(e){if(e.can_vote){var t=[];e.user_voted&&"title='"+I18n.t("voting.voted")+"'";e.user_voted;return t.push("<span class='list-vote-count discourse-tag${userVotedClass}' ${title}>"),t.push(I18n.t("voting.votes",{count:e.vote_count})),t.push("</span>"),t.length>0?t.join(""):void 0}},{priority:-100})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-category-for-voting",before:"inject-discourse-objects",initialize:function(e){var o,r,l,u;(0,n.withPluginApi)("0.8.4",function(e){i(e)}),s.default.reopen((o=(0,t.default)("url"),r=(0,t.default)("custom_fields.enable_topic_voting"),l={votesUrl:function(e){return e+"/l/votes"},enable_topic_voting:{get:function(e){return"true"===e},set:function(e){return e=e?"true":"false",this.set("custom_fields.enable_topic_voting",e),e}}},a(l,"votesUrl",[o],Object.getOwnPropertyDescriptor(l,"votesUrl"),l),a(l,"enable_topic_voting",[r],(u=Object.getOwnPropertyDescriptor(l,"enable_topic_voting"),u=u?u.value:void 0,{enumerable:!0,configurable:!0,writable:!0,initializer:function(){return u}}),l),l))}}}),define("discourse/plugins/discourse-voting/discourse/routes/user-activity-votes",["exports","discourse/routes/user-topic-list","discourse/models/user-action"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({userActionType:s.default.TYPES.topics,model:function(){return this.store.findFiltered("topicList",{filter:"topics/voted-by/"+this.modelFor("user").get("username_lower")})}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-button",["exports","discourse/widgets/widget"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.createWidget)("vote-button",{tagName:"button.btn.btn-primary.vote-button",buildClasses:function(e){var t="";return t=e.closed?"voting-closed":e.user_voted?this.currentUser&&this.currentUser.votes_exceeded?"vote-limited nonvote":"vote":"nonvote",this.siteSettings.voting_show_who_voted&&(t+=" show-pointer"),t},html:function(e){I18n.t("voting.vote_title");return this.currentUser?e.closed?I18n.t("voting.voting_closed_title"):e.user_voted?I18n.t("voting.voted_title"):this.currentUser&&this.currentUser.votes_exceeded?I18n.t("voting.voting_limit"):I18n.t("voting.vote_title"):e.vote_count?I18n.t("voting.anonymous_button",{count:e.vote_count}):I18n.t("voting.anonymous_button",{count:1})},click:function(){if(!this.currentUser)return this.sendWidgetAction("showLogin"),void $.cookie("destination_url",window.location.href);this.attrs.closed||!this.parentWidget.state.allowClick||this.attrs.user_voted||(this.parentWidget.state.allowClick=!1,this.parentWidget.state.initialVote=!0,this.sendWidgetAction("addVote")),(this.attrs.user_voted||this.currentUser.votes_exceeded)&&$(".vote-options").toggle()},clickOutside:function(){$(".vote-options").hide(),this.parentWidget.state.initialVote=!1}})}),define("discourse/plugins/discourse-voting/discourse/widgets/remove-vote",["exports","discourse/widgets/widget","discourse-common/lib/icon-library"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.createWidget)("remove-vote",{tagName:"div.remove-vote",buildClasses:function(){return"vote-option"},html:function(){return[(0,s.iconNode)("times"),"Remove vote"]},click:function(){this.sendWidgetAction("removeVote")}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-options",["exports","discourse/widgets/widget","virtual-dom"],function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.createWidget)("vote-options",{tagName:"div.vote-options",buildClasses:function(){return"voting-popup-menu popup-menu hidden"},html:function(e){var t=[];return e.user_voted?t.push(this.attach("remove-vote",e)):this.currentUser&&this.currentUser.votes_exceeded&&!e.user_voted&&t.push([(0,s.h)("div",I18n.t("voting.reached_limit")),(0,s.h)("p",(0,s.h)("a",{href:this.currentUser.get("path")+"/activity/votes"},I18n.t("voting.list_votes")))]),t}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-count",["exports","discourse/widgets/widget","virtual-dom","discourse/lib/ajax"],function(e,t,s,n){"use strict";function a(e){return{template:e.avatar_template,username:e.username,post_url:e.post_url,url:Discourse.getURL("/users/")+e.username.toLowerCase()}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.createWidget)("vote-count",{tagName:"div.vote-count-wrapper",buildKey:function(){return"vote-count"},buildClasses:function(){if(0===this.attrs.vote_count)return"no-votes"},defaultState:function(){return{whoVotedUsers:null}},html:function(e){var t=(0,s.h)("div.vote-count",e.vote_count.toString()),n=null;this.siteSettings.voting_show_who_voted&&this.state.whoVotedUsers&&this.state.whoVotedUsers.length>0&&(n=this.attach("small-user-list",{users:this.state.whoVotedUsers,addSelf:e.liked,listClassName:"regular-votes"}));var a=[t];return n&&a.push((0,s.h)("div.who-voted.popup-menu.voting-popup-menu",[n])),a},click:function(){if(this.siteSettings.voting_show_who_voted&&this.attrs.vote_count>0){if(null===this.state.whoVotedUsers)return this.getWhoVoted();$(".who-voted").toggle()}},clickOutside:function(){$(".who-voted").hide()},getWhoVoted:function(){var e=this;return(0,n.ajax)("/voting/who",{type:"GET",data:{topic_id:this.attrs.id}}).then(function(t){e.state.whoVotedUsers=t.map(a)})}})}),define("discourse/plugins/discourse-voting/discourse/widgets/vote-box",["exports","discourse/widgets/widget","discourse/lib/ajax","discourse/widgets/raw-html","discourse/lib/ajax-error"],function(e,t,s,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=(0,t.createWidget)("vote-box",{tagName:"div.voting-wrapper",buildKey:function(){return"vote-box"},buildClasses:function(){if(this.siteSettings.voting_show_who_voted)return"show-pointer"},defaultState:function(){return{allowClick:!0,initialVote:!1}},html:function(e,t){var s=this.attach("vote-count",e),a=this.attach("vote-button",e),i=this.attach("vote-options",e),o=[s,a,i];if(t.votesAlert>0){var r="<div class='voting-popup-menu vote-options popup-menu'>"+I18n.t("voting.votes_left",{count:t.votesAlert,path:this.currentUser.get("path")+"/activity/votes"})+"</div>";o.push(new n.default({html:r}))}return o},hideVotesAlert:function(){this.state.votesAlert&&(this.state.votesAlert=null,this.scheduleRerender())},click:function(){this.hideVotesAlert()},clickOutside:function(){this.hideVotesAlert()},addVote:function(){var e=this,t=this.attrs,n=this.state;return(0,s.ajax)("/voting/vote",{type:"POST",data:{topic_id:t.id}}).then(function(s){t.set("vote_count",s.vote_count),t.set("user_voted",!0),e.currentUser.set("votes_exceeded",!s.can_vote),s.alert&&(n.votesAlert=s.votes_left),t.set("who_voted",s.who_voted),n.allowClick=!0,e.scheduleRerender()}).catch(a.popupAjaxError)},removeVote:function(){var e=this,t=this.attrs,n=this.state;return(0,s.ajax)("/voting/unvote",{type:"POST",data:{topic_id:t.id}}).then(function(s){t.set("vote_count",s.vote_count),t.set("user_voted",!1),e.currentUser.set("votes_exceeded",!s.can_vote),t.set("who_voted",s.who_voted),n.allowClick=!0,e.scheduleRerender()}).catch(a.popupAjaxError)}})}),Ember.TEMPLATES["javascripts/connectors/category-custom-settings/feature-voting-settings"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"section"],[11,"class","field"],[9],[0,"\\n  "],[7,"div"],[11,"class","enable-topic-voting"],[9],[0,"\\n    "],[7,"label"],[11,"class","checkbox-label"],[9],[0,"\\n      "],[1,[27,"input",null,[["type","checked"],["checkbox",[23,["category","enable_topic_voting"]]]]],false],[0,"\\n      "],[1,[27,"i18n",["voting.allow_topic_voting"],null],false],[0,"\\n    "],[10],[0,"\\n  "],[10],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/category-custom-settings/feature-voting-settings"}}),Ember.TEMPLATES["javascripts/connectors/extra-nav-item/votes"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[7,"a"],[12,"title",[28,[[27,"I18n",["voting.votes_nav_help"],null]]]],[12,"href",[28,[[23,["category","votesUrl"]]]]],[9],[1,[27,"I18n",["voting.vote_title_plural"],null],false],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/extra-nav-item/votes"}}),define("discourse/plugins/discourse-voting/discourse/templates/connectors/extra-nav-item/votes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={votedPath:function(){return"foobar"},path:function(e){if(e)return e.get("votesUrl")},displayName:function(){return I18n.t("voting.vote_title_plural")},setupComponent:function(e,t){var s=e.filterMode;s&&-1!==s.indexOf("votes",s.length-5)&&t.set("classNames",["active"])},shouldRender:function(e,t){var s=t.get("category");return!(!s||!s.get("can_vote"))}}}),Ember.TEMPLATES["javascripts/connectors/user-activity-bottom/user-voted-topics"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["siteSettings","voting_show_votes_on_profile"]]],null,{"statements":[[7,"li"],[9],[0,"\\n"],[4,"link-to",["userActivity.votes"],null,{"statements":[[0,"    "],[1,[27,"d-icon",["heart"],null],false],[0," "],[1,[27,"i18n",["voting.vote_title_plural"],null],false],[0,"\\n"]],"parameters":[]},null],[10],[0,"\\n"]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/user-activity-bottom/user-voted-topics"}}),Ember.TEMPLATES["javascripts/connectors/topic-above-post-stream/topic-title-voting"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"if",[[23,["model","can_vote"]]],null,{"statements":[[4,"if",[[23,["model","postStream","loaded"]]],null,{"statements":[[4,"if",[[23,["model","postStream","firstPostPresent"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","voting title-voting"],[9],[0,"\\n        "],[1,[27,"mount-widget",null,[["widget","args","showLogin"],["vote-box",[23,["model"]],[27,"route-action",["showLogin"],null]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"javascripts/connectors/topic-above-post-stream/topic-title-voting"}}),function(e){"use strict";function t(e,t){var s,n,a,i=e.data("width"),o=e.data("height"),r=e.data("ratio")?e.data("ratio"):t.default_ratio,l=e.data("youtube-id"),u=e.data("youtube-title"),c=[],d=e.data("parameters")||"";r=r.split(":"),"number"==typeof i&&"number"==typeof o?(e.width(i),s=o+"px"):"number"==typeof i?(e.width(i),s=i*r[1]/r[0]+"px"):(i=e.width(),0===i&&(i=e.parent().width()),s=r[1]/r[0]*100+"%"),c.push('<div class="ytp-thumbnail">'),c.push('<div class="ytp-large-play-button"'),i<=640&&c.push(' style="transform: scale(0.563888888888889);"'),c.push(">"),c.push("<svg>"),c.push('<path fill-rule="evenodd" clip-rule="evenodd" fill="#1F1F1F" class="ytp-large-play-button-svg" d="M84.15,26.4v6.35c0,2.833-0.15,5.967-0.45,9.4c-0.133,1.7-0.267,3.117-0.4,4.25l-0.15,0.95c-0.167,0.767-0.367,1.517-0.6,2.25c-0.667,2.367-1.533,4.083-2.6,5.15c-1.367,1.4-2.967,2.383-4.8,2.95c-0.633,0.2-1.316,0.333-2.05,0.4c-0.767,0.1-1.3,0.167-1.6,0.2c-4.9,0.367-11.283,0.617-19.15,0.75c-2.434,0.034-4.883,0.067-7.35,0.1h-2.95C38.417,59.117,34.5,59.067,30.3,59c-8.433-0.167-14.05-0.383-16.85-0.65c-0.067-0.033-0.667-0.117-1.8-0.25c-0.9-0.133-1.683-0.283-2.35-0.45c-2.066-0.533-3.783-1.5-5.15-2.9c-1.033-1.067-1.9-2.783-2.6-5.15C1.317,48.867,1.133,48.117,1,47.35L0.8,46.4c-0.133-1.133-0.267-2.55-0.4-4.25C0.133,38.717,0,35.583,0,32.75V26.4c0-2.833,0.133-5.95,0.4-9.35l0.4-4.25c0.167-0.966,0.417-2.05,0.75-3.25c0.7-2.333,1.567-4.033,2.6-5.1c1.367-1.434,2.967-2.434,4.8-3c0.633-0.167,1.333-0.3,2.1-0.4c0.4-0.066,0.917-0.133,1.55-0.2c4.9-0.333,11.283-0.567,19.15-0.7C35.65,0.05,39.083,0,42.05,0L45,0.05c2.467,0,4.933,0.034,7.4,0.1c7.833,0.133,14.2,0.367,19.1,0.7c0.3,0.033,0.833,0.1,1.6,0.2c0.733,0.1,1.417,0.233,2.05,0.4c1.833,0.566,3.434,1.566,4.8,3c1.066,1.066,1.933,2.767,2.6,5.1c0.367,1.2,0.617,2.284,0.75,3.25l0.4,4.25C84,20.45,84.15,23.567,84.15,26.4z M33.3,41.4L56,29.6L33.3,17.75V41.4z"></path>'),c.push('<polygon fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" points="33.3,41.4 33.3,17.75 56,29.6"></polygon>'),c.push("</svg>"),c.push("</div>"),c.push("</div>"),c.push('<div class="html5-info-bar">'),c.push('<div class="html5-title">'),c.push('<div class="html5-title-text-wrapper">'),c.push('<a class="html5-title-text" target="_blank" tabindex="3100" href="https://www.youtube.com/watch?v=',l,'">'),void 0===u||null===u||""===u?c.push("youtube.com/watch?v="+l):c.push(u),c.push("</a>"),c.push("</div>"),c.push("</div>"),c.push("</div>"),e.css({"padding-bottom":s}).html(c.join("")),a=i>640?"maxresdefault.jpg":i>480?"sddefault.jpg":i>320?"hqdefault.jpg":i>120?"mqdefault.jpg":0===i?"hqdefault.jpg":"default.jpg",n=e.find(".ytp-thumbnail").css({"background-image":["url(//img.youtube.com/vi/",l,"/",a,")"].join("")}).addClass("lazyYT-image-loaded").on("click",function(s){s.preventDefault(),!e.hasClass("lazyYT-video-loaded")&&n.hasClass("lazyYT-image-loaded")&&e.html('<iframe src="//www.youtube.com/embed/'+l+"?autoplay=1&"+d+'" frameborder="0" allowfullscreen></iframe>').addClass("lazyYT-video-loaded"),t.onPlay&&t.onPlay(s,e)})}e.fn.lazyYT=function(s){var n={default_ratio:"16:9",callback:null,container_class:"lazyYT-container"},a=e.extend(n,s);return this.each(function(){t(e(this).addClass(a.container_class),a)})}}(jQuery),define("discourse/plugins/lazyYT/initializers/lazyYT",["exports","discourse/lib/plugin-api"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"apply-lazyYT",initialize:function(){(0,t.withPluginApi)("0.1",function(e){e.decorateCooked(function(t){0!==$(".lazyYT",t).length&&$(".lazyYT",t).lazyYT({onPlay:function(t,s){var n=parseInt(s.closest("article").data("post-id"));n&&e.preventCloak(n)}})})})}}}),Ember.TEMPLATES["javascripts/modal/poll-ui-builder"]=Ember.HTMLBars.template({id:null,block:'{"symbols":[],"statements":[[4,"d-modal-body",null,[["title","class"],["poll.ui_builder.title","poll-ui-builder"]],{"statements":[[0,"  "],[7,"form"],[11,"class","poll-ui-builder-form form-horizontal"],[9],[0,"\\n    "],[7,"div"],[11,"class","input-group poll-select"],[9],[0,"\\n      "],[7,"label"],[11,"class","input-group-label"],[9],[1,[27,"i18n",["poll.ui_builder.poll_type.label"],null],false],[10],[0,"\\n      "],[1,[27,"combo-box",null,[["content","value","allowInitialValueMutation","valueAttribute"],[[23,["pollTypes"]],[23,["pollType"]],true,"value"]]],false],[0,"\\n    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","input-group poll-select"],[9],[0,"\\n      "],[7,"label"],[11,"class","input-group-label"],[9],[1,[27,"i18n",["poll.ui_builder.poll_result.label"],null],false],[10],[0,"\\n      "],[1,[27,"combo-box",null,[["content","value","allowInitialValueMutation","valueAttribute"],[[23,["pollResults"]],[23,["pollResult"]],true,"value"]]],false],[0,"\\n    "],[10],[0,"\\n\\n\\n"],[4,"if",[[23,["showMinMax"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","input-group poll-number"],[9],[0,"\\n        "],[1,[27,"input-tip",null,[["validation"],[[23,["minMaxValueValidation"]]]]],false],[0,"\\n        "],[7,"label"],[11,"class","input-group-label"],[9],[1,[27,"i18n",["poll.ui_builder.poll_config.min"],null],false],[10],[0,"\\n        "],[1,[27,"input",null,[["type","value","valueAttribute","class"],["number",[23,["pollMin"]],"value","poll-options-min"]]],false],[0,"\\n      "],[10],[0,"\\n\\n\\n      "],[7,"div"],[11,"class","input-group poll-number"],[9],[0,"\\n        "],[7,"label"],[11,"class","input-group-label"],[9],[1,[27,"i18n",["poll.ui_builder.poll_config.max"],null],false],[10],[0,"\\n        "],[1,[27,"input",null,[["type","value","valueAttribute","class"],["number",[23,["pollMax"]],"value","poll-options-max"]]],false],[0,"\\n      "],[10],[0,"\\n\\n"],[4,"if",[[23,["isNumber"]]],null,{"statements":[[0,"        "],[7,"div"],[11,"class","input-group poll-number"],[9],[0,"\\n          "],[7,"label"],[11,"class","input-group-label"],[9],[1,[27,"i18n",["poll.ui_builder.poll_config.step"],null],false],[10],[0,"\\n          "],[1,[27,"input",null,[["type","value","valueAttribute","min","class"],["number",[23,["pollStep"]],"value","1","poll-options-step"]]],false],[0,"\\n          "],[1,[27,"input-tip",null,[["validation"],[[23,["minStepValueValidation"]]]]],false],[0,"\\n        "],[10],[0,"\\n"]],"parameters":[]},null]],"parameters":[]},null],[0,"\\n"],[4,"unless",[[23,["isNumber"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","input-group poll-textarea"],[9],[0,"\\n        "],[7,"label"],[9],[1,[27,"i18n",["poll.ui_builder.poll_options.label"],null],false],[10],[0,"\\n        "],[1,[27,"textarea",null,[["value"],[[23,["pollOptions"]]]]],false],[0,"\\n        "],[1,[27,"input-tip",null,[["validation"],[[23,["minNumOfOptionsValidation"]]]]],false],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n    "],[7,"div"],[11,"class","input-group poll-checkbox"],[9],[0,"\\n      "],[7,"label"],[9],[0,"\\n        "],[1,[27,"input",null,[["type","checked"],["checkbox",[23,["publicPoll"]]]]],false],[0,"\\n        "],[1,[27,"i18n",["poll.ui_builder.poll_public.label"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n\\n    "],[7,"div"],[11,"class","input-group poll-checkbox"],[9],[0,"\\n      "],[7,"label"],[9],[0,"\\n        "],[1,[27,"input",null,[["type","checked"],["checkbox",[23,["autoClose"]]]]],false],[0,"\\n        "],[1,[27,"i18n",["poll.ui_builder.automatic_close.label"],null],false],[0,"\\n      "],[10],[0,"\\n    "],[10],[0,"\\n\\n"],[4,"if",[[23,["autoClose"]]],null,{"statements":[[0,"      "],[7,"div"],[11,"class","input-group"],[9],[0,"\\n        "],[1,[27,"date-picker-future",null,[["value","containerId"],[[23,["date"]],"date-container"]]],false],[0,"\\n        "],[1,[27,"input",null,[["type","value"],["time",[23,["time"]]]]],false],[0,"\\n        "],[7,"div"],[11,"id","date-container"],[9],[10],[0,"\\n      "],[10],[0,"\\n"]],"parameters":[]},null],[0,"  "],[10],[0,"\\n"]],"parameters":[]},null],[0,"\\n"],[7,"div"],[11,"class","modal-footer"],[9],[0,"\\n  "],[1,[27,"d-button",null,[["action","icon","class","label","disabled"],[[27,"action",[[22,0,[]],"insertPoll"],null],"chart-bar","btn-primary","poll.ui_builder.insert",[23,["disableInsert"]]]]],false],[0,"\\n"],[10],[0,"\\n"]],"hasEval":false}',meta:{moduleName:"javascripts/modal/poll-ui-builder"}}),define("discourse/plugins/poll/initializers/add-poll-ui-builder",["exports","discourse/lib/plugin-api","ember-addons/ember-computed-decorators","discourse/lib/show-modal"],function(e,t,s,n){"use strict";function a(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function i(e){var t,i;e.modifyClass("controller:composer",(t=(0,s.default)("siteSettings.poll_enabled","siteSettings.poll_minimum_trust_level_to_create","model.topic.pm_with_non_human_user"),i={canBuildPoll:function(e,t,s){return e&&(s||this.currentUser&&(this.currentUser.staff||this.currentUser.trust_level>=t))},actions:{showPollBuilder:function(){(0,n.default)("poll-ui-builder").set("toolbarEvent",this.get("toolbarEvent"))}}},a(i,"canBuildPoll",[t],Object.getOwnPropertyDescriptor(i,"canBuildPoll"),i),i)),e.addToolbarPopupMenuOptionsCallback(function(){return{action:"showPollBuilder",icon:"chart-bar",label:"poll.ui_builder.title",condition:"canBuildPoll"}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"add-poll-ui-builder",initialize:function(){(0,t.withPluginApi)("0.8.7",i)}}}),define("discourse/plugins/poll/initializers/extend-for-poll",["exports","discourse/lib/plugin-api","ember-addons/ember-computed-decorators","discourse-common/lib/get-owner","discourse/widgets/glue"],function(e,t,s,n,a){"use strict";function i(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function o(e){function t(){d.forEach(function(e){return e.queueRerender()})}function o(s,n){var i=$(".poll",s);if(i.length&&n){var o=n.getModel();e.preventCloak(o.id);var r=o.get("polls_votes")||{};o.pollsChanged();var l=o.get("pollsObject");l&&(p=p||setInterval(t,3e4),i.each(function(e,t){var s=$(t),n=s.data("poll-name"),i=l[n];if(i){var u=new a.default("discourse-poll",c,{id:n+"-"+o.id,post:o,poll:i,vote:r[n]||[]});u.appendTo(t),d.push(u)}}))}}function r(){p&&(clearInterval(p),p=null),d.forEach(function(e){return e.cleanUp()}),d=[]}var l,u,c=(0,n.getRegister)(e);e.modifyClass("controller:topic",{subscribe:function(){var e=this;this._super.apply(this,arguments),this.messageBus.subscribe("/polls/"+this.get("model.id"),function(t){var s=e.get("model.postStream").findLoadedPost(t.post_id);s&&s.set("polls",t.polls)})},unsubscribe:function(){this.messageBus.unsubscribe("/polls/*"),this._super.apply(this,arguments)}});var d=[],p=null;e.modifyClass("model:post",(l=(0,s.observes)("polls"),u={_polls:null,pollsObject:null,pollsChanged:function(){
var e=this,s=this.get("polls");s&&(this._polls=this._polls||{},s.forEach(function(t){e._polls[t.name]?e._polls[t.name].setProperties(t):e._polls[t.name]=Ember.Object.create(t)}),this.set("pollsObject",this._polls),t())}},i(u,"pollsChanged",[l],Object.getOwnPropertyDescriptor(u,"pollsChanged"),u),u)),e.includePostAttributes("polls","polls_votes"),e.decorateCooked(o,{onlyStream:!0}),e.cleanupStream(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"extend-for-poll",initialize:function(){(0,t.withPluginApi)("0.8.7",o)}}}),define("discourse/plugins/poll/widgets/discourse-poll",["exports","discourse/widgets/widget","virtual-dom","discourse-common/lib/icon-library","discourse/widgets/raw-html","discourse/lib/ajax","discourse/lib/ajax-error","discourse/plugins/poll/lib/even-round","discourse/widgets/post","discourse/lib/round","discourse/lib/formatter","discourse/lib/url"],function(e,t,s,n,a,i,o,r,l,u,c,d){"use strict";function p(e){return new a.default({html:"<span>"+e.html+"</span>"})}function m(e){return new a.default({html:'<span class="info-text">'+e+"</span>"})}function f(e){return(0,i.ajax)("/polls/voters.json",{data:e}).catch(function(e){e?(0,o.popupAjaxError)(e):bootbox.alert(I18n.t("poll.error_while_fetching_voters"))})}Object.defineProperty(e,"__esModule",{value:!0}),(0,t.createWidget)("discourse-poll-option",{tagName:"li",buildAttributes:function(e){return{"data-poll-option-id":e.option.id}},html:function(e){var t=[],s=e.option,a=e.vote,i=a.includes(s.id);return e.isMultiple?t.push((0,n.iconNode)(i?"far-check-square":"far-square")):t.push((0,n.iconNode)(i?"circle":"far-circle")),t.push(" "),t.push(p(s)),t},click:function(e){0===$(e.target).closest("a").length&&this.sendWidgetAction("toggleOption",this.attrs.option)}}),(0,t.createWidget)("discourse-poll-load-more",{tagName:"div.poll-voters-toggle-expand",buildKey:function(e){return"load-more-"+e.optionId},defaultState:function(){return{loading:!1}},html:function(e,t){return t.loading?(0,s.h)("div.spinner.small"):(0,s.h)("a",(0,n.iconNode)("chevron-down"))},click:function(){var e=this.state;if(!e.loading)return e.loading=!0,this.sendWidgetAction("loadMore").finally(function(){return e.loading=!1})}}),(0,t.createWidget)("discourse-poll-voters",{tagName:"ul.poll-voters-list",buildKey:function(e){return"poll-voters-"+e.optionId},defaultState:function(){return{loaded:"new",voters:[],page:1}},fetchVoters:function(){var e=this,t=this.attrs,s=this.state;if("loading"!==s.loaded)return s.loaded="loading",f({post_id:t.postId,poll_name:t.pollName,option_id:t.optionId,page:s.page}).then(function(n){s.loaded="loaded",s.page+=1;var a="number"===t.pollType?n.voters:n.voters[t.optionId],i=new Set(s.voters.map(function(e){return e.username}));a.forEach(function(e){i.has(e.username)||(i.add(e.username),s.voters.push(e))}),e.scheduleRerender()})},loadMore:function(){return this.fetchVoters()},html:function(e,t){var n=this;e.voters&&"new"===t.loaded&&(t.voters=e.voters);var a=t.voters.map(function(e){return(0,s.h)("li",[(0,l.avatarFor)("tiny",{username:e.username,url:n.site.mobileView?(0,d.userPath)(e.username):void 0,template:e.avatar_template})," "])});return t.voters.length<e.totalVotes&&a.push(this.attach("discourse-poll-load-more",e)),(0,s.h)("div.poll-voters",a)}}),(0,t.createWidget)("discourse-poll-standard-results",{tagName:"ul.results",buildKey:function(e){return"poll-standard-results-"+e.id},defaultState:function(){return{loaded:!1}},fetchVoters:function(){var e=this,t=this.attrs,s=this.state;return f({post_id:t.post.id,poll_name:t.poll.get("name")}).then(function(t){s.voters=t.voters,e.scheduleRerender()})},html:function(e,t){var n=this,a=e.poll,i=a.get("options");if(i){var o=a.get("voters"),l=a.get("public"),u=_.clone(i).sort(function(e,t){return e.votes<t.votes?1:e.votes===t.votes?e.html<t.html?-1:1:-1});l&&!t.loaded&&(t.loaded=!0,this.fetchVoters());var c=0===o?Array(u.length).fill(0):u.map(function(e){return 100*e.votes/o}),d=e.isMultiple?c.map(Math.floor):(0,r.default)(c);return u.map(function(i,o){var r=[],u=d[o].toString(),c=(e.vote||[]).includes(i.id);return r.push((0,s.h)("div.option",(0,s.h)("p",[(0,s.h)("span.percentage",u+"%"),p(i)]))),r.push((0,s.h)("div.bar-back",(0,s.h)("div.bar",{attributes:{style:"width:"+u+"%"}}))),l&&r.push(n.attach("discourse-poll-voters",{postId:e.post.id,optionId:i.id,pollName:a.get("name"),totalVotes:i.votes,voters:t.voters&&t.voters[i.id]||[]})),(0,s.h)("li",{className:c?"chosen":""},r)})}}}),(0,t.createWidget)("discourse-poll-number-results",{buildKey:function(e){return"poll-number-results-"+e.id},defaultState:function(){return{loaded:!1}},fetchVoters:function(){var e=this,t=this.attrs,s=this.state;return f({post_id:t.post.id,poll_name:t.poll.get("name")}).then(function(t){s.voters=t.voters,e.scheduleRerender()})},html:function(e,t){var n=e.poll,i=n.get("options").reduce(function(e,t){return e+parseInt(t.html,10)*parseInt(t.votes,10)},0),o=n.get("voters"),r=0===o?0:(0,u.default)(i/o,-2),l=I18n.t("poll.average_rating",{average:r}),c=[(0,s.h)("div.poll-results-number-rating",new a.default({html:"<span>"+l+"</span>"}))];return n.get("public")&&(t.loaded||(t.loaded=!0,this.fetchVoters()),c.push(this.attach("discourse-poll-voters",{totalVotes:n.get("voters"),voters:t.voters||[],postId:e.post.id,pollName:n.get("name"),pollType:n.get("type")}))),c}}),(0,t.createWidget)("discourse-poll-container",{tagName:"div.poll-container",html:function(e){var t=this,n=e.poll,a=n.get("options");if(e.showResults){var i="number"===n.get("type")?"number":"standard";return this.attach("discourse-poll-"+i+"-results",e)}if(a)return(0,s.h)("ul",a.map(function(s){return t.attach("discourse-poll-option",{option:s,isMultiple:e.isMultiple,vote:e.vote})}))}}),(0,t.createWidget)("discourse-poll-info",{tagName:"div.poll-info",multipleHelpText:function(e,t,s){if(t>0)if(e===t){if(e>1)return I18n.t("poll.multiple.help.x_options",{count:e})}else{if(e>1)return t<s?I18n.t("poll.multiple.help.between_min_and_max_options",{min:e,max:t}):I18n.t("poll.multiple.help.at_least_min_options",{count:e});if(t<=s)return I18n.t("poll.multiple.help.up_to_max_options",{count:t})}},html:function(e){var t=e.poll,n=t.get("voters"),a=[(0,s.h)("p",[(0,s.h)("span.info-number",n.toString()),(0,s.h)("span.info-label",I18n.t("poll.voters",{count:n}))])];if(e.isMultiple)if(e.showResults||e.isClosed){var i=t.get("options").reduce(function(e,t){return e+parseInt(t.votes,10)},0);a.push((0,s.h)("p",[(0,s.h)("span.info-number",i.toString()),(0,s.h)("span.info-label",I18n.t("poll.total_votes",{count:i}))]))}else{var o=this.multipleHelpText(e.min,e.max,t.get("options.length"));o&&a.push(m(o))}return e.isClosed||e.showResults||!t.get("public")||a.push(m(I18n.t("poll.public.title"))),a}}),(0,t.createWidget)("discourse-poll-buttons",{tagName:"div.poll-buttons",html:function(e){var t=[],s=e.poll,n=e.post,i=n.get("topic.archived"),o=e.isClosed,r=o||i;if(e.isMultiple&&!r){var l=!e.canCastVotes;t.push(this.attach("button",{className:"btn cast-votes "+(l?"":"btn-primary"),label:"poll.cast-votes.label",title:"poll.cast-votes.title",disabled:l,action:"castVotes"})),t.push(" ")}if(e.showResults||r?t.push(this.attach("button",{className:"btn toggle-results",label:"poll.hide-results.label",title:"poll.hide-results.title",icon:"far-eye-slash",disabled:r,action:"toggleResults"})):"on_vote"!==s.get("results")||e.hasVoted?"on_close"!==s.get("results")||o?t.push(this.attach("button",{className:"btn toggle-results",label:"poll.show-results.label",title:"poll.show-results.title",icon:"far-eye",disabled:0===s.get("voters"),action:"toggleResults"})):t.push(m(I18n.t("poll.results.closed.title"))):t.push(m(I18n.t("poll.results.vote.title"))),s.get("close")){var u=moment.utc(s.get("close"));if(u.isValid()){var d=u.format("LLL"),p=void 0;if(e.isAutomaticallyClosed){var f=(0,c.relativeAge)(u.toDate(),{addAgo:!0});p=I18n.t("poll.automatic_close.age",{age:f})}else{var h=moment().to(u.local(),!0);p=I18n.t("poll.automatic_close.closes_in",{timeLeft:h})}t.push(new a.default({html:'<span class="info-text" title="'+d+'">'+p+"</span>"}))}}return!this.currentUser||this.currentUser.get("id")!==n.get("user_id")&&!this.currentUser.get("staff")||i||(o?e.isAutomaticallyClosed||t.push(this.attach("button",{className:"btn toggle-status",label:"poll.open.label",title:"poll.open.title",icon:"unlock-alt",action:"toggleStatus"})):t.push(this.attach("button",{className:"btn toggle-status btn-danger",label:"poll.close.label",title:"poll.close.title",icon:"lock",action:"toggleStatus"}))),t}}),e.default=(0,t.createWidget)("discourse-poll",{tagName:"div.poll",buildKey:function(e){return"poll-"+e.id},buildAttributes:function(e){return{"data-poll-name":e.poll.get("name"),"data-poll-type":e.poll.get("type")}},defaultState:function(e){var t=e.post,s=e.poll;return{loading:!1,showResults:t.get("topic.archived")||this.isClosed()||"on_close"!==s.get("results")&&this.hasVoted()}},html:function(e,t){var n=t.showResults||e.post.get("topic.archived")||this.isClosed(),a=jQuery.extend({},e,{canCastVotes:this.canCastVotes(),hasVoted:this.hasVoted(),isAutomaticallyClosed:this.isAutomaticallyClosed(),isClosed:this.isClosed(),isMultiple:this.isMultiple(),max:this.max(),min:this.min(),showResults:n});return(0,s.h)("div",[this.attach("discourse-poll-container",a),this.attach("discourse-poll-info",a),this.attach("discourse-poll-buttons",a)])},min:function(){var e=parseInt(this.attrs.poll.get("min"),10);return(isNaN(e)||e<0)&&(e=0),e},max:function(){var e=parseInt(this.attrs.poll.get("max"),10),t=this.attrs.poll.get("options.length");return(isNaN(e)||e>t)&&(e=t),e},isAutomaticallyClosed:function(){var e=this.attrs.poll;return e.get("close")&&moment.utc(e.get("close"))<=moment()},isClosed:function(){return"closed"===this.attrs.poll.get("status")||this.isAutomaticallyClosed()},isMultiple:function(){return"multiple"===this.attrs.poll.get("type")},hasVoted:function(){var e=this.attrs.vote;return e&&e.length>0},canCastVotes:function(){var e=this.state,t=this.attrs;if(this.isClosed()||e.showResults||e.loading)return!1;var s=t.vote.length;return this.isMultiple()?s>=this.min()&&s<=this.max():s>0},toggleStatus:function(){var e=this,t=this.state,s=this.attrs,n=s.post,a=s.poll;this.isAutomaticallyClosed()||bootbox.confirm(I18n.t(this.isClosed()?"poll.open.confirm":"poll.close.confirm"),I18n.t("no_value"),I18n.t("yes_value"),function(s){if(s){t.loading=!0;var r=e.isClosed()?"open":"closed";(0,i.ajax)("/polls/toggle_status",{type:"PUT",data:{post_id:n.get("id"),poll_name:a.get("name"),status:r}}).then(function(){a.set("status",r),"on_close"===a.get("results")&&(t.showResults="closed"===r),e.scheduleRerender()}).catch(function(e){e?(0,o.popupAjaxError)(e):bootbox.alert(I18n.t("poll.error_while_toggling_status"))}).finally(function(){t.loading=!1})}})},toggleResults:function(){this.state.showResults=!this.state.showResults},showLogin:function(){this.register.lookup("route:application").send("showLogin")},toggleOption:function(e){var t=this.attrs;if(!this.isClosed()){if(!this.currentUser)return this.showLogin();var s=t.vote,n=s.indexOf(e.id);return this.isMultiple()||(s.length=0),-1!==n?s.splice(n,1):s.push(e.id),this.isMultiple()?void 0:this.castVotes()}},castVotes:function(){if(this.canCastVotes()){if(!this.currentUser)return this.showLogin();var e=this.attrs,t=this.state;return t.loading=!0,(0,i.ajax)("/polls/vote",{type:"PUT",data:{post_id:e.post.id,poll_name:e.poll.get("name"),options:e.vote}}).then(function(s){var n=s.poll;e.poll.setProperties(n),"on_close"!==e.poll.get("results")&&(t.showResults=!0)}).catch(function(e){e?(0,o.popupAjaxError)(e):bootbox.alert(I18n.t("poll.error_while_casting_votes"))}).finally(function(){t.loading=!1})}}})}),define("discourse/plugins/poll/lib/discourse-markdown/poll",["exports"],function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}function s(e,s,n){var a=e.indexOf(s),i=e[a].level;for(e.splice.apply(e,[a,1].concat(t(n))),n[0].map=s.map;a<e.length;a++){var o=e[a].nesting;o<0&&i--,e[a].level=i,o>0&&i++}}function n(e,t){for(var s=e.length-1,n=[],a=[];e[s]!==t;s--){if(0===s)return;var i=e[s];if(0===i.level&&"ol"!==i.tag&&"ul"!==i.tag)return;if(1===i.level&&1===i.nesting){if("li"!==i.tag)return;n.push([i,a.reverse().join(" ")])}1===i.level&&1===i.nesting&&"li"===i.tag?a=[]:"text"!==i.type&&"inline"!==i.type||a.push(i.content)}return n.reverse()}function a(e,t){e.push("text","",0).content="[/"+t+"]"}function i(e){e.registerOptions(function(e,t){e.features.poll=!!t.poll_enabled,e.pollMaximumOptions=t.poll_maximum_options}),e.registerPlugin(function(e){e.block.bbcode.ruler.push("poll",y)})}function o(e){e.whiteList(["div.poll","div.poll-info","div.poll-container","div.poll-buttons","div[data-*]","span.info-number","span.info-text","span.info-label","a.button.cast-votes","a.button.toggle-results","li[data-*]"]),i(e)}function r(e,t){var s=e[0],n=e[1],a=e[2],i=e[3];s=u(s,n,a,i,t[0],7,-680876936),i=u(i,s,n,a,t[1],12,-389564586),a=u(a,i,s,n,t[2],17,606105819),n=u(n,a,i,s,t[3],22,-1044525330),s=u(s,n,a,i,t[4],7,-176418897),i=u(i,s,n,a,t[5],12,1200080426),a=u(a,i,s,n,t[6],17,-1473231341),n=u(n,a,i,s,t[7],22,-45705983),s=u(s,n,a,i,t[8],7,1770035416),i=u(i,s,n,a,t[9],12,-1958414417),a=u(a,i,s,n,t[10],17,-42063),n=u(n,a,i,s,t[11],22,-1990404162),s=u(s,n,a,i,t[12],7,1804603682),i=u(i,s,n,a,t[13],12,-40341101),a=u(a,i,s,n,t[14],17,-1502002290),n=u(n,a,i,s,t[15],22,1236535329),s=c(s,n,a,i,t[1],5,-165796510),i=c(i,s,n,a,t[6],9,-1069501632),a=c(a,i,s,n,t[11],14,643717713),n=c(n,a,i,s,t[0],20,-373897302),s=c(s,n,a,i,t[5],5,-701558691),i=c(i,s,n,a,t[10],9,38016083),a=c(a,i,s,n,t[15],14,-660478335),n=c(n,a,i,s,t[4],20,-405537848),s=c(s,n,a,i,t[9],5,568446438),i=c(i,s,n,a,t[14],9,-1019803690),a=c(a,i,s,n,t[3],14,-187363961),n=c(n,a,i,s,t[8],20,1163531501),s=c(s,n,a,i,t[13],5,-1444681467),i=c(i,s,n,a,t[2],9,-51403784),a=c(a,i,s,n,t[7],14,1735328473),n=c(n,a,i,s,t[12],20,-1926607734),s=d(s,n,a,i,t[5],4,-378558),i=d(i,s,n,a,t[8],11,-2022574463),a=d(a,i,s,n,t[11],16,1839030562),n=d(n,a,i,s,t[14],23,-35309556),s=d(s,n,a,i,t[1],4,-1530992060),i=d(i,s,n,a,t[4],11,1272893353),a=d(a,i,s,n,t[7],16,-155497632),n=d(n,a,i,s,t[10],23,-1094730640),s=d(s,n,a,i,t[13],4,681279174),i=d(i,s,n,a,t[0],11,-358537222),a=d(a,i,s,n,t[3],16,-722521979),n=d(n,a,i,s,t[6],23,76029189),s=d(s,n,a,i,t[9],4,-640364487),i=d(i,s,n,a,t[12],11,-421815835),a=d(a,i,s,n,t[15],16,530742520),n=d(n,a,i,s,t[2],23,-995338651),s=p(s,n,a,i,t[0],6,-198630844),i=p(i,s,n,a,t[7],10,1126891415),a=p(a,i,s,n,t[14],15,-1416354905),n=p(n,a,i,s,t[5],21,-57434055),s=p(s,n,a,i,t[12],6,1700485571),i=p(i,s,n,a,t[3],10,-1894986606),a=p(a,i,s,n,t[10],15,-1051523),n=p(n,a,i,s,t[1],21,-2054922799),s=p(s,n,a,i,t[8],6,1873313359),i=p(i,s,n,a,t[15],10,-30611744),a=p(a,i,s,n,t[6],15,-1560198380),n=p(n,a,i,s,t[13],21,1309151649),s=p(s,n,a,i,t[4],6,-145523070),i=p(i,s,n,a,t[11],10,-1120210379),a=p(a,i,s,n,t[2],15,718787259),n=p(n,a,i,s,t[9],21,-343485551),e[0]=b(s,e[0]),e[1]=b(n,e[1]),e[2]=b(a,e[2]),e[3]=b(i,e[3])}function l(e,t,s,n,a,i){return t=b(b(t,e),b(n,i)),b(t<<a|t>>>32-a,s)}function u(e,t,s,n,a,i,o){return l(t&s|~t&n,e,t,a,i,o)}function c(e,t,s,n,a,i,o){return l(t&n|s&~n,e,t,a,i,o)}function d(e,t,s,n,a,i,o){return l(t^s^n,e,t,a,i,o)}function p(e,t,s,n,a,i,o){return l(s^(t|~n),e,t,a,i,o)}function m(e){/[\x80-\xFF]/.test(e)&&(e=unescape(encodeURI(e)));var t,s=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)r(n,f(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(r(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*s,r(n,a),n}function f(e){var t,s=[];for(t=0;t<64;t+=4)s[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return s}function h(e){for(var t="",s=0;s<4;s++)t+=x[e>>8*s+4&15]+x[e>>8*s&15];return t}function g(e){for(var t=0;t<e.length;t++)e[t]=h(e[t]);return e.join("")}function b(e,t){return e+t&4294967295}function v(e){return g(m(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setup=o;var _=["close","max","min","name","order","public","results","status","step","type"],y={tag:"poll",before:function(e,t,s){var n=e.push("text","",0);n.content=s,n.bbcode_attrs=t.attrs,n.bbcode_type="poll_open"},after:function(e,t,i){var o=n(e.tokens,t);if(!o)return a(e,i);var r=t.bbcode_attrs,l=[["class","poll"]];r.status||l.push(["data-poll-status","open"]),_.forEach(function(e){r[e]&&l.push(["data-poll-"+e,r[e]])}),r.name||l.push(["data-poll-name","poll"]);var u=parseInt(r.min,10),c=parseInt(r.max,10),d=parseInt(r.step,10);d<1&&(d=1);var p=[],m=new e.Token("poll_open","div",1);if(m.block=!0,m.attrs=l,p.push(m),m=new e.Token("poll_open","div",1),m.block=!0,p.push(m),m=new e.Token("poll_open","div",1),m.attrs=[["class","poll-container"]],p.push(m),"number"===r.type){if(isNaN(u)&&(u=1),isNaN(c)&&(c=e.md.options.discourse.pollMaximumOptions),isNaN(d)&&(d=1),o.length>0)return a(e,i);m=new e.Token("bullet_list_open","ul",1),p.push(m);for(var f=u;f<=c;f+=d)m=new e.Token("list_item_open","li",1),o.push([m,String(f)]),p.push(m),m=new e.Token("text","",0),m.content=String(f),p.push(m),m=new e.Token("list_item_close","li",-1),p.push(m);m=new e.Token("bullet_item_close","",-1),p.push(m)}for(var h=0;h<o.length;h++){m=o[h][0];var g=o[h][1];m.attrs=m.attrs||[];var b=v(JSON.stringify([g]));m.attrs.push(["data-poll-option-id",b])}s(e.tokens,t,p),e.level=e.tokens[e.tokens.length-1].level,e.push("poll_close","div",-1),m=e.push("poll_open","div",1),m.attrs=[["class","poll-info"]],e.push("paragraph_open","p",1),m=e.push("span_open","span",1),m.block=!1,m.attrs=[["class","info-number"]],m=e.push("text","",0),m.content="0",e.push("span_close","span",-1),m=e.push("span_open","span",1),m.block=!1,m.attrs=[["class","info-label"]],m=e.push("text","",0),m.content=I18n.t("poll.voters",{count:0}),e.push("span_close","span",-1),e.push("paragraph_close","p",-1),e.push("poll_close","div",-1),e.push("poll_close","div",-1),e.push("poll_close","div",-1)}},x="0123456789abcdef".split("")}),define("discourse/plugins/poll/lib/even-round",["exports"],function(e){"use strict";function t(e){return 100===e.map(function(e){return Math.floor(e)}).reduce(function(e,t){return e+t})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){for(var s=e.map(function(e){return e%1}),n=Math.ceil(s.reduce(function(e,t){return e+t})),a=0,i=s.length;a<n&&a<i;a++){for(var o=0,r=0,l=0;l<s.length;l++)s[l]>o&&(r=l,o=s[l]);if(++e[r],s[r]=0,t(e))break}return e.map(function(e){return Math.floor(e)})}}),define("discourse/plugins/poll/controllers/poll-ui-builder",["exports","ember-addons/ember-computed-decorators","discourse/models/input-validation"],function(e,t,s){"use strict";function n(e,t,s,n,a){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=s.slice().reverse().reduce(function(s,n){return n(e,t,s)||s},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var a,i,o,r,l,u,c,d,p,m,f,h,g,b,v,y,x;e.default=Ember.Controller.extend((a=(0,t.default)("regularPollType","numberPollType","multiplePollType"),i=(0,t.default)("alwaysPollResult","votePollResult","closedPollResult"),o=(0,t.default)("pollType","regularPollType"),r=(0,t.default)("pollType","pollOptionsCount","multiplePollType"),l=(0,t.default)("pollType","numberPollType"),u=(0,t.default)("isRegular"),c=(0,t.default)("pollOptions"),d=(0,t.observes)("isMultiple","isNumber","pollOptionsCount"),p=(0,t.default)("isRegular","isMultiple","isNumber","pollOptionsCount"),m=(0,t.default)("isRegular","isMultiple","isNumber","pollOptionsCount","pollMin","pollStep"),f=(0,t.default)("isNumber","pollMax"),h=(0,t.default)("isNumber","showMinMax","pollType","pollResult","publicPoll","pollOptions","pollMin","pollMax","pollStep","autoClose","date","time"),g=(0,t.default)("pollOptionsCount","isRegular","isMultiple","isNumber","pollMin","pollMax"),b=(0,t.default)("pollMin","pollMax"),v=(0,t.default)("pollStep"),y=(0,t.default)("disableInsert"),x={regularPollType:"regular",numberPollType:"number",multiplePollType:"multiple",alwaysPollResult:"always",votePollResult:"on_vote",closedPollResult:"on_close",init:function(){this._super.apply(this,arguments),this._setupPoll()},pollTypes:function(e,t,s){return[{name:I18n.t("poll.ui_builder.poll_type.regular"),value:e},{name:I18n.t("poll.ui_builder.poll_type.number"),value:t},{name:I18n.t("poll.ui_builder.poll_type.multiple"),value:s}]},pollResults:function(e,t,s){return[{name:I18n.t("poll.ui_builder.poll_result.always"),value:e},{name:I18n.t("poll.ui_builder.poll_result.vote"),value:t},{name:I18n.t("poll.ui_builder.poll_result.closed"),value:s}]},isRegular:function(e,t){return e===t},isMultiple:function(e,t,s){return e===s&&t>0},isNumber:function(e,t){return e===t},showMinMax:function(e){return!e},pollOptionsCount:function(e){if(0===e.length)return 0;var t=0;return e.split("\n").forEach(function(e){0!==e.length&&(t+=1)}),t},_setPollMax:function(){var e=this.get("isMultiple"),t=this.get("isNumber");(e||t)&&(e?this.set("pollMax",this.get("pollOptionsCount")):t&&this.set("pollMax",this.siteSettings.poll_maximum_options))},pollMinOptions:function(e,t,s,n){if(!e)return t?this._comboboxOptions(1,n+1):s?this._comboboxOptions(1,this.siteSettings.poll_maximum_options+1):void 0},pollMaxOptions:function(e,t,s,n,a,i){if(!e){var o=parseInt(a)||1;if(t)return this._comboboxOptions(o+1,n+1);if(s){var r=parseInt(i,10);return r<1&&(r=1),this._comboboxOptions(o+1,o+this.siteSettings.poll_maximum_options*r)}}},pollStepOptions:function(e,t){if(e)return this._comboboxOptions(1,(parseInt(t)||1)+1)},pollOutput:function(e,t,s,n,a,i,o,r,l,u,c,d){var p="[poll",m="",f=this.get("toolbarEvent").getText().match(/\[poll(\s+name=[^\s\]]+)*.*\]/gim);f&&(p+=" name=poll"+(f.length+1));var h=l;if(h<1&&(h=1),s&&(p+=" type="+s),n&&(p+=" results="+n),o&&t&&(p+=" min="+o),r&&(p+=" max="+r),e&&(p+=" step="+h),a&&(p+=" public=true"),u){var g=moment(c+" "+d,"YYYY-MM-DD HH:mm").toISOString();g&&(p+=" close="+g)}return p+="]",m+=p+"\n",i.length>0&&!e&&i.split("\n").forEach(function(e){0!==e.length&&(m+="* "+e+"\n")}),m+="[/poll]"},disableInsert:function(e,t,s,n,a,i){return t&&e<2||s&&e<a&&a>=i||!n&&e<2},minMaxValueValidation:function(e,t){var n={ok:!0};return e>=t&&(n={failed:!0,reason:I18n.t("poll.ui_builder.help.invalid_values")}),s.default.create(n)},minStepValueValidation:function(e){var t={ok:!0};return e<1&&(t={failed:!0,reason:I18n.t("poll.ui_builder.help.min_step_value")}),s.default.create(t)},minNumOfOptionsValidation:function(e){var t={ok:!0};return e&&(t={failed:!0,reason:I18n.t("poll.ui_builder.help.options_count")}),s.default.create(t)},_comboboxOptions:function(e,t){return _.range(e,t).map(function(e){return{value:e,name:e}})},_setupPoll:function(){this.setProperties({pollType:null,publicPoll:!1,pollOptions:"",pollMin:1,pollMax:null,pollStep:1,autoClose:!1,date:moment().add(1,"day").format("YYYY-MM-DD"),time:moment().add(1,"hour").format("HH:mm")})},actions:{insertPoll:function(){this.get("toolbarEvent").addText(this.get("pollOutput")),this.send("closeModal"),this._setupPoll()}}},n(x,"pollTypes",[a],Object.getOwnPropertyDescriptor(x,"pollTypes"),x),n(x,"pollResults",[i],Object.getOwnPropertyDescriptor(x,"pollResults"),x),n(x,"isRegular",[o],Object.getOwnPropertyDescriptor(x,"isRegular"),x),n(x,"isMultiple",[r],Object.getOwnPropertyDescriptor(x,"isMultiple"),x),n(x,"isNumber",[l],Object.getOwnPropertyDescriptor(x,"isNumber"),x),n(x,"showMinMax",[u],Object.getOwnPropertyDescriptor(x,"showMinMax"),x),n(x,"pollOptionsCount",[c],Object.getOwnPropertyDescriptor(x,"pollOptionsCount"),x),n(x,"_setPollMax",[d],Object.getOwnPropertyDescriptor(x,"_setPollMax"),x),n(x,"pollMinOptions",[p],Object.getOwnPropertyDescriptor(x,"pollMinOptions"),x),n(x,"pollMaxOptions",[m],Object.getOwnPropertyDescriptor(x,"pollMaxOptions"),x),n(x,"pollStepOptions",[f],Object.getOwnPropertyDescriptor(x,"pollStepOptions"),x),n(x,"pollOutput",[h],Object.getOwnPropertyDescriptor(x,"pollOutput"),x),n(x,"disableInsert",[g],Object.getOwnPropertyDescriptor(x,"disableInsert"),x),n(x,"minMaxValueValidation",[b],Object.getOwnPropertyDescriptor(x,"minMaxValueValidation"),x),n(x,"minStepValueValidation",[v],Object.getOwnPropertyDescriptor(x,"minStepValueValidation"),x),n(x,"minNumOfOptionsValidation",[y],Object.getOwnPropertyDescriptor(x,"minNumOfOptionsValidation"),x),x))});
//# sourceMappingURL=https://discourse-cdn-sjc1.com/business6/assets/plugin-4d4c9272c7e06875626d538b9cac9d943ee50ca2e2b6c955df6867a03294fa4e.js.map